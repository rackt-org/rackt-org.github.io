import * as $rjs_core from '../../../../runtime/core.js';import * as M0 from "./private/color.rkt.js";import * as M1 from "../../../racketscript-compiler/racketscript/private/interop.rkt.js";import * as M2 from "../private/jscommon.rkt.js";import * as M3 from "../../../../collects/racket/private/map.rkt.js";import * as M4 from "../../../../collects/racket/private/list.rkt.js";import * as M5 from "../../../../runtime/kernel.rkt.js";import * as M6 from "../../../racketscript-compiler/racketscript/interop.rkt.js";var let_result867 = M5.make_struct_type($rjs_core.Symbol.make("posn"),false,2,0,false,M5.rnull,false,false,$rjs_core.Pair.makeList(0,1),false,$rjs_core.Symbol.make("posn"));var struct_1529 = let_result867.getAt(0);var make_1530 = let_result867.getAt(1);var __p1531 = let_result867.getAt(2);var __ref1532 = let_result867.getAt(3);var __set_bang_1533 = let_result867.getAt(4);var let_result868 = M5.values(struct_1529,make_1530,__p1531,M5.make_struct_field_accessor(__ref1532,0,$rjs_core.Symbol.make("x")),M5.make_struct_field_accessor(__ref1532,1,$rjs_core.Symbol.make("y")));var struct_posn = let_result868.getAt(0);var make_posn = let_result868.getAt(1);var posn_p = let_result868.getAt(2);var posn_x = let_result868.getAt(3);var posn_y = let_result868.getAt(4);var ___gt_web_color = function(p1534) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M5.string_p(p1534)!==false) {var if_res871 = M0.string__gt_web_color(p1534);} else {if (M0.color_p(p1534)!==false) {var if_res870 = M0.color__gt_web_color(p1534);} else {if (M5.symbol_p(p1534)!==false) {var if_res869 = M0.string__gt_web_color(M5.symbol__gt_string(p1534));} else {var if_res869 = M5.error($rjs_core.Symbol.make("color"),$rjs_core.UString.make("invalid color"));}var if_res870 = if_res869;}var if_res871 = if_res870;}return if_res871;};var print_image = function(d1535) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var canvas1536 = M2.document.createElement("canvas");var ctx1537 = canvas1536.getContext("2d");M2.document.body.appendChild(canvas1536);M2.document.body.appendChild(M2.document.createElement("br"));canvas1536.width = d1535.width;canvas1536.height = d1535.height;ctx1537.save();ctx1537.translate(d1535.width/2,d1535.height/2);d1535.render(ctx1537,0,0);return ctx1537.restore();};var canvas1538 = M2.document.createElement("canvas");var __times_invisible_canvas_context_times_ = canvas1538.getContext("2d");var empty_image = {'type':$rjs_core.UString.make("empty-image"),'width':0,'height':0,'render':function(ctx1539, x1540, y1541) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M5.rvoid();}};var image_height = function(i1542) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return i1542.height;};var image_width = function(i1543) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return i1543.width;};var EmptyScene = function(width1544, height1545, borders_p1546) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1547 = this;this1547.type = $rjs_core.UString.make("empty-scene");this1547.width = width1544;this1547.height = height1545;this1547.borders_p = borders_p1546;return null;};EmptyScene.prototype.render = function(ctx1548, x1549, y1550) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M5.rvoid();};var Text = function(text1551, size1552, color1553, face1554, family1555, style1556, weight1557, underline_p1558) {if (arguments.length!==8) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1559 = this;this1559.type = $rjs_core.UString.make("text");this1559.text = text1551;this1559.size = size1552;this1559.color = ___gt_web_color(color1553);this1559.face = face1554;this1559.family = family1555;this1559.style = style1556;this1559.weight = weight1557;this1559.underline = underline_p1558;return this1559._updateMetrics();};Text.prototype._updateMetrics = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1560 = this;var font1561 = M5.string_append(this1560.weight,$rjs_core.UString.make(" "),this1560.style,$rjs_core.UString.make(" "),M5.number__gt_string(this1560.size),$rjs_core.UString.make("px "),this1560.face,$rjs_core.UString.make(" "),this1560.family);__times_invisible_canvas_context_times_.font = M6.js_string(font1561);var let_result872 = M5.values();var metrics1562 = __times_invisible_canvas_context_times_.measureText(M6.js_string(this1560.text));this1560.font = font1561;this1560.width = metrics1562.width;this1560.height = this1560.size;return null;};Text.prototype.render = function(ctx1563, x1564, y1565) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1566 = this;ctx1563.save();ctx1563.translate(x1564,y1565);ctx1563.font = M6.js_string(this1566.font);ctx1563.textAlign = "center";ctx1563.textBaseline = "middle";ctx1563.fillStyle = M6.js_string(this1566.color);ctx1563.fillText(M6.js_string(this1566.text),0,0);return ctx1563.restore();};var Line = function(x1567, y1568, pen_or_color1569) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1570 = this;this1570.type = $rjs_core.UString.make("line");this1570.width = M2.abs_plus_ceil(x1567);this1570.height = M2.abs_plus_ceil(y1568);this1570.mode = false;this1570.pen = pen_or_color1569;return null;};Line.prototype.render = function(ctx1571, x1572, y1573) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1574 = this;ctx1571.save();var let_result873 = M5.values();ctx1571.translate(x1572,y1573);var let_result874 = M5.values();ctx1571.beginPath();var let_result875 = M5.values();var sx1575 = M5.__(M5.abs(this1574.x/2));var sy1576 = M5.__(M5.abs(this1574.y/2));if (M5.__gt__eq_(x1572,0)!==false) {var if_res876 = M5.__gt__eq_(y1573,0);} else {var if_res876 = false;}if (if_res876!==false) {ctx1571.moveTo(sx1575,sy1576);var if_res883 = ctx1571.lineTo(sx1575+x1572,sy1576+y1573);} else {if (M5.__gt__eq_(x1572,0)!==false) {var if_res877 = M5.__lt_(y1573,0);} else {var if_res877 = false;}if (if_res877!==false) {ctx1571.moveTo(sx1575+x1572,sy1576);var if_res882 = ctx1571.lineTo(sx1575,sy1576-y1573);} else {if (M5.__lt_(x1572,0)!==false) {var if_res878 = M5.__gt__eq_(y1573,0);} else {var if_res878 = false;}if (if_res878!==false) {ctx1571.moveTo(sx1575,sy1576+y1573);var if_res881 = ctx1571.lineTo(sx1575-x1572,sy1576);} else {if (M5.__lt_(x1572,0)!==false) {var if_res879 = M5.__lt_(y1573,0);} else {var if_res879 = false;}if (if_res879!==false) {ctx1571.moveTo(sx1575-x1572,sy1576-y1573);var if_res880 = ctx1571.lineTo(sx1575,sy1576);} else {var if_res880 = M5.rvoid();}var if_res881 = if_res880;}var if_res882 = if_res881;}var if_res883 = if_res882;}if_res883;var or_part1577 = M5.equal_p($rjs_core.UString.make("outline"),$rjs_core.Symbol.make("outline"));if (or_part1577!==false) {var if_res884 = or_part1577;} else {var if_res884 = M5.equal_p($rjs_core.UString.make("outline"),$rjs_core.UString.make("outline"));}if (if_res884!==false) {ctx1571.strokeStyle = M6.js_string(___gt_web_color(this1574.pen));var if_res887 = ctx1571.stroke();} else {var or_part1578 = M5.equal_p($rjs_core.UString.make("outline"),$rjs_core.Symbol.make("solid"));if (or_part1578!==false) {var if_res885 = or_part1578;} else {var if_res885 = M5.equal_p($rjs_core.UString.make("outline"),$rjs_core.UString.make("solid"));}if (if_res885!==false) {ctx1571.fillStyle = M6.js_string(___gt_web_color(this1574.pen));var if_res886 = ctx1571.fill();} else {var if_res886 = M5.rvoid();}var if_res887 = if_res886;}if_res887;ctx1571.closePath();return ctx1571.restore();};var Rectangle = function(width1579, height1580, mode1581, pen_or_color1582) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1583 = this;this1583.type = $rjs_core.UString.make("rectangle");this1583.width = width1579;this1583.height = height1580;this1583.mode = mode1581;this1583.pen = pen_or_color1582;return null;};Rectangle.prototype.render = function(ctx1584, x1585, y1586) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1587 = this;ctx1584.save();ctx1584.translate(x1585,y1586);ctx1584.beginPath();var width1588 = this1587.width;var height1589 = this1587.height;var start_x1590 = M5.__(width1588/2);var start_y1591 = M5.__(height1589/2);ctx1584.rect(start_x1590,start_y1591,width1588,height1589);var or_part1592 = M5.equal_p(this1587.mode,$rjs_core.Symbol.make("outline"));if (or_part1592!==false) {var if_res888 = or_part1592;} else {var if_res888 = M5.equal_p(this1587.mode,$rjs_core.UString.make("outline"));}if (if_res888!==false) {ctx1584.strokeStyle = M6.js_string(___gt_web_color(this1587.pen));var if_res891 = ctx1584.stroke();} else {var or_part1593 = M5.equal_p(this1587.mode,$rjs_core.Symbol.make("solid"));if (or_part1593!==false) {var if_res889 = or_part1593;} else {var if_res889 = M5.equal_p(this1587.mode,$rjs_core.UString.make("solid"));}if (if_res889!==false) {ctx1584.fillStyle = M6.js_string(___gt_web_color(this1587.pen));var if_res890 = ctx1584.fill();} else {var if_res890 = M5.rvoid();}var if_res891 = if_res890;}if_res891;ctx1584.closePath();return ctx1584.restore();};var Circle = function(radius1594, mode1595, pen_or_color1596) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1597 = this;var diameter1598 = radius1594*2;this1597.type = $rjs_core.UString.make("circle");this1597.radius = radius1594;this1597.width = diameter1598;this1597.height = diameter1598;this1597.mode = mode1595;this1597.pen = pen_or_color1596;return null;};Circle.prototype.render = function(ctx1599, x1600, y1601) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1602 = this;var radius1603 = this1602.radius;ctx1599.save();ctx1599.translate(x1600,y1601);ctx1599.beginPath();ctx1599.ellipse(0,0,radius1603,radius1603,0,0,M2.Math.PI*2);var or_part1604 = M5.equal_p(this1602.mode,$rjs_core.Symbol.make("outline"));if (or_part1604!==false) {var if_res892 = or_part1604;} else {var if_res892 = M5.equal_p(this1602.mode,$rjs_core.UString.make("outline"));}if (if_res892!==false) {ctx1599.strokeStyle = M6.js_string(___gt_web_color(this1602.pen));var if_res895 = ctx1599.stroke();} else {var or_part1605 = M5.equal_p(this1602.mode,$rjs_core.Symbol.make("solid"));if (or_part1605!==false) {var if_res893 = or_part1605;} else {var if_res893 = M5.equal_p(this1602.mode,$rjs_core.UString.make("solid"));}if (if_res893!==false) {ctx1599.fillStyle = M6.js_string(___gt_web_color(this1602.pen));var if_res894 = ctx1599.fill();} else {var if_res894 = M5.rvoid();}var if_res895 = if_res894;}if_res895;ctx1599.closePath();return ctx1599.restore();};var Polygon = function(vertices1606, mode1607, pen_or_color1608) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1609 = this;var xs1610 = M3.map(posn_x,vertices1606);var ys1611 = M3.map(posn_y,vertices1606);var width1612 = M5.apply(M5.max,xs1610)-M5.apply(M5.min,xs1610);var height1613 = M5.apply(M5.max,ys1611)-M5.apply(M5.min,xs1610);this1609.type = $rjs_core.UString.make("polygon");this1609.vertices = vertices1606;this1609.width = width1612;this1609.height = height1613;this1609.mode = mode1607;this1609.pen = pen_or_color1608;return null;};Polygon.prototype.render = function(ctx1614, x1615, y1616) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1617 = this;var first_point1618 = M5.car(this1617.vertices);var rest_points1619 = M5.cdr(this1617.vertices);var radius1620 = this1617.radius;ctx1614.save();ctx1614.translate(x1615,y1616);ctx1614.beginPath();ctx1614.moveTo(posn_x(first_point1618),posn_y(first_point1618));var loop1621 = function(points1622) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M5.null_p(points1622)!==false) {var if_res896 = M5.rvoid();} else {var pt1623 = M5.car(points1622);ctx1614.lineTo(posn_x(pt1623),posn_y(pt1623));var if_res896 = loop1621(M5.cdr(points1622));}return if_res896;};loop1621(rest_points1619);var or_part1624 = M5.equal_p(this1617.mode,$rjs_core.Symbol.make("outline"));if (or_part1624!==false) {var if_res897 = or_part1624;} else {var if_res897 = M5.equal_p(this1617.mode,$rjs_core.UString.make("outline"));}if (if_res897!==false) {ctx1614.strokeStyle = M6.js_string(___gt_web_color(this1617.pen));var if_res900 = ctx1614.stroke();} else {var or_part1625 = M5.equal_p(this1617.mode,$rjs_core.Symbol.make("solid"));if (or_part1625!==false) {var if_res898 = or_part1625;} else {var if_res898 = M5.equal_p(this1617.mode,$rjs_core.UString.make("solid"));}if (if_res898!==false) {ctx1614.fillStyle = M6.js_string(___gt_web_color(this1617.pen));var if_res899 = ctx1614.fill();} else {var if_res899 = M5.rvoid();}var if_res900 = if_res899;}if_res900;ctx1614.closePath();return ctx1614.restore();};var empty_scene = function(width1626, height1627) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new EmptyScene(width1626,height1627,false);};var text = function(txt1628, size1629, color1630) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Text(txt1628,size1629,color1630,$rjs_core.UString.make(""),$rjs_core.UString.make("serif"),$rjs_core.UString.make("normal"),$rjs_core.UString.make("normal"),false);};var text_by_font = function(txt1631, size1632, color1633, face1634, family1635, style1636, weight1637, underline_p1638) {if (arguments.length!==8) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part1639 = face1634;if (or_part1639!==false) {var if_res904 = or_part1639;} else {var if_res904 = $rjs_core.UString.make("");}if (M5.symbol_p(family1635)!==false) {var if_res903 = M5.symbol__gt_string(family1635);} else {var if_res903 = family1635;}if (M5.symbol_p(style1636)!==false) {var if_res902 = M5.symbol__gt_string(style1636);} else {var if_res902 = style1636;}if (M5.symbol_p(weight1637)!==false) {var if_res901 = M5.symbol__gt_string(weight1637);} else {var if_res901 = weight1637;}return new Text(txt1631,size1632,color1633,if_res904,if_res903,if_res902,if_res901,underline_p1638);};var line = function(x1640, y1641, pen_or_color1642) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Line(x1640,y1641,pen_or_color1642);};var rectangle = function(w1643, h1644, m1645, p1646) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rectangle(w1643,h1644,m1645,p1646);};var square = function(s1647, m1648, p1649) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rectangle(s1647,s1647,m1648,p1649);};var circle = function(r1650, m1651, p1652) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Circle(r1650,m1651,p1652);};var triangle = function(side1653, mode1654, color1655) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var height1656 = side1653*(M5.sqrt(3)/2);return new Polygon(M5.list(make_posn(M5.__(side1653/2),height1656/2),make_posn(0,M5.__(height1656/2)),make_posn(side1653/2,height1656/2)),mode1654,color1655);};var Overlay = function(x_place1657, y_place1658, ima1659, imb1660) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1661 = this;var ima_cx1662 = ima1659.width/2;var ima_cy1663 = ima1659.height/2;var imb_cx1664 = imb1660.width/2;var imb_cy1665 = imb1660.height/2;var tmp1667 = x_place1657;if (M5.equal_p(tmp1667,$rjs_core.UString.make("beside"))!==false) {var if_res907 = ima1659.width+imb1660.width;} else {if (M5.number_p(x_place1657)!==false) {if (M5.positive_p(x_place1657)!==false) {var if_res905 = M5.max(ima1659.width,imb1660.width+x_place1657);} else {var if_res905 = M5.max(imb1660.width,ima1659.width-x_place1657);}var if_res906 = if_res905;} else {var if_res906 = M5.max(ima1659.width,imb1660.width);}var if_res907 = if_res906;}var width1666 = if_res907;var tmp1669 = y_place1658;if (M5.equal_p(tmp1669,$rjs_core.UString.make("above"))!==false) {var if_res910 = ima1659.height+imb1660.height;} else {if (M5.number_p(y_place1658)!==false) {if (M5.positive_p(y_place1658)!==false) {var if_res908 = M5.max(ima1659.height,imb1660.height+y_place1658);} else {var if_res908 = M5.max(imb1660.height,ima1659.height-y_place1658);}var if_res909 = if_res908;} else {var if_res909 = M5.max(ima1659.height,imb1660.height);}var if_res910 = if_res909;}var height1668 = if_res910;var δ_edge_x1670 = width1666/2;var δ_edge_y1671 = height1668/2;var tmp1674 = x_place1657;if (M5.equal_p(tmp1674,$rjs_core.UString.make("left"))!==false) {var if_res917 = M5.values(ima_cx1662-δ_edge_x1670,imb_cx1664-δ_edge_x1670);} else {if (M5.equal_p(tmp1674,$rjs_core.UString.make("right"))!==false) {var if_res916 = M5.values(δ_edge_x1670-ima_cx1662,δ_edge_x1670-imb_cx1664);} else {if (M5.equal_p(tmp1674,$rjs_core.UString.make("beside"))!==false) {var if_res915 = M5.values(ima_cx1662-δ_edge_x1670,δ_edge_x1670-imb_cx1664);} else {if (M5.equal_p(tmp1674,$rjs_core.UString.make("middle"))!==false) {var if_res911 = true;} else {var if_res911 = M5.equal_p(tmp1674,$rjs_core.UString.make("center"));}if (if_res911!==false) {var if_res914 = M5.values(0,0);} else {if (M5.number_p(x_place1657)!==false) {var local_width1675 = M5.max(ima1659.width,imb1660.width);var local_acx1676 = ima_cx1662-(local_width1675/2);var local_bcx1677 = imb_cx1664-(local_width1675/2);var acx_bcx1678 = δ_edge_x1670-(local_width1675/2);if (M5.positive_p(x_place1657)!==false) {var if_res912 = M5.values(local_acx1676-acx_bcx1678,x_place1657+(local_bcx1677-acx_bcx1678));} else {var if_res912 = M5.values(local_acx1676-x_place1657-acx_bcx1678,local_bcx1677-acx_bcx1678);}var if_res913 = if_res912;} else {var if_res913 = M5.error($rjs_core.UString.make("invalid x-place align"));}var if_res914 = if_res913;}var if_res915 = if_res914;}var if_res916 = if_res915;}var if_res917 = if_res916;}var let_result918 = if_res917;var δ_a_x1672 = let_result918.getAt(0);var δ_b_x1673 = let_result918.getAt(1);var tmp1681 = y_place1658;if (M5.equal_p(tmp1681,$rjs_core.UString.make("top"))!==false) {var if_res925 = M5.values(ima_cy1663-δ_edge_y1671,imb_cy1665-δ_edge_y1671);} else {if (M5.equal_p(tmp1681,$rjs_core.UString.make("bottom"))!==false) {var if_res924 = M5.values(δ_edge_y1671-ima_cy1663,δ_edge_y1671-imb_cy1665);} else {if (M5.equal_p(tmp1681,$rjs_core.UString.make("above"))!==false) {var if_res923 = M5.values(ima_cy1663-δ_edge_y1671,δ_edge_y1671-imb_cy1665);} else {if (M5.equal_p(tmp1681,$rjs_core.UString.make("middle"))!==false) {var if_res919 = true;} else {var if_res919 = M5.equal_p(tmp1681,$rjs_core.UString.make("center"));}if (if_res919!==false) {var if_res922 = M5.values(0,0);} else {if (M5.number_p(y_place1658)!==false) {var local_height1682 = M5.max(ima1659.height,imb1660.height);var local_acy1683 = ima_cy1663-(local_height1682/2);var local_bcy1684 = imb_cy1665-(local_height1682/2);var acy_bcy1685 = δ_edge_y1671-(local_height1682/2);if (M5.positive_p(y_place1658)!==false) {var if_res920 = M5.values(local_acy1683-acy_bcy1685,y_place1658+(local_bcy1684-acy_bcy1685));} else {var if_res920 = M5.values(local_acy1683-y_place1658-acy_bcy1685,local_bcy1684-acy_bcy1685);}var if_res921 = if_res920;} else {var if_res921 = M5.error($rjs_core.UString.make("invalid y-place align"));}var if_res922 = if_res921;}var if_res923 = if_res922;}var if_res924 = if_res923;}var if_res925 = if_res924;}var let_result926 = if_res925;var δ_a_y1679 = let_result926.getAt(0);var δ_b_y1680 = let_result926.getAt(1);this1661.type = $rjs_core.UString.make("overlay");this1661.ima = ima1659;this1661.imb = imb1660;this1661.width = width1666;this1661.height = height1668;this1661.aDx = δ_a_x1672;this1661.aDy = δ_a_y1679;this1661.bDx = δ_b_x1673;this1661.bDy = δ_b_y1680;return null;};Overlay.prototype.render = function(ctx1686, x1687, y1688) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1689 = this;var ima1690 = this1689.ima;var imb1691 = this1689.imb;ctx1686.save();ctx1686.translate(x1687,y1688);imb1691.render(ctx1686,this1689.bDx,this1689.bDy);ima1690.render(ctx1686,this1689.aDx,this1689.aDy);return ctx1686.restore();};var Container = function(childs1692, posns1693, width1694, height1695) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1696 = this;this1696.type = $rjs_core.UString.make("container");this1696.childs = childs1692;this1696.posns = posns1693;this1696.width = width1694;this1696.height = height1695;return null;};Container.prototype.render = function(ctx1697, x1698, y1699) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1700 = this;var width1701 = this1700.width;var height1702 = this1700.height;ctx1697.save();ctx1697.translate(x1698-(width1701/2),y1699-(height1702/2));ctx1697.beginPath();ctx1697.rect(0,0,M5.sub1(width1701),M5.sub1(height1702));ctx1697.clip();var loop1703 = function(childs1704, posns1705) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M5.null_p(childs1704)!==false) {var if_res927 = M5.rvoid();} else {var child1706 = M5.car(childs1704);var posn1707 = M5.car(posns1705);child1706.render(ctx1697,posn_x(posn1707),posn_y(posn1707));var if_res927 = loop1703(M5.cdr(childs1704),M5.cdr(posns1705));}return if_res927;};loop1703(this1700.childs,this1700.posns);return ctx1697.restore();};var Bitmap = function(data1708) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1709 = this;var image1710 = new Image;image1710.src = M6.js_string(data1708);this1709.image = image1710;this1709.width = image1710.width;this1709.height = image1710.height;return null;};Bitmap.prototype.render = function(ctx1711, x1712, y1713) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1714 = this;var image1715 = this1714.image;ctx1711.save();ctx1711.translate(x1712,y1713);ctx1711.drawImage(image1715,M5.__(image1715.width/2),M5.__(image1715.height/2));return ctx1711.restore();};var Freeze = function(img1716) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1717 = this;var canvas1718 = M2.document.createElement("canvas");var ctx1719 = canvas1718.getContext("2d");var width1720 = img1716.width;var height1721 = img1716.height;canvas1718.width = width1720;canvas1718.height = height1721;ctx1719.save();ctx1719.translate(width1720/2,height1721/2);img1716.render(ctx1719,0,0);ctx1719.restore();this1717.width = width1720;this1717.height = height1721;this1717.canvas = canvas1718;return null;};Freeze.prototype.render = function(ctx1722, x1723, y1724) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1725 = this;var width1726 = this1725.width;var height1727 = this1725.height;ctx1722.save();ctx1722.translate(x1723,y1724);ctx1722.drawImage(this1725.canvas,M5.__(width1726/2),M5.__(height1727/2));return ctx1722.restore();};var Rotate = function(image1728, angle1729) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1730 = this;var width1731 = image1728.width;var height1732 = image1728.height;var θ1733 = (M2.Math.PI*angle1729)/180.0;var sin_θ1734 = M5.sin(θ1733);var cos_θ1735 = M5.cos(θ1733);var x11736 = cos_θ1735*width1731;var y11737 = sin_θ1734*width1731;var x21738 = M5.__(sin_θ1734)*height1732;var y21739 = cos_θ1735*height1732;var x31740 = x11736+x21738;var y31741 = y11737+y21739;var min_x1742 = M5.min(0,x11736,x21738,x31740);var max_x1743 = M5.max(0,x11736,x21738,x31740);var min_y1744 = M5.min(0,y11737,y21739,y31741);var max_y1745 = M5.max(0,y11737,y21739,y31741);var rotated_width1746 = M5.floor(max_x1743-min_x1742);var rotated_height1747 = M5.floor(max_y1745-min_y1744);this1730.image = image1728;this1730.width = rotated_width1746;this1730.height = rotated_height1747;this1730.degrees = angle1729;this1730.radians = θ1733;return null;};Rotate.prototype.render = function(ctx1748, x1749, y1750) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1751 = this;ctx1748.save();ctx1748.translate(x1749,y1750);ctx1748.rotate(this1751.radians);this1751.image.render(ctx1748,0,0);return ctx1748.restore();};var Scale = function(image1752, x_factor1753, y_factor1754) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1755 = this;this1755.image = image1752;this1755.x_factor = x_factor1753;this1755.y_factor = y_factor1754;this1755.width = M5.abs(M5.floor(image1752.width*x_factor1753));this1755.height = M5.abs(M5.floor(image1752.height*y_factor1754));return null;};Scale.prototype.render = function(ctx1756, x1757, y1758) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1759 = this;ctx1756.save();ctx1756.translate(x1757,y1758);ctx1756.scale(this1759.x_factor,this1759.y_factor);this1759.image.render(ctx1756,0,0);return ctx1756.restore();};var container = function(childs1760, posns1761, width1762, height1763) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Container(childs1760,posns1761,width1762,height1763);};var place_image = function(child1764, cx1765, cy1766, base1767) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var width1768 = base1767.width;var height1769 = base1767.height;return container(M5.list(base1767,child1764),M5.list(make_posn(width1768/2,height1769/2),make_posn(cx1765,cy1766)),width1768,height1769);};var place_images = function(images1770, posns1771, scene1772) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var width1773 = scene1772.width;var height1774 = scene1772.height;return container(M5.cons(scene1772,images1770),M5.cons(make_posn(width1773/2,height1774/2),posns1771),width1773,height1774);};var __align_image_pos = function(image1775, pos1776, x_place1777, y_place1778) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var x1779 = posn_x(pos1776);var y1780 = posn_y(pos1776);var tmp1782 = x_place1777;if (M5.equal_p(tmp1782,$rjs_core.UString.make("left"))!==false) {var if_res931 = (image1775.width/2)+x1779;} else {if (M5.equal_p(tmp1782,$rjs_core.UString.make("right"))!==false) {var if_res930 = x1779-(image1775.width/2);} else {if (M5.equal_p(tmp1782,$rjs_core.UString.make("center"))!==false) {var if_res928 = true;} else {var if_res928 = M5.equal_p(tmp1782,$rjs_core.UString.make("middle"));}if (if_res928!==false) {var if_res929 = x1779;} else {var if_res929 = M5.rvoid();}var if_res930 = if_res929;}var if_res931 = if_res930;}var new_x1781 = if_res931;var tmp1784 = y_place1778;if (M5.equal_p(tmp1784,$rjs_core.UString.make("top"))!==false) {var if_res935 = (image1775.height/2)+y1780;} else {if (M5.equal_p(tmp1784,$rjs_core.UString.make("bottom"))!==false) {var if_res934 = y1780-(image1775.height/2);} else {if (M5.equal_p(tmp1784,$rjs_core.UString.make("center"))!==false) {var if_res932 = true;} else {var if_res932 = M5.equal_p(tmp1784,$rjs_core.UString.make("middle"));}if (if_res932!==false) {var if_res933 = y1780;} else {var if_res933 = M5.rvoid();}var if_res934 = if_res933;}var if_res935 = if_res934;}var new_y1783 = if_res935;return make_posn(new_x1781,new_y1783);};var place_image_by_align = function(image1785, x1786, y1787, x_place1788, y_place1789, scene1790) {if (arguments.length!==6) {throw $rjs_core.racketContractError("arity mismatch");} else {}var new_pos1791 = __align_image_pos(image1785,make_posn(x1786,y1787),x_place1788,y_place1789);return place_image(image1785,posn_x(new_pos1791),posn_y(new_pos1791),scene1790);};var place_images_by_align = function(images1792, posns1793, x_place1794, y_place1795, scene1796) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var new_posns1797 = M3.map(function(i1798, p1799) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __align_image_pos(i1798,p1799,x_place1794,y_place1795);},images1792,posns1793);return place_images(images1792,new_posns1797,scene1796);};var __single_overlay = function(x_place1800, y_place1801, ima1802, imb1803) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x_place1800,y_place1801,ima1802,imb1803);};var __single_underlay = function(x_place1804, y_place1805, ima1806, imb1807) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x_place1804,y_place1805,imb1807,ima1806);};var overlay_by_align = $rjs_core.attachProcedureArity(function(x_place1808, y_place1809, ima1810, imb1811, ...imn1812936) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1812 = $rjs_core.Pair.listFromArray(imn1812936);return M4.foldl(function(img1813, acc1814) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay(x_place1808,y_place1809,acc1814,img1813);},empty_image,M5.cons(ima1810,M5.cons(imb1811,imn1812)));});var overlay = $rjs_core.attachProcedureArity(function(ima1815, imb1816, ...imn1817937) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1817 = $rjs_core.Pair.listFromArray(imn1817937);return M4.foldl(function(img1818, acc1819) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("middle"),acc1819,img1818);},empty_image,M5.cons(ima1815,M5.cons(imb1816,imn1817)));});var overlay_by_xy = function(ima1820, x1821, y1822, imb1823) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x1821,y1822,ima1820,imb1823);};var underlay = $rjs_core.attachProcedureArity(function(ima1824, imb1825, ...imn1826938) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1826 = $rjs_core.Pair.listFromArray(imn1826938);return M4.foldl(function(img1827, acc1828) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_underlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("middle"),acc1828,img1827);},empty_image,M5.cons(ima1824,M5.cons(imb1825,imn1826)));});var underlay_by_align = $rjs_core.attachProcedureArity(function(x_place1829, y_place1830, ima1831, imb1832, ...imn1833939) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1833 = $rjs_core.Pair.listFromArray(imn1833939);return M4.foldl(function(img1834, acc1835) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_underlay(x_place1829,y_place1830,acc1835,img1834);},empty_image,M5.cons(ima1831,M5.cons(imb1832,imn1833)));});var underlay_by_xy = function(ima1836, x1837, y1838, imb1839) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(M5.__(x1837),M5.__(y1838),imb1839,ima1836);};var above_by_align = $rjs_core.attachProcedureArity(function(x_place1840, i11841, i21842, ...is1843940) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1843 = $rjs_core.Pair.listFromArray(is1843940);return M4.foldl(function(img1844, acc1845) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay(x_place1840,$rjs_core.UString.make("above"),acc1845,img1844);},empty_image,M5.cons(i11841,M5.cons(i21842,is1843)));});var above = $rjs_core.attachProcedureArity(function(i11846, i21847, ...is1848941) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1848 = $rjs_core.Pair.listFromArray(is1848941);return M4.foldl(function(img1849, acc1850) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("above"),acc1850,img1849);},empty_image,M5.cons(i11846,M5.cons(i21847,is1848)));});var beside_by_align = $rjs_core.attachProcedureArity(function(y_place1851, i11852, i21853, ...is1854942) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1854 = $rjs_core.Pair.listFromArray(is1854942);return M4.foldl(function(img1855, acc1856) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("beside"),y_place1851,acc1856,img1855);},empty_image,M5.cons(i11852,M5.cons(i21853,is1854)));});var beside = $rjs_core.attachProcedureArity(function(i11857, i21858, ...is1859943) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1859 = $rjs_core.Pair.listFromArray(is1859943);return M4.foldl(function(img1860, acc1861) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("beside"),$rjs_core.UString.make("middle"),acc1861,img1860);},empty_image,M5.cons(i11857,M5.cons(i21858,is1859)));});var rotate = function(angle1862, image1863) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rotate(image1863,M5.__(angle1862));};var scale = function(factor1864, image1865) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1865,factor1864,factor1864);};var flip_horizontal = function(image1866) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1866,-1,1);};var flip_vertical = function(image1867) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1867,1,-1);};var bitmap_by_data = function(data1868) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Bitmap(data1868);};var frame = function(img1869) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return color_frame($rjs_core.UString.make("black"),img1869);};var color_frame = function(color1870, img1871) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return overlay(rectangle(image_width(img1871),image_height(img1871),$rjs_core.Symbol.make("outline"),color1870),img1871);};var freeze = function(img1872) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Freeze(img1872);};var __rjs_quoted__ = {};__rjs_quoted__.empty_image = empty_image;__rjs_quoted__.struct_posn = struct_posn;__rjs_quoted__.___gt_web_color = ___gt_web_color;__rjs_quoted__.posn_y = posn_y;__rjs_quoted__.posn_x = posn_x;__rjs_quoted__.posn_p = posn_p;__rjs_quoted__.make_posn = make_posn;export { __rjs_quoted__,posn_x,posn_y,posn_p,make_posn,struct_posn,print_image,freeze,bitmap_by_data,flip_horizontal,flip_vertical,scale,rotate,beside,beside_by_align,above,above_by_align,underlay_by_xy,underlay,overlay,overlay_by_xy,overlay_by_align,place_images_by_align,place_image_by_align,place_images,place_image,color_frame,frame,triangle,text_by_font,text,circle,square,rectangle,line,image_width,image_height,empty_scene,empty_image };