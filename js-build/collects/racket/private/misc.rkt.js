import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/main.rkt.js";import * as M2 from "./path.rkt.js";var check20 = function(x23) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.real_p(x23)!==false) {var if_res3 = M0.rvoid();} else {var if_res3 = M0.raise_argument_error($rjs_core.Symbol.make("rationalize"),$rjs_core.UString.make("real?"),x23);}return if_res3;};var find_between21 = function(lo24, hi25) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.integer_p(lo24)!==false) {var if_res5 = lo24;} else {var lo_int26 = M0.floor(lo24);var hi_int27 = M0.floor(hi25);if (M0.__lt_(lo_int26,hi_int27)!==false) {var if_res4 = M0.add1(lo_int26);} else {var if_res4 = lo_int26+(1/find_between21(1/(hi25-lo_int26),1/(lo24-lo_int26)));}var if_res5 = if_res4;}return if_res5;};var do_find_between22 = function(lo28, hi29) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.negative_p(lo28)!==false) {var if_res6 = M0.__(find_between21(M0.__(hi29),M0.__(lo28)));} else {var if_res6 = find_between21(lo28,hi29);}return if_res6;};var rationalize = function(x30, within31) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}check20(x30);check20(within31);var delta32 = M0.abs(within31);var lo33 = x30-delta32;var hi34 = x30+delta32;if (M0.equal_p(x30,NaN)!==false) {var if_res16 = x30;} else {var or_part35 = M0.equal_p(x30,Infinity);if (or_part35!==false) {var if_res7 = or_part35;} else {var if_res7 = M0.equal_p(x30,-Infinity);}if (if_res7!==false) {if (M0.equal_p(delta32,Infinity)!==false) {var if_res8 = NaN;} else {var if_res8 = x30;}var if_res15 = if_res8;} else {if (M0.equal_p(delta32,Infinity)!==false) {var if_res14 = 0.0;} else {if (M0.not(M0.__eq_(x30,x30))!==false) {var if_res13 = NaN;} else {if (M0.__lt__eq_(lo33,0,hi34)!==false) {if (M0.exact_p(x30)!==false) {var if_res9 = 0;} else {var if_res9 = 0.0;}var if_res12 = if_res9;} else {var or_part36 = M0.__rjs_quoted__.inexact_p(lo33);if (or_part36!==false) {var if_res10 = or_part36;} else {var if_res10 = M0.__rjs_quoted__.inexact_p(hi34);}if (if_res10!==false) {var if_res11 = M0.exact__gt_inexact(do_find_between22(M0.inexact__gt_exact(lo33),M0.inexact__gt_exact(hi34)));} else {var if_res11 = do_find_between22(lo33,hi34);}var if_res12 = if_res11;}var if_res13 = if_res12;}var if_res14 = if_res13;}var if_res15 = if_res14;}var if_res16 = if_res15;}return if_res16;};var load_by_cd = function(n37) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.path_string_p(n37)!==false) {var if_res17 = M0.rvoid();} else {var if_res17 = M0.raise_argument_error($rjs_core.Symbol.make("load/cd"),$rjs_core.UString.make("path-string?"),n37);}if_res17;var let_result18 = M0.__rjs_quoted__.split_path(n37);var base38 = let_result18.getAt(0);var name39 = let_result18.getAt(1);var dir_p40 = let_result18.getAt(2);if (dir_p40!==false) {var if_res21 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: cannot open a directory: ~s"),n37)),M0.current_continuation_marks()));} else {if (M0.not(M0.path_p(base38))!==false) {var if_res20 = M1.__rjs_quoted__.load(n37);} else {if (M0.not(M0.__rjs_quoted__.directory_exists_p(base38))!==false) {var if_res19 = M0.raise(M0.__rjs_quoted__.exn_fail_filesystem(M0.string__gt_immutable_string(M0.format($rjs_core.UString.make("load/cd: directory of ~s does not exist (current directory is ~s)"),n37,M0.__rjs_quoted__.current_directory())),M0.current_continuation_marks()));} else {var if_res19 = M0.rvoid();}if_res19;var orig41 = M0.__rjs_quoted__.current_directory();var if_res20 = M0.dynamic_wind(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(base38);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.__rjs_quoted__.load(name39);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.current_directory(orig41);});}var if_res21 = if_res20;}return if_res21;};var __load = function(load42, name43, path44) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.path_string_p(path44)!==false) {var if_res22 = M0.rvoid();} else {var if_res22 = M0.raise_argument_error(name43,$rjs_core.UString.make("path-string?"),path44);}if_res22;if (M0.__rjs_quoted__.complete_path_p(path44)!==false) {var if_res24 = load42(path44);} else {var dir45 = M0.__rjs_quoted__.current_load_relative_directory();if (dir45!==false) {var if_res23 = M0.__rjs_quoted__.path__gt_complete_path(path44,dir45);} else {var if_res23 = path44;}var if_res24 = load42(if_res23);}return if_res24;};var load_relative = function(path46) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M1.__rjs_quoted__.load,$rjs_core.Symbol.make("load-relative"),path46);};var load_relative_extension = function(path47) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M1.__rjs_quoted__.load_extension,$rjs_core.Symbol.make("load-relative-extension"),path47);};var let_result25 = M0.make_struct_type($rjs_core.Symbol.make("evt"),false,1,0,false,M0.list(M0.cons(M0.prop_evt,0)),M0.current_inspector(),false,$rjs_core.Pair.makeList(0));var struct_guard = let_result25.getAt(0);var make_guard = let_result25.getAt(1);var guard_p = let_result25.getAt(2);var guard_ref = let_result25.getAt(3);var guard_set_bang_ = let_result25.getAt(4);var guard_evt = function(proc48) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc48)!==false) {var if_res26 = M0.procedure_arity_includes_p(proc48,0);} else {var if_res26 = false;}if (if_res26!==false) {var if_res27 = M0.rvoid();} else {var if_res27 = M0.raise_argument_error($rjs_core.Symbol.make("guard-evt"),$rjs_core.UString.make("(any/c . -> . evt?)"),proc48);}if_res27;return make_guard(function(self49) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return proc48();});};var channel_get = function(ch50) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch50)!==false) {var if_res28 = M0.rvoid();} else {var if_res28 = M0.raise_argument_error($rjs_core.Symbol.make("channel-get"),$rjs_core.UString.make("channel?"),ch50);}if_res28;return M0.__rjs_quoted__.sync(ch50);};var channel_try_get = function(ch51) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch51)!==false) {var if_res29 = M0.rvoid();} else {var if_res29 = M0.raise_argument_error($rjs_core.Symbol.make("channel-try-get"),$rjs_core.UString.make("channel?"),ch51);}if_res29;return M0.__rjs_quoted__.sync_by_timeout(0,ch51);};var channel_put = function(ch52, val53) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.channel_p(ch52)!==false) {var if_res30 = M0.rvoid();} else {var if_res30 = M0.raise_argument_error($rjs_core.Symbol.make("channel-put"),$rjs_core.UString.make("channel?"),ch52);}if_res30;if (M0.__rjs_quoted__.sync(M0.__rjs_quoted__.channel_put_evt(ch52,val53))!==false) {var if_res31 = M0.rvoid();} else {var if_res31 = false;}return if_res31;};var port_p = function(x54) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part55 = M0.input_port_p(x54);if (or_part55!==false) {var if_res32 = or_part55;} else {var if_res32 = M0.output_port_p(x54);}return if_res32;};var cl33 = function(v56) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return writeln(v56,M0.current_output_port());};var cl34 = function(v57, p58) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p58)!==false) {var if_res36 = M0.rvoid();} else {var if_res36 = M0.raise_argument_error($rjs_core.Symbol.make("writeln"),$rjs_core.UString.make("output-port?"),1,v57,p58);}if_res36;M0.write(v57,p58);return M0.newline(p58);};var writeln = $rjs_core.attachProcedureArity(function() {var fixed_lam35 = {'1':cl33,'2':cl34}[arguments.length];if (fixed_lam35!==undefined) {return fixed_lam35.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl37 = function(v59) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return displayln(v59,M0.current_output_port());};var cl38 = function(v60, p61) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p61)!==false) {var if_res40 = M0.rvoid();} else {var if_res40 = M0.raise_argument_error($rjs_core.Symbol.make("displayln"),$rjs_core.UString.make("output-port?"),1,v60,p61);}if_res40;M0.display(v60,p61);return M0.newline(p61);};var displayln = $rjs_core.attachProcedureArity(function() {var fixed_lam39 = {'1':cl37,'2':cl38}[arguments.length];if (fixed_lam39!==undefined) {return fixed_lam39.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl41 = function(v62) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v62,M0.current_output_port(),0);};var cl42 = function(v63, p64) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v63,p64,0);};var cl43 = function(v65, p66, d67) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.output_port_p(p66)!==false) {var if_res45 = M0.rvoid();} else {var if_res45 = M0.raise_argument_error($rjs_core.Symbol.make("println"),$rjs_core.UString.make("output-port?"),1,v65,p66,d67);}if_res45;if (M0.number_p(d67)!==false) {var or_part68 = M0.__eq_(0,d67);if (or_part68!==false) {var if_res46 = or_part68;} else {var if_res46 = M0.__eq_(d67,1);}var if_res47 = if_res46;} else {var if_res47 = false;}if (if_res47!==false) {var if_res48 = M0.rvoid();} else {var if_res48 = M0.raise_argument_error($rjs_core.Symbol.make("println"),$rjs_core.UString.make("(or/c 0 1)"),2,v65,p66,d67);}if_res48;M0.print(v65,p66,d67);return M0.newline(p66);};var println = $rjs_core.attachProcedureArity(function() {var fixed_lam44 = {'1':cl41,'2':cl42,'3':cl43}[arguments.length];if (fixed_lam44!==undefined) {return fixed_lam44.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3]);var string_no_nuls_p = function(s69) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s69)!==false) {var if_res49 = M0.not(M0.__rjs_quoted__.regexp_match_p("/\u0000/",s69));} else {var if_res49 = false;}return if_res49;};var bytes_environment_variable_name_p = function(s70) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.bytes_p(s70)!==false) {if (M0.eq_p($rjs_core.Symbol.make("windows"),M0.system_type())!==false) {var if_res50 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]+$/",s70);} else {var if_res50 = M0.__rjs_quoted__.regexp_match_p("/^[^\u0000=]*$/",s70);}var if_res51 = if_res50;} else {var if_res51 = false;}return if_res51;};var string_environment_variable_name_p = function(s71) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(s71)!==false) {var if_res52 = bytes_environment_variable_name_p(M0.__rjs_quoted__.string__gt_bytes_by_locale(s71,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));} else {var if_res52 = false;}return if_res52;};var getenv = function(s72) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_environment_variable_name_p(s72)!==false) {var if_res53 = M0.rvoid();} else {var if_res53 = M0.raise_argument_error($rjs_core.Symbol.make("getenv"),$rjs_core.UString.make("string-environment-variable-name?"),s72);}if_res53;var v73 = M0.environment_variables_ref(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s72,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));if (v73!==false) {var if_res54 = M0.__rjs_quoted__.bytes__gt_string_by_locale(v73,$rjs_core.Char.charFromCodepoint(63));} else {var if_res54 = false;}return if_res54;};var putenv = function(s74, t75) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_no_nuls_p(s74)!==false) {var if_res55 = M0.rvoid();} else {var if_res55 = M0.raise_argument_error($rjs_core.Symbol.make("putenv"),$rjs_core.UString.make("string-environment-variable-name?"),0,s74,t75);}if_res55;if (string_no_nuls_p(t75)!==false) {var if_res56 = M0.rvoid();} else {var if_res56 = M0.raise_argument_error($rjs_core.Symbol.make("putenv"),$rjs_core.UString.make("string-no-nuls?"),1,s74,t75);}if_res56;if (M0.environment_variables_set_bang_(M0.current_environment_variables(),M0.__rjs_quoted__.string__gt_bytes_by_locale(s74,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),M0.__rjs_quoted__.string__gt_bytes_by_locale(t75,M0.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return false;})!==false) {var if_res57 = true;} else {var if_res57 = false;}return if_res57;};var __rjs_quoted__ = {};export { __rjs_quoted__,putenv,getenv,string_environment_variable_name_p,bytes_environment_variable_name_p,println,displayln,writeln,port_p,channel_put,channel_try_get,channel_get,guard_evt,load_relative_extension,load_relative,load_by_cd,rationalize };