import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/paramz.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.continuation_mark_set_first(false,M1.parameterization_key);};var call_with_parameterization = function(paramz3523, thunk3524) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.parameterization_p(paramz3523)!==false) {var if_res2271 = M0.rvoid();} else {var if_res2271 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz3523,thunk3524);}if_res2271;if (M0.procedure_p(thunk3524)!==false) {var if_res2272 = M0.procedure_arity_includes_p(thunk3524,0);} else {var if_res2272 = false;}if (if_res2272!==false) {var if_res2273 = M0.rvoid();} else {var if_res2273 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3523,thunk3524);}if_res2273;var __context2274 = $rjs_core.Marks.getFrames();var __context2275;try {__context2275 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.parameterization_key,paramz3523);var __wcm_result2276 = thunk3524();} finally {$rjs_core.Marks.updateFrame(__context2274,__context2275);}return __wcm_result2276;};var let_result2278 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result2278.getAt(0);var make_break_paramz = let_result2278.getAt(1);var break_paramz_p = let_result2278.getAt(2);var break_paramz_ref = let_result2278.getAt(3);var break_paramz_set_bang_ = let_result2278.getAt(4);var let_result2279 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false,M0.rnull,M0.current_inspector());var type3525 = let_result2279.getAt(0);var maker3526 = let_result2279.getAt(1);var pred3527 = let_result2279.getAt(2);var access3528 = let_result2279.getAt(3);var mutate3529 = let_result2279.getAt(4);var let_result2280 = M0.values(type3525,maker3526,pred3527,M0.make_struct_field_accessor(access3528,0,$rjs_core.Symbol.make("cell")),M0.make_struct_field_mutator(mutate3529,0,$rjs_core.Symbol.make("cell")));var struct_break_parameterization = let_result2280.getAt(0);var make_break_parameterization = let_result2280.getAt(1);var break_parameterization_p = let_result2280.getAt(2);var break_parameterization_cell = let_result2280.getAt(3);var set_break_parameterization_cell_bang_ = let_result2280.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M0.continuation_mark_set_first(false,M1.break_enabled_key));};var call_with_break_parameterization = function(paramz3530, thunk3531) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz3530)!==false) {var if_res2281 = M0.rvoid();} else {var if_res2281 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz3530,thunk3531);}if_res2281;if (M0.procedure_p(thunk3531)!==false) {var if_res2282 = M0.procedure_arity_includes_p(thunk3531,0);} else {var if_res2282 = false;}if (if_res2282!==false) {var if_res2283 = M0.rvoid();} else {var if_res2283 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3530,thunk3531);}if_res2283;var __context2285 = $rjs_core.Marks.getFrames();var __context2286;try {__context2286 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,break_paramz_ref(paramz3530,0));M1.check_for_break();var __wcm_result2287 = thunk3531();} finally {$rjs_core.Marks.updateFrame(__context2285,__context2286);}var begin_res2284 = __wcm_result2287;M1.check_for_break();return begin_res2284;};var select_handler_by_no_breaks = function(e3532, bpz3533, l3534) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2296 = $rjs_core.Marks.getFrames();var __context2297;try {__context2297 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,M0.make_thread_cell(false));var loop3535 = function(l3536) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3536)!==false) {var if_res2295 = M0.raise(e3532);} else {if (M0.caar(l3536)(e3532)!==false) {var begin_res2289 = M0.cdar(l3536)(e3532);var __context2290 = $rjs_core.Marks.getFrames();var __context2291;try {__context2291 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3533);var __wcm_result2292 = M1.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context2290,__context2291);}__wcm_result2292;var if_res2294 = begin_res2289;} else {var if_res2294 = loop3535(M0.cdr(l3536));}var if_res2295 = if_res2294;}return if_res2295;};var __wcm_result2298 = loop3535(l3534);} finally {$rjs_core.Marks.updateFrame(__context2296,__context2297);}return __wcm_result2298;};var select_handler_by_breaks_as_is = function(e3537, bpz3538, l3539) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3539)!==false) {var if_res2305 = M0.raise(e3537);} else {if (M0.caar(l3539)(e3537)!==false) {var __context2300 = $rjs_core.Marks.getFrames();var __context2301;try {__context2301 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3538);M1.check_for_break();var __wcm_result2302 = M0.cdar(l3539)(e3537);} finally {$rjs_core.Marks.updateFrame(__context2300,__context2301);}var if_res2304 = __wcm_result2302;} else {var if_res2304 = select_handler_by_breaks_as_is(e3537,bpz3538,M0.cdr(l3539));}var if_res2305 = if_res2304;}return if_res2305;};var false_thread_cell = M0.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key3540) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key3540)!==false) {var if_res2306 = M0.rvoid();} else {var if_res2306 = M0.error($rjs_core.Symbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res2306;};var handler_prompt_key = M0.make_continuation_prompt_tag($rjs_core.Symbol.make("handler-prompt-tag"));var call_handled_body = function(bpz3541, handle_proc3542, body_thunk3543) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2315 = $rjs_core.Marks.getFrames();var __context2316;try {__context2316 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,false_thread_cell);var __wcm_result2317 = M0.call_with_continuation_prompt(function(bpz3544, body_thunk3545) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2311 = $rjs_core.Marks.getFrames();var __context2312;try {__context2312 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3544);var __context2307 = $rjs_core.Marks.getFrames();var __context2308;try {__context2308 = __context2307;$rjs_core.Marks.setMark(M1.exception_handler_key,function(e3546) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.abort_current_continuation(handler_prompt_key,e3546);});var __wcm_result2309 = body_thunk3545();} finally {$rjs_core.Marks.updateFrame(__context2307,__context2308);}var __wcm_result2313 = __wcm_result2309;} finally {$rjs_core.Marks.updateFrame(__context2311,__context2312);}return __wcm_result2313;},handler_prompt_key,handle_proc3542,bpz3541,body_thunk3543);} finally {$rjs_core.Marks.updateFrame(__context2315,__context2316);}return __wcm_result2317;};var call_with_exception_handler = function(exnh3547, thunk3548) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2320 = $rjs_core.Marks.getFrames();var __context2321;try {__context2321 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.exception_handler_key,exnh3547);var __wcm_result2322 = thunk3548();} finally {$rjs_core.Marks.updateFrame(__context2320,__context2321);}var begin_res2319 = __wcm_result2322;M0.rvoid();return begin_res2319;};var call_by_cc = M0.__rjs_quoted__.call_with_current_continuation;var not_there = M0.gensym();var do_hash_update = function(who3549, mut_p3550, set3551, ht3552, key3553, xform3554, default3555) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.variable_reference_from_unsafe_p($rjs_core.Symbol.make("#%variable-reference"))!==false) {var if_res2330 = M0.rvoid();} else {if (M0.hash_p(ht3552)!==false) {if (mut_p3550!==false) {var if_res2324 = M0.not(M0.immutable_p(ht3552));} else {var if_res2324 = M0.immutable_p(ht3552);}var if_res2325 = if_res2324;} else {var if_res2325 = false;}if (if_res2325!==false) {var if_res2327 = M0.rvoid();} else {if (mut_p3550!==false) {var if_res2326 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res2326 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res2327 = M0.raise_argument_error(who3549,if_res2326,ht3552);}if_res2327;if (M0.procedure_p(xform3554)!==false) {var if_res2328 = M0.procedure_arity_includes_p(xform3554,1);} else {var if_res2328 = false;}if (if_res2328!==false) {var if_res2329 = M0.rvoid();} else {var if_res2329 = M0.raise_argument_error(who3549,$rjs_core.UString.make("(any/c . -> . any/c)"),xform3554);}var if_res2330 = if_res2329;}if_res2330;var v3556 = M0.hash_ref(ht3552,key3553,default3555);if (M0.eq_p(v3556,not_there)!==false) {var if_res2331 = M0.raise_mismatch_error(who3549,$rjs_core.UString.make("no value found for key: "),key3553);} else {var if_res2331 = set3551(ht3552,key3553,xform3554(v3556));}return if_res2331;};var cl2332 = function(ht3557, key3558, xform3559, default3560) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update"),false,M0.hash_set,ht3557,key3558,xform3559,default3560);};var cl2333 = function(ht3561, key3562, xform3563) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht3561,key3562,xform3563,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam2334 = {'4':cl2332,'3':cl2333}[arguments.length];if (fixed_lam2334!==undefined) {return fixed_lam2334.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl2335 = function(ht3564, key3565, xform3566, default3567) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update!"),true,M0.hash_set_bang_,ht3564,key3565,xform3566,default3567);};var cl2336 = function(ht3568, key3569, xform3570) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht3568,key3569,xform3570,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam2337 = {'4':cl2335,'3':cl2336}[arguments.length];if (fixed_lam2337!==undefined) {return fixed_lam2337.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht3571, key3572) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3571)!==false) {var if_res2338 = M0.rvoid();} else {var if_res2338 = M0.raise_argument_error($rjs_core.Symbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht3571,key3572);}if_res2338;return M0.not(M0.eq_p(not_there,M0.hash_ref(ht3571,key3572,not_there)));};var hash_ref_bang_ = function(ht3573, key3574, new3575) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3573)!==false) {var if_res2339 = M0.not(M0.immutable_p(ht3573));} else {var if_res2339 = false;}if (if_res2339!==false) {var if_res2340 = M0.rvoid();} else {var if_res2340 = M0.raise_argument_error($rjs_core.Symbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht3573,key3574,new3575);}if_res2340;var v3576 = M0.hash_ref(ht3573,key3574,not_there);if (M0.eq_p(not_there,v3576)!==false) {if (M0.procedure_p(new3575)!==false) {var if_res2341 = new3575();} else {var if_res2341 = new3575;}var n3577 = if_res2341;M0.hash_set_bang_(ht3573,key3574,n3577);var if_res2342 = n3577;} else {var if_res2342 = v3576;}return if_res2342;};var __rjs_quoted__ = {};__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };