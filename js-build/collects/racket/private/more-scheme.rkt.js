import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/paramz.rkt.js";import * as M1 from "../../../runtime/kernel.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.continuation_mark_set_first(false,M0.parameterization_key);};var call_with_parameterization = function(paramz2541, thunk2542) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.__rjs_quoted__.parameterization_p(paramz2541)!==false) {var if_res1588 = M1.rvoid();} else {var if_res1588 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz2541,thunk2542);}if_res1588;if (M1.procedure_p(thunk2542)!==false) {var if_res1589 = M1.procedure_arity_includes_p(thunk2542,0);} else {var if_res1589 = false;}if (if_res1589!==false) {var if_res1590 = M1.rvoid();} else {var if_res1590 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz2541,thunk2542);}if_res1590;var __context1591 = $rjs_core.Marks.getFrames();var __context1592;try {__context1592 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.parameterization_key,paramz2541);var __wcm_result1593 = thunk2542();} finally {$rjs_core.Marks.updateFrame(__context1591,__context1592);}return __wcm_result1593;};var let_result1595 = M1.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result1595.getAt(0);var make_break_paramz = let_result1595.getAt(1);var break_paramz_p = let_result1595.getAt(2);var break_paramz_ref = let_result1595.getAt(3);var break_paramz_set_bang_ = let_result1595.getAt(4);var let_result1596 = M1.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false,M1.rnull,M1.current_inspector());var type2543 = let_result1596.getAt(0);var maker2544 = let_result1596.getAt(1);var pred2545 = let_result1596.getAt(2);var access2546 = let_result1596.getAt(3);var mutate2547 = let_result1596.getAt(4);var let_result1597 = M1.values(type2543,maker2544,pred2545,M1.make_struct_field_accessor(access2546,0,$rjs_core.Symbol.make("cell")),M1.make_struct_field_mutator(mutate2547,0,$rjs_core.Symbol.make("cell")));var struct_break_parameterization = let_result1597.getAt(0);var make_break_parameterization = let_result1597.getAt(1);var break_parameterization_p = let_result1597.getAt(2);var break_parameterization_cell = let_result1597.getAt(3);var set_break_parameterization_cell_bang_ = let_result1597.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M1.continuation_mark_set_first(false,M0.break_enabled_key));};var call_with_break_parameterization = function(paramz2548, thunk2549) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz2548)!==false) {var if_res1598 = M1.rvoid();} else {var if_res1598 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz2548,thunk2549);}if_res1598;if (M1.procedure_p(thunk2549)!==false) {var if_res1599 = M1.procedure_arity_includes_p(thunk2549,0);} else {var if_res1599 = false;}if (if_res1599!==false) {var if_res1600 = M1.rvoid();} else {var if_res1600 = M1.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz2548,thunk2549);}if_res1600;var __context1602 = $rjs_core.Marks.getFrames();var __context1603;try {__context1603 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,break_paramz_ref(paramz2548,0));M0.check_for_break();var __wcm_result1604 = thunk2549();} finally {$rjs_core.Marks.updateFrame(__context1602,__context1603);}var begin_res1601 = __wcm_result1604;M0.check_for_break();return begin_res1601;};var select_handler_by_no_breaks = function(e2550, bpz2551, l2552) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1613 = $rjs_core.Marks.getFrames();var __context1614;try {__context1614 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,M1.make_thread_cell(false));var loop2553 = function(l2554) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.null_p(l2554)!==false) {var if_res1612 = M1.raise(e2550);} else {if (M1.caar(l2554)(e2550)!==false) {var begin_res1606 = M1.cdar(l2554)(e2550);var __context1607 = $rjs_core.Marks.getFrames();var __context1608;try {__context1608 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,bpz2551);var __wcm_result1609 = M0.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context1607,__context1608);}__wcm_result1609;var if_res1611 = begin_res1606;} else {var if_res1611 = loop2553(M1.cdr(l2554));}var if_res1612 = if_res1611;}return if_res1612;};var __wcm_result1615 = loop2553(l2552);} finally {$rjs_core.Marks.updateFrame(__context1613,__context1614);}return __wcm_result1615;};var select_handler_by_breaks_as_is = function(e2555, bpz2556, l2557) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.null_p(l2557)!==false) {var if_res1622 = M1.raise(e2555);} else {if (M1.caar(l2557)(e2555)!==false) {var __context1617 = $rjs_core.Marks.getFrames();var __context1618;try {__context1618 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,bpz2556);M0.check_for_break();var __wcm_result1619 = M1.cdar(l2557)(e2555);} finally {$rjs_core.Marks.updateFrame(__context1617,__context1618);}var if_res1621 = __wcm_result1619;} else {var if_res1621 = select_handler_by_breaks_as_is(e2555,bpz2556,M1.cdr(l2557));}var if_res1622 = if_res1621;}return if_res1622;};var false_thread_cell = M1.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key2558) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key2558)!==false) {var if_res1623 = M1.rvoid();} else {var if_res1623 = M1.error($rjs_core.Symbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res1623;};var handler_prompt_key = M1.make_continuation_prompt_tag($rjs_core.Symbol.make("handler-prompt-tag"));var call_handled_body = function(bpz2559, handle_proc2560, body_thunk2561) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1632 = $rjs_core.Marks.getFrames();var __context1633;try {__context1633 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,false_thread_cell);var __wcm_result1634 = M1.call_with_continuation_prompt(function(bpz2562, body_thunk2563) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1628 = $rjs_core.Marks.getFrames();var __context1629;try {__context1629 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.break_enabled_key,bpz2562);var __context1624 = $rjs_core.Marks.getFrames();var __context1625;try {__context1625 = __context1624;$rjs_core.Marks.setMark(M0.exception_handler_key,function(e2564) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.abort_current_continuation(handler_prompt_key,e2564);});var __wcm_result1626 = body_thunk2563();} finally {$rjs_core.Marks.updateFrame(__context1624,__context1625);}var __wcm_result1630 = __wcm_result1626;} finally {$rjs_core.Marks.updateFrame(__context1628,__context1629);}return __wcm_result1630;},handler_prompt_key,handle_proc2560,bpz2559,body_thunk2561);} finally {$rjs_core.Marks.updateFrame(__context1632,__context1633);}return __wcm_result1634;};var call_with_exception_handler = function(exnh2565, thunk2566) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1637 = $rjs_core.Marks.getFrames();var __context1638;try {__context1638 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M0.exception_handler_key,exnh2565);var __wcm_result1639 = thunk2566();} finally {$rjs_core.Marks.updateFrame(__context1637,__context1638);}var begin_res1636 = __wcm_result1639;M1.rvoid();return begin_res1636;};var call_by_cc = M1.__rjs_quoted__.call_with_current_continuation;var not_there = M1.gensym();var do_hash_update = function(who2567, mut_p2568, set2569, ht2570, key2571, xform2572, default2573) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.variable_reference_from_unsafe_p($rjs_core.Symbol.make("#%variable-reference"))!==false) {var if_res1647 = M1.rvoid();} else {if (M1.hash_p(ht2570)!==false) {if (mut_p2568!==false) {var if_res1641 = M1.not(M1.immutable_p(ht2570));} else {var if_res1641 = M1.immutable_p(ht2570);}var if_res1642 = if_res1641;} else {var if_res1642 = false;}if (if_res1642!==false) {var if_res1644 = M1.rvoid();} else {if (mut_p2568!==false) {var if_res1643 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res1643 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res1644 = M1.raise_argument_error(who2567,if_res1643,ht2570);}if_res1644;if (M1.procedure_p(xform2572)!==false) {var if_res1645 = M1.procedure_arity_includes_p(xform2572,1);} else {var if_res1645 = false;}if (if_res1645!==false) {var if_res1646 = M1.rvoid();} else {var if_res1646 = M1.raise_argument_error(who2567,$rjs_core.UString.make("(any/c . -> . any/c)"),xform2572);}var if_res1647 = if_res1646;}if_res1647;var v2574 = M1.hash_ref(ht2570,key2571,default2573);if (M1.eq_p(v2574,not_there)!==false) {var if_res1648 = M1.raise_mismatch_error(who2567,$rjs_core.UString.make("no value found for key: "),key2571);} else {var if_res1648 = set2569(ht2570,key2571,xform2572(v2574));}return if_res1648;};var cl1649 = function(ht2575, key2576, xform2577, default2578) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update"),false,M1.hash_set,ht2575,key2576,xform2577,default2578);};var cl1650 = function(ht2579, key2580, xform2581) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht2579,key2580,xform2581,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam1651 = {'4':cl1649,'3':cl1650}[arguments.length];if (fixed_lam1651!==undefined) {return fixed_lam1651.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl1652 = function(ht2582, key2583, xform2584, default2585) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update!"),true,M1.hash_set_bang_,ht2582,key2583,xform2584,default2585);};var cl1653 = function(ht2586, key2587, xform2588) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht2586,key2587,xform2588,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam1654 = {'4':cl1652,'3':cl1653}[arguments.length];if (fixed_lam1654!==undefined) {return fixed_lam1654.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht2589, key2590) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.hash_p(ht2589)!==false) {var if_res1655 = M1.rvoid();} else {var if_res1655 = M1.raise_argument_error($rjs_core.Symbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht2589,key2590);}if_res1655;return M1.not(M1.eq_p(not_there,M1.hash_ref(ht2589,key2590,not_there)));};var hash_ref_bang_ = function(ht2591, key2592, new2593) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.hash_p(ht2591)!==false) {var if_res1656 = M1.not(M1.immutable_p(ht2591));} else {var if_res1656 = false;}if (if_res1656!==false) {var if_res1657 = M1.rvoid();} else {var if_res1657 = M1.raise_argument_error($rjs_core.Symbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht2591,key2592,new2593);}if_res1657;var v2594 = M1.hash_ref(ht2591,key2592,not_there);if (M1.eq_p(not_there,v2594)!==false) {if (M1.procedure_p(new2593)!==false) {var if_res1658 = new2593();} else {var if_res1658 = new2593;}var n2595 = if_res1658;M1.hash_set_bang_(ht2591,key2592,n2595);var if_res1659 = n2595;} else {var if_res1659 = v2594;}return if_res1659;};var __rjs_quoted__ = {};__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };