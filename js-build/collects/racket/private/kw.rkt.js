import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/unsafe.rkt.js";var let_result1411 = M0.make_struct_type_property($rjs_core.Symbol.make("keyword-impersonator"));var prop_keyword_impersonator = let_result1411.getAt(0);var keyword_impersonator_p = let_result1411.getAt(1);var keyword_impersonator_ref = let_result1411.getAt(2);var keyword_procedure_impersonator_of = function(v2436) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_impersonator_p(v2436)!==false) {var if_res1412 = keyword_impersonator_ref(v2436)(v2436);} else {var if_res1412 = false;}return if_res1412;};var let_result1413 = M0.make_struct_type($rjs_core.Symbol.make("keyword-procedure"),false,4,0,false,M0.list(M0.cons(M0.prop_checked_procedure,true),M0.cons(M0.prop_impersonator_of,keyword_procedure_impersonator_of)),M0.current_inspector(),false,$rjs_core.Pair.makeList(0,1,2,3));var struct_keyword_procedure = let_result1413.getAt(0);var mk_kw_proc = let_result1413.getAt(1);var keyword_procedure_p = let_result1413.getAt(2);var keyword_procedure_ref = let_result1413.getAt(3);var keyword_procedure_set_bang_ = let_result1413.getAt(4);var keyword_procedure_checker = M0.make_struct_field_accessor(keyword_procedure_ref,0);var keyword_procedure_proc = M0.make_struct_field_accessor(keyword_procedure_ref,1);var keyword_procedure_required = M0.make_struct_field_accessor(keyword_procedure_ref,2);var keyword_procedure_allowed = M0.make_struct_field_accessor(keyword_procedure_ref,3);var let_result1414 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,0,0,false,M0.list(M0.cons(M0.prop_method_arity_error,true)));var struct_keyword_method = let_result1414.getAt(0);var make_km = let_result1414.getAt(1);var keyword_method_p = let_result1414.getAt(2);var km_ref = let_result1414.getAt(3);var km_set_bang_ = let_result1414.getAt(4);var generate_arity_string = function(proc2437) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result1415 = procedure_keywords(proc2437);var req2438 = let_result1415.getAt(0);var allowed2439 = let_result1415.getAt(1);var a2440 = M0.procedure_arity(proc2437);var keywords_desc2441 = function(opt2443, req2444) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var temp1421 = $rjs_core.UString.make("~a with keyword~a~a");if (M0.null_p(M0.cdr(req2444))!==false) {var if_res1420 = M0.format($rjs_core.UString.make("an ~aargument"),opt2443);} else {var if_res1420 = M0.format($rjs_core.UString.make("~aarguments"),opt2443);}if (M0.null_p(M0.cdr(req2444))!==false) {var if_res1419 = $rjs_core.UString.make("");} else {var if_res1419 = $rjs_core.UString.make("s");}var tmp2445 = M0.length(req2444);if (M0.equal_p(tmp2445,1)!==false) {var if_res1418 = M0.format($rjs_core.UString.make(" ~a"),M0.car(req2444));} else {if (M0.equal_p(tmp2445,2)!==false) {var if_res1417 = M0.format($rjs_core.UString.make(" ~a and ~a"),M0.car(req2444),M0.cadr(req2444));} else {var loop2446 = function(req2447) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(M0.cdr(req2447))!==false) {var if_res1416 = M0.format($rjs_core.UString.make(" and ~a"),M0.car(req2447));} else {var if_res1416 = M0.format($rjs_core.UString.make(" ~a,~a"),M0.car(req2447),loop2446(M0.cdr(req2447)));}return if_res1416;};var if_res1417 = loop2446(req2444);}var if_res1418 = if_res1417;}return M0.format(temp1421,if_res1420,if_res1419,if_res1418);};var method_adjust2442 = function(a2448) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part2449 = okm_p(proc2437);if (or_part2449!==false) {var if_res1422 = or_part2449;} else {var if_res1422 = keyword_method_p(proc2437);}if (if_res1422!==false) {if (M0.zero_p(a2448)!==false) {var if_res1423 = 0;} else {var if_res1423 = M0.sub1(a2448);}var if_res1424 = if_res1423;} else {var if_res1424 = a2448;}return if_res1424;};if (M0.number_p(a2440)!==false) {var a2450 = method_adjust2442(a2440);var if_res1431 = M0.format($rjs_core.UString.make("~a"),a2450);} else {if (M0.arity_at_least_p(a2440)!==false) {var a2451 = method_adjust2442(M0.arity_at_least_value(a2440));var if_res1430 = M0.format($rjs_core.UString.make("at least ~a"),a2451);} else {var if_res1430 = $rjs_core.UString.make("a different number");}var if_res1431 = if_res1430;}if (M0.null_p(req2438)!==false) {var if_res1429 = $rjs_core.UString.make("");} else {var if_res1429 = M0.format($rjs_core.UString.make(" plus ~a"),keywords_desc2441($rjs_core.UString.make(""),req2438));}if (allowed2439!==false) {var loop2453 = function(req2454, allowed2455) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(req2454)!==false) {var if_res1426 = allowed2455;} else {if (M0.eq_p(M0.car(req2454),M0.car(allowed2455))!==false) {var if_res1425 = loop2453(M0.cdr(req2454),M0.cdr(allowed2455));} else {var if_res1425 = M0.cons(M0.car(allowed2455),loop2453(req2454,M0.cdr(allowed2455)));}var if_res1426 = if_res1425;}return if_res1426;};var others2452 = loop2453(req2438,allowed2439);if (M0.null_p(others2452)!==false) {var if_res1427 = $rjs_core.UString.make("");} else {var if_res1427 = M0.format($rjs_core.UString.make(" plus ~a"),keywords_desc2441($rjs_core.UString.make("optional "),others2452));}var if_res1428 = if_res1427;} else {var if_res1428 = $rjs_core.UString.make(" plus arbitrary keyword arguments");}return M0.string_append(if_res1431,if_res1429,if_res1428);};var let_result1432 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,1,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string)),M0.current_inspector(),0);var struct_okp = let_result1432.getAt(0);var make_optional_keyword_procedure = let_result1432.getAt(1);var okp_p = let_result1432.getAt(2);var okp_ref = let_result1432.getAt(3);var okp_set_bang_ = let_result1432.getAt(4);var let_result1433 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,0,0,false,M0.list(M0.cons(M0.prop_method_arity_error,true)));var struct_okm = let_result1433.getAt(0);var make_optional_keyword_method = let_result1433.getAt(1);var okm_p = let_result1433.getAt(2);var okm_ref = let_result1433.getAt(3);var okm_set_bang_ = let_result1433.getAt(4);var let_result1434 = M0.make_struct_type_property($rjs_core.Symbol.make("named-keyword-procedure"));var prop_named_keyword_procedure = let_result1434.getAt(0);var named_keyword_procedure_p = let_result1434.getAt(1);var keyword_procedure_name_plus_fail = let_result1434.getAt(2);var let_result1436 = M0.make_struct_type_property($rjs_core.Symbol.make("procedure"),function(v2456, info_l2457) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.exact_integer_p(v2456)!==false) {var if_res1435 = M0.make_struct_field_accessor(M0.list_ref(info_l2457,3),v2456);} else {var if_res1435 = false;}return if_res1435;});var prop_procedure_accessor = let_result1436.getAt(0);var procedure_accessor_p = let_result1436.getAt(1);var procedure_accessor_ref = let_result1436.getAt(2);var let_result1437 = M0.make_struct_type_property($rjs_core.Symbol.make("procedure"),false,M0.list(M0.cons(M0.prop_procedure,M0.values),M0.cons(prop_procedure_accessor,M0.values)),true);var new_prop_procedure = let_result1437.getAt(0);var new_procedure_p = let_result1437.getAt(1);var new_procedure_ref = let_result1437.getAt(2);var let_result1438 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v2458) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return kpp_ref(v2458,0);})));var struct_keyword_procedure_impersonator = let_result1438.getAt(0);var make_kpp = let_result1438.getAt(1);var keyword_procedure_impersonator_p = let_result1438.getAt(2);var kpp_ref = let_result1438.getAt(3);var kpp_set_bang_ = let_result1438.getAt(4);var let_result1439 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v2459) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return kmp_ref(v2459,0);})));var struct_keyword_method_impersonator = let_result1439.getAt(0);var make_kmp = let_result1439.getAt(1);var keyword_method_impersonator_p = let_result1439.getAt(2);var kmp_ref = let_result1439.getAt(3);var kmp_set_bang_ = let_result1439.getAt(4);var let_result1440 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v2460) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return okpp_ref(v2460,0);})));var struct_okpp = let_result1440.getAt(0);var make_optional_keyword_procedure_impersonator = let_result1440.getAt(1);var okpp_p = let_result1440.getAt(2);var okpp_ref = let_result1440.getAt(3);var okpp_set_bang_ = let_result1440.getAt(4);var let_result1441 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v2461) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return okmp_ref(v2461,0);})));var struct_okmp = let_result1441.getAt(0);var make_optional_keyword_method_impersonator = let_result1441.getAt(1);var okmp_p = let_result1441.getAt(2);var okmp_ref = let_result1441.getAt(3);var okmp_set_bang_ = let_result1441.getAt(4);var let_result1442 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_procedure_by_arity_error = let_result1442.getAt(0);var make_kp_by_ae = let_result1442.getAt(1);var kp_by_ae_p = let_result1442.getAt(2);var kp_by_ae_ref = let_result1442.getAt(3);var kp_by_ae_set_bang_ = let_result1442.getAt(4);var let_result1443 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_method_by_arity_error = let_result1443.getAt(0);var make_km_by_ae = let_result1443.getAt(1);var km_by_ae_p = let_result1443.getAt(2);var km_by_ae_ref = let_result1443.getAt(3);var km_by_ae_set_bang_ = let_result1443.getAt(4);var let_result1444 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure_impersonator,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_procedure_impersonator_by_arity_error = let_result1444.getAt(0);var make_kpi_by_ae = let_result1444.getAt(1);var kpi_by_ae_p = let_result1444.getAt(2);var kpi_by_ae_ref = let_result1444.getAt(3);var kpi_by_ae_set_bang_ = let_result1444.getAt(4);var let_result1445 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method_impersonator,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_method_impersonator_by_arity_error = let_result1445.getAt(0);var make_kmi_by_ae = let_result1445.getAt(1);var kmi_by_ae_p = let_result1445.getAt(2);var kmi_by_ae_ref = let_result1445.getAt(3);var kmi_by_ae_set_bang_ = let_result1445.getAt(4);var make_required = function(name2462, fail_proc2463, method_p2464, impersonator_p2465) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part2471 = name2462;if (or_part2471!==false) {var if_res1449 = or_part2471;} else {var if_res1449 = $rjs_core.Symbol.make("unknown");}if (impersonator_p2465!==false) {if (method_p2464!==false) {var if_res1446 = struct_keyword_method_impersonator_by_arity_error;} else {var if_res1446 = struct_keyword_procedure_impersonator_by_arity_error;}var if_res1448 = if_res1446;} else {if (method_p2464!==false) {var if_res1447 = struct_keyword_method_by_arity_error;} else {var if_res1447 = struct_keyword_procedure_by_arity_error;}var if_res1448 = if_res1447;}var let_result1450 = M0.make_struct_type(if_res1449,if_res1448,0,0,false,M0.list(M0.cons(prop_named_keyword_procedure,M0.cons(name2462,fail_proc2463))),M0.current_inspector(),fail_proc2463);var s_2466 = let_result1450.getAt(0);var mk2467 = let_result1450.getAt(1);var __p2468 = let_result1450.getAt(2);var __ref2469 = let_result1450.getAt(3);var __set_bang_2470 = let_result1450.getAt(4);return mk2467;};var cl1451 = function(proc2472) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var proc_name2473 = M0.object_name(proc2472);var plain_proc2474 = $rjs_core.attachProcedureArity(function(...args24751454) {var args2475 = $rjs_core.Pair.listFromArray(args24751454);return M0.apply(proc2472,M0.rnull,M0.rnull,args2475);});if (M0.symbol_p(proc_name2473)!==false) {var if_res1455 = M0.__rjs_quoted__.procedure_rename(plain_proc2474,proc_name2473);} else {var if_res1455 = plain_proc2474;}return make_keyword_procedure(proc2472,if_res1455);};var cl1452 = function(proc2476, plain_proc2477) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc2476)!==false) {var if_res1456 = M0.procedure_arity_mask(proc2476);} else {var if_res1456 = false;}return make_optional_keyword_procedure(make_keyword_checker(M0.rnull,false,if_res1456),proc2476,M0.rnull,false,plain_proc2477);};var make_keyword_procedure = $rjs_core.attachProcedureArity(function() {var fixed_lam1453 = {'1':cl1451,'2':cl1452}[arguments.length];if (fixed_lam1453!==undefined) {return fixed_lam1453.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var keyword_apply = $rjs_core.attachProcedureArity(function(proc2478, kws2479, kw_vals2480, normal_args2481, ...normal_argss24821457) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var normal_argss2482 = $rjs_core.Pair.listFromArray(normal_argss24821457);var type_error2483 = function(what2484, which2485) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(M0.raise_argument_error,$rjs_core.Symbol.make("keyword-apply"),what2484,which2485,proc2478,kws2479,kw_vals2480,normal_args2481,normal_argss2482);};if (M0.procedure_p(proc2478)!==false) {var if_res1458 = M0.rvoid();} else {var if_res1458 = type_error2483($rjs_core.UString.make("procedure?"),0);}if_res1458;var loop2486 = function(ks2487) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(ks2487)!==false) {var if_res1465 = M0.rvoid();} else {var or_part2488 = M0.not(M0.pair_p(ks2487));if (or_part2488!==false) {var if_res1459 = or_part2488;} else {var if_res1459 = M0.not(M0.keyword_p(M0.car(ks2487)));}if (if_res1459!==false) {var if_res1464 = type_error2483($rjs_core.UString.make("(listof keyword?)"),1);} else {if (M0.null_p(M0.cdr(ks2487))!==false) {var if_res1463 = M0.rvoid();} else {var or_part2489 = M0.not(M0.pair_p(M0.cdr(ks2487)));if (or_part2489!==false) {var if_res1460 = or_part2489;} else {var if_res1460 = M0.not(M0.keyword_p(M0.cadr(ks2487)));}if (if_res1460!==false) {var if_res1462 = loop2486(M0.cdr(ks2487));} else {if (M0.keyword_lt__p(M0.car(ks2487),M0.cadr(ks2487))!==false) {var if_res1461 = loop2486(M0.cdr(ks2487));} else {var if_res1461 = type_error2483($rjs_core.UString.make("(and/c (listof? keyword?) sorted? distinct?)"),1);}var if_res1462 = if_res1461;}var if_res1463 = if_res1462;}var if_res1464 = if_res1463;}var if_res1465 = if_res1464;}return if_res1465;};loop2486(kws2479);if (M0.list_p(kw_vals2480)!==false) {var if_res1466 = M0.rvoid();} else {var if_res1466 = type_error2483($rjs_core.UString.make("list?"),2);}if_res1466;if (M0.__eq_(M0.length(kws2479),M0.length(kw_vals2480))!==false) {var if_res1467 = M0.rvoid();} else {var if_res1467 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword-apply"),$rjs_core.UString.make("keyword list length does not match value list length"),$rjs_core.UString.make("keyword list length"),M0.length(kws2479),$rjs_core.UString.make("value list length"),M0.length(kw_vals2480),$rjs_core.UString.make("keyword list"),kws2479,$rjs_core.UString.make("value list"),kw_vals2480);}if_res1467;var loop2491 = function(normal_argss2492, pos2493) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(M0.cdr(normal_argss2492))!==false) {var l2494 = M0.car(normal_argss2492);if (M0.list_p(l2494)!==false) {var if_res1468 = l2494;} else {var if_res1468 = type_error2483($rjs_core.UString.make("list?"),pos2493);}var if_res1469 = if_res1468;} else {var if_res1469 = M0.cons(M0.car(normal_argss2492),loop2491(M0.cdr(normal_argss2492),M0.add1(pos2493)));}return if_res1469;};var normal_args2490 = loop2491(M0.cons(normal_args2481,normal_argss2482),3);if (M0.null_p(kws2479)!==false) {var if_res1470 = M0.apply(proc2478,normal_args2490);} else {var if_res1470 = M0.apply(keyword_procedure_extract_by_method(kws2479,2+M0.length(normal_args2490),proc2478,0),kws2479,kw_vals2480,normal_args2490);}return if_res1470;});var procedure_keywords = function(p2495) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(p2495)!==false) {var if_res1475 = M0.values(keyword_procedure_required(p2495),keyword_procedure_allowed(p2495));} else {if (M0.procedure_p(p2495)!==false) {if (new_procedure_p(p2495)!==false) {var v2496 = new_procedure_ref(p2495);if (M0.procedure_p(v2496)!==false) {var if_res1472 = procedure_keywords(v2496);} else {var a2497 = procedure_accessor_ref(p2495);if (a2497!==false) {var if_res1471 = procedure_keywords(a2497(p2495));} else {var if_res1471 = M0.values(M0.rnull,M0.rnull);}var if_res1472 = if_res1471;}var if_res1473 = if_res1472;} else {var if_res1473 = M0.values(M0.rnull,M0.rnull);}var if_res1474 = if_res1473;} else {var if_res1474 = M0.raise_argument_error($rjs_core.Symbol.make("procedure-keywords"),$rjs_core.UString.make("procedure?"),p2495);}var if_res1475 = if_res1474;}return if_res1475;};var missing_kw = $rjs_core.attachProcedureArity(function(proc2498, ...args24991476) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args2499 = $rjs_core.Pair.listFromArray(args24991476);return M0.apply(keyword_procedure_extract_by_method(M0.rnull,0,proc2498,0),M0.rnull,M0.rnull,args2499);});var check_kw_args = function(p2500, kws2501) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop2502 = function(kws2503, required2504, allowed2505) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws2503)!==false) {if (M0.null_p(required2504)!==false) {var if_res1477 = M0.values(false,false);} else {var if_res1477 = M0.values(M0.car(required2504),false);}var if_res1486 = if_res1477;} else {if (M0.pair_p(required2504)!==false) {var if_res1478 = M0.eq_p(M0.car(required2504),M0.car(kws2503));} else {var if_res1478 = false;}if (if_res1478!==false) {var temp1481 = M0.cdr(kws2503);var temp1480 = M0.cdr(required2504);if (allowed2505!==false) {var if_res1479 = M0.cdr(allowed2505);} else {var if_res1479 = false;}var if_res1485 = loop2502(temp1481,temp1480,if_res1479);} else {if (M0.not(allowed2505)!==false) {var if_res1484 = loop2502(M0.cdr(kws2503),required2504,false);} else {if (M0.pair_p(allowed2505)!==false) {if (M0.eq_p(M0.car(allowed2505),M0.car(kws2503))!==false) {var if_res1482 = loop2502(M0.cdr(kws2503),required2504,M0.cdr(allowed2505));} else {var if_res1482 = loop2502(kws2503,required2504,M0.cdr(allowed2505));}var if_res1483 = if_res1482;} else {var if_res1483 = M0.values(false,M0.car(kws2503));}var if_res1484 = if_res1483;}var if_res1485 = if_res1484;}var if_res1486 = if_res1485;}return if_res1486;};return loop2502(kws2501,keyword_procedure_required(p2500),keyword_procedure_allowed(p2500));};var make_keyword_checker = function(req_kws2506, allowed_kws2507, arity_mask2508) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.not(allowed_kws2507)!==false) {if (M0.null_p(req_kws2506)!==false) {var if_res1489 = function(kws2509, a2510) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (true!==false) {var if_res1487 = M0.bitwise_bit_set_p(arity_mask2508,a2510);} else {var if_res1487 = false;}return if_res1487;};} else {var if_res1489 = function(kws2511, a2512) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subset_p(req_kws2506,kws2511)!==false) {var if_res1488 = M0.bitwise_bit_set_p(arity_mask2508,a2512);} else {var if_res1488 = false;}return if_res1488;};}var if_res1502 = if_res1489;} else {if (M0.null_p(allowed_kws2507)!==false) {var if_res1501 = function(kws2513, a2514) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws2513)!==false) {var if_res1490 = M0.bitwise_bit_set_p(arity_mask2508,a2514);} else {var if_res1490 = false;}return if_res1490;};} else {if (M0.null_p(req_kws2506)!==false) {var if_res1500 = function(kws2515, a2516) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subset_p(kws2515,allowed_kws2507)!==false) {var if_res1491 = M0.bitwise_bit_set_p(arity_mask2508,a2516);} else {var if_res1491 = false;}return if_res1491;};} else {if (M0.list_p(req_kws2506)!==false) {if (M0.list_p(allowed_kws2507)!==false) {var if_res1492 = M0.eq_p(M0.length(req_kws2506),M0.length(allowed_kws2507));} else {var if_res1492 = false;}var if_res1493 = if_res1492;} else {var if_res1493 = false;}if (if_res1493!==false) {var if_res1499 = function(kws2517, a2518) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop2519 = function(kws2520, req_kws2521) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(req_kws2521)!==false) {var if_res1496 = M0.null_p(kws2520);} else {if (M0.null_p(kws2520)!==false) {var if_res1495 = false;} else {if (M0.eq_p(M0.car(kws2520),M0.car(req_kws2521))!==false) {var if_res1494 = loop2519(M0.cdr(kws2520),M0.cdr(req_kws2521));} else {var if_res1494 = false;}var if_res1495 = if_res1494;}var if_res1496 = if_res1495;}return if_res1496;};if (loop2519(kws2517,req_kws2506)!==false) {var if_res1497 = M0.bitwise_bit_set_p(arity_mask2508,a2518);} else {var if_res1497 = false;}return if_res1497;};} else {var if_res1499 = function(kws2522, a2523) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subsets_p(req_kws2506,kws2522,allowed_kws2507)!==false) {var if_res1498 = M0.bitwise_bit_set_p(arity_mask2508,a2523);} else {var if_res1498 = false;}return if_res1498;};}var if_res1500 = if_res1499;}var if_res1501 = if_res1500;}var if_res1502 = if_res1501;}return if_res1502;};var subset_p = function(l12524, l22525) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l12524)!==false) {var if_res1505 = true;} else {if (M0.null_p(l22525)!==false) {var if_res1504 = false;} else {if (M0.eq_p(M0.car(l12524),M0.car(l22525))!==false) {var if_res1503 = subset_p(M0.cdr(l12524),M0.cdr(l22525));} else {var if_res1503 = subset_p(l12524,M0.cdr(l22525));}var if_res1504 = if_res1503;}var if_res1505 = if_res1504;}return if_res1505;};var subsets_p = function(l12526, l22527, l32528) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l12526)!==false) {var if_res1510 = subset_p(l22527,l32528);} else {if (M0.null_p(l22527)!==false) {var if_res1509 = false;} else {if (M0.null_p(l32528)!==false) {var if_res1508 = false;} else {var v22529 = M0.car(l22527);if (M0.eq_p(M0.car(l12526),v22529)!==false) {var if_res1507 = subsets_p(M0.cdr(l12526),M0.cdr(l22527),M0.cdr(l32528));} else {if (M0.eq_p(v22529,M0.car(l32528))!==false) {var if_res1506 = subsets_p(l12526,M0.cdr(l22527),M0.cdr(l32528));} else {var if_res1506 = subsets_p(l12526,l22527,M0.cdr(l32528));}var if_res1507 = if_res1506;}var if_res1508 = if_res1507;}var if_res1509 = if_res1508;}var if_res1510 = if_res1509;}return if_res1510;};var keyword_procedure_extract_by_method = function(kws2530, n2531, p2532, method_n2533) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(p2532)!==false) {var if_res1511 = keyword_procedure_checker(p2532)(kws2530,n2531);} else {var if_res1511 = false;}if (if_res1511!==false) {var if_res1539 = keyword_procedure_proc(p2532);} else {if (M0.not(keyword_procedure_p(p2532))!==false) {if (M0.procedure_p(p2532)!==false) {if (new_procedure_p(p2532)!==false) {var a2536 = procedure_accessor_ref(p2532);if (a2536!==false) {var if_res1512 = a2536(p2532);} else {var if_res1512 = false;}var if_res1513 = if_res1512;} else {var if_res1513 = false;}var or_part2535 = if_res1513;if (or_part2535!==false) {var if_res1516 = or_part2535;} else {var or_part2537 = M0.procedure_extract_target(p2532);if (or_part2537!==false) {var if_res1515 = or_part2537;} else {if (new_procedure_p(p2532)!==false) {var if_res1514 = $rjs_core.Symbol.make("method");} else {var if_res1514 = false;}var if_res1515 = if_res1514;}var if_res1516 = if_res1515;}var if_res1517 = if_res1516;} else {var if_res1517 = false;}var if_res1518 = if_res1517;} else {var if_res1518 = false;}var p22534 = if_res1518;if (p22534!==false) {if (M0.eq_p(p22534,$rjs_core.Symbol.make("method"))!==false) {var p32538 = keyword_procedure_extract_by_method(kws2530,M0.add1(n2531),new_procedure_ref(p2532),M0.add1(method_n2533));var if_res1520 = $rjs_core.attachProcedureArity(function(kws2539, kw_args2540, ...args25411519) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args2541 = $rjs_core.Pair.listFromArray(args25411519);return M0.apply(p32538,kws2539,kw_args2540,M0.cons(p2532,args2541));});} else {var if_res1520 = keyword_procedure_extract_by_method(kws2530,n2531,p22534,method_n2533);}var if_res1538 = if_res1520;} else {var if_res1538 = $rjs_core.attachProcedureArity(function(kws2542, kw_args2543, ...args25441521) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args2544 = $rjs_core.Pair.listFromArray(args25441521);if (keyword_procedure_p(p2532)!==false) {var if_res1522 = check_kw_args(p2532,kws2542);} else {var if_res1522 = M0.values(false,M0.car(kws2542));}var let_result1523 = if_res1522;var missing_kw2545 = let_result1523.getAt(0);var extra_kw2546 = let_result1523.getAt(1);var or_part2551 = keyword_method_p(p2532);if (or_part2551!==false) {var if_res1524 = or_part2551;} else {var if_res1524 = okm_p(p2532);}if (if_res1524!==false) {var if_res1525 = 1;} else {var if_res1525 = 0;}var method_n2550 = method_n2533+if_res1525;if (M0.__gt__eq_(n2531,method_n2550)!==false) {var if_res1526 = n2531-method_n2550;} else {var if_res1526 = n2531;}var n2547 = if_res1526;if (M0.null_p(args2544)!==false) {var if_res1527 = M0.null_p(kws2542);} else {var if_res1527 = false;}if (if_res1527!==false) {var if_res1528 = $rjs_core.UString.make("");} else {var if_res1528 = M0.apply(M0.string_append,$rjs_core.UString.make("\n  arguments...:"),M0.append(M0.map(function(v2552) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.format($rjs_core.UString.make("\n   ~e"),v2552);},args2544),M0.map(function(kw2553, kw_arg2554) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.format($rjs_core.UString.make("\n   ~a ~e"),kw2553,kw_arg2554);},kws2542,kw_args2543)));}var args_str2548 = if_res1528;var proc_name2549 = function(p2555) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (named_keyword_procedure_p(p2555)!==false) {var if_res1529 = M0.car(keyword_procedure_name_plus_fail(p2555));} else {var if_res1529 = false;}var or_part2556 = if_res1529;if (or_part2556!==false) {var if_res1531 = or_part2556;} else {var or_part2557 = M0.object_name(p2555);if (or_part2557!==false) {var if_res1530 = or_part2557;} else {var if_res1530 = p2555;}var if_res1531 = if_res1530;}return if_res1531;};if (extra_kw2546!==false) {if (keyword_procedure_p(p2532)!==false) {var if_res1533 = M0.format(M0.string_append($rjs_core.UString.make("application: procedure does not expect an argument with given keyword\n"),$rjs_core.UString.make("  procedure: ~a\n"),$rjs_core.UString.make("  given keyword: ~a"),$rjs_core.UString.make("~a")),proc_name2549(p2532),extra_kw2546,args_str2548);} else {if (M0.procedure_p(p2532)!==false) {var if_res1532 = M0.format(M0.string_append($rjs_core.UString.make("application: procedure does not accept keyword arguments\n"),$rjs_core.UString.make("  procedure: ~a"),$rjs_core.UString.make("~a")),proc_name2549(p2532),args_str2548);} else {var if_res1532 = M0.format(M0.string_append($rjs_core.UString.make("application: not a procedure;\n"),$rjs_core.UString.make(" expected a procedure that can be applied to arguments\n"),$rjs_core.UString.make("  given: ~e"),$rjs_core.UString.make("~a")),p2532,args_str2548);}var if_res1533 = if_res1532;}var if_res1537 = if_res1533;} else {if (missing_kw2545!==false) {var if_res1536 = M0.format(M0.string_append($rjs_core.UString.make("application: required keyword argument not supplied\n"),$rjs_core.UString.make("  procedure: ~a\n"),$rjs_core.UString.make("  required keyword: ~a"),$rjs_core.UString.make("~a")),proc_name2549(p2532),missing_kw2545,args_str2548);} else {var temp1535 = M0.string_append($rjs_core.UString.make("application: no case matching ~a non-keyword argument~a\n"),$rjs_core.UString.make("  procedure: ~a"),$rjs_core.UString.make("~a"));if (M0.__eq_(1,n2547-2)!==false) {var if_res1534 = $rjs_core.UString.make("");} else {var if_res1534 = $rjs_core.UString.make("s");}var if_res1536 = M0.format(temp1535,n2547-2,if_res1534,proc_name2549(p2532),args_str2548);}var if_res1537 = if_res1536;}return M0.raise(M0.__rjs_quoted__.exn_fail_contract(if_res1537,M0.current_continuation_marks()));});}var if_res1539 = if_res1538;}return if_res1539;};var keyword_procedure_extract = function(p2558, kws2559, n2560) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return keyword_procedure_extract_by_method(kws2559,n2560,p2558,0);};var cl1540 = function(proc2561, arity2562, req_kw2563, allowed_kw2564, name2565) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity"),proc2561,arity2562,false,name2565,req_kw2563,allowed_kw2564);};var cl1541 = function(proc2566, arity2567, req_kw2568, allowed_kw2569) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity"),proc2566,arity2567,false,false,req_kw2568,allowed_kw2569);};var procedure_reduce_keyword_arity = $rjs_core.attachProcedureArity(function() {var fixed_lam1542 = {'5':cl1540,'4':cl1541}[arguments.length];if (fixed_lam1542!==undefined) {return fixed_lam1542.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[4,5]);var cl1543 = function(proc2570, mask2571, req_kw2572, allowed_kw2573, name2574) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity-mask"),proc2570,false,mask2571,name2574,req_kw2572,allowed_kw2573);};var cl1544 = function(proc2575, mask2576, req_kw2577, allowed_kw2578) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity-mask"),proc2575,false,mask2576,false,req_kw2577,allowed_kw2578);};var procedure_reduce_keyword_arity_mask = $rjs_core.attachProcedureArity(function() {var fixed_lam1545 = {'5':cl1543,'4':cl1544}[arguments.length];if (fixed_lam1545!==undefined) {return fixed_lam1545.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[4,5]);var do_procedure_reduce_keyword_arity = function(who2579, proc2580, arity2581, mask2582, name2583, req_kw2584, allowed_kw2585) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (okp_p(proc2580)!==false) {var if_res1546 = okp_ref(proc2580,0);} else {var if_res1546 = proc2580;}var p2587 = if_res1546;if (arity2581!==false) {var if_res1547 = M0.__rjs_quoted__.procedure_reduce_arity(p2587,arity2581);} else {var if_res1547 = M0.__rjs_quoted__.procedure_reduce_arity_mask(p2587,mask2582,name2583);}var plain_proc2586 = if_res1547;var sorted_p2588 = function(kws2589) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop2590 = function(kws2591) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws2591)!==false) {var if_res1550 = true;} else {if (M0.null_p(M0.cdr(kws2591))!==false) {var if_res1549 = true;} else {if (M0.keyword_lt__p(M0.car(kws2591),M0.cadr(kws2591))!==false) {var if_res1548 = loop2590(M0.cdr(kws2591));} else {var if_res1548 = false;}var if_res1549 = if_res1548;}var if_res1550 = if_res1549;}return if_res1550;};return loop2590(kws2589);};if (M0.list_p(req_kw2584)!==false) {if (M0.andmap(M0.keyword_p,req_kw2584)!==false) {var if_res1551 = sorted_p2588(req_kw2584);} else {var if_res1551 = false;}var if_res1552 = if_res1551;} else {var if_res1552 = false;}if (if_res1552!==false) {var if_res1555 = M0.rvoid();} else {var temp1554 = $rjs_core.UString.make("(and/c (listof? keyword?) sorted? distinct?)");var or_part2592 = arity2581;if (or_part2592!==false) {var if_res1553 = or_part2592;} else {var if_res1553 = mask2582;}var if_res1555 = M0.raise_argument_error(who2579,temp1554,2,proc2580,if_res1553,req_kw2584,allowed_kw2585);}if_res1555;if (allowed_kw2585!==false) {if (M0.list_p(allowed_kw2585)!==false) {if (M0.andmap(M0.keyword_p,allowed_kw2585)!==false) {var if_res1556 = sorted_p2588(allowed_kw2585);} else {var if_res1556 = false;}var if_res1557 = if_res1556;} else {var if_res1557 = false;}if (if_res1557!==false) {var if_res1560 = M0.rvoid();} else {var temp1559 = $rjs_core.UString.make("(or/c (and/c (listof? keyword?) sorted? distinct?) #f)");var or_part2593 = arity2581;if (or_part2593!==false) {var if_res1558 = or_part2593;} else {var if_res1558 = mask2582;}var if_res1560 = M0.raise_argument_error(who2579,temp1559,3,proc2580,if_res1558,req_kw2584,allowed_kw2585);}if_res1560;if (subset_p(req_kw2584,allowed_kw2585)!==false) {var if_res1561 = M0.rvoid();} else {var if_res1561 = M0.raise_arguments_error(who2579,$rjs_core.UString.make("allowed-keyword list does not include all required keywords"),$rjs_core.UString.make("allowed-keyword list"),allowed_kw2585,$rjs_core.UString.make("required keywords"),req_kw2584);}var if_res1562 = if_res1561;} else {var if_res1562 = M0.rvoid();}if_res1562;var let_result1563 = procedure_keywords(proc2580);var old_req2594 = let_result1563.getAt(0);var old_allowed2595 = let_result1563.getAt(1);if (subset_p(old_req2594,req_kw2584)!==false) {var if_res1564 = M0.rvoid();} else {var if_res1564 = M0.raise_arguments_error(who2579,$rjs_core.UString.make("cannot reduce required keyword set"),$rjs_core.UString.make("required keywords"),old_req2594,$rjs_core.UString.make("requested required keywords"),req_kw2584);}if_res1564;if (old_allowed2595!==false) {if (subset_p(req_kw2584,old_allowed2595)!==false) {var if_res1565 = M0.rvoid();} else {var if_res1565 = M0.raise_arguments_error(who2579,$rjs_core.UString.make("cannot require keywords not in original allowed set"),$rjs_core.UString.make("original allowed keywords"),old_allowed2595,$rjs_core.UString.make("requested required keywords"),req_kw2584);}if_res1565;var or_part2596 = M0.not(allowed_kw2585);if (or_part2596!==false) {var if_res1566 = or_part2596;} else {var if_res1566 = subset_p(allowed_kw2585,old_allowed2595);}if (if_res1566!==false) {var if_res1567 = M0.rvoid();} else {var if_res1567 = M0.raise_arguments_error(who2579,$rjs_core.UString.make("cannot allow keywords not in original allowed set"),$rjs_core.UString.make("original allowed keywords"),old_allowed2595,$rjs_core.UString.make("requested allowed keywords"),allowed_kw2585);}var if_res1568 = if_res1567;} else {var if_res1568 = M0.rvoid();}if_res1568;if (M0.null_p(allowed_kw2585)!==false) {var if_res1576 = plain_proc2586;} else {var or_part2598 = mask2582;if (or_part2598!==false) {var if_res1569 = or_part2598;} else {var if_res1569 = arity__gt_mask(arity2581);}var mask2597 = if_res1569;var new_mask2599 = M0.arithmetic_shift(mask2597,2);var kw_checker2600 = make_keyword_checker(req_kw2584,allowed_kw2585,new_mask2599);var proc2601 = normalize_proc(proc2580);var new_kw_proc2602 = M0.__rjs_quoted__.procedure_reduce_arity_mask(keyword_procedure_proc(proc2601),new_mask2599);if (M0.null_p(req_kw2584)!==false) {if (okm_p(proc2601)!==false) {var if_res1570 = make_optional_keyword_method;} else {var if_res1570 = make_optional_keyword_procedure;}var if_res1575 = if_res1570(kw_checker2600,new_kw_proc2602,req_kw2584,allowed_kw2585,plain_proc2586);} else {if (named_keyword_procedure_p(proc2601)!==false) {var if_res1573 = M0.car(keyword_procedure_name_plus_fail(proc2601));} else {var if_res1573 = false;}var or_part2603 = if_res1573;if (or_part2603!==false) {var if_res1574 = or_part2603;} else {var if_res1574 = M0.object_name(proc2601);}var temp1572 = M0.__rjs_quoted__.procedure_reduce_arity_mask(missing_kw,M0.arithmetic_shift(mask2597,1));var or_part2604 = okm_p(proc2601);if (or_part2604!==false) {var if_res1571 = or_part2604;} else {var if_res1571 = keyword_method_p(proc2601);}var if_res1575 = make_required(if_res1574,temp1572,if_res1571,false)(kw_checker2600,new_kw_proc2602,req_kw2584,allowed_kw2585);}var if_res1576 = if_res1575;}return if_res1576;};var arity__gt_mask = function(a2605) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.exact_nonnegative_integer_p(a2605)!==false) {var if_res1582 = M0.arithmetic_shift(1,a2605);} else {if (M0.arity_at_least_p(a2605)!==false) {var if_res1581 = M0.__rjs_quoted__.bitwise_xor(-1,M0.sub1(M0.arithmetic_shift(1,M0.arity_at_least_value(a2605))));} else {if (M0.list_p(a2605)!==false) {var loop2606 = function(mask2607, l2608) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l2608)!==false) {var if_res1579 = mask2607;} else {var a2609 = M0.car(l2608);var or_part2610 = M0.exact_nonnegative_integer_p(a2609);if (or_part2610!==false) {var if_res1577 = or_part2610;} else {var if_res1577 = M0.arity_at_least_p(a2609);}if (if_res1577!==false) {var if_res1578 = loop2606(M0.__rjs_quoted__.bitwise_ior(mask2607,arity__gt_mask(a2609)),M0.cdr(l2608));} else {var if_res1578 = false;}var if_res1579 = if_res1578;}return if_res1579;};var if_res1580 = loop2606(0,a2605);} else {var if_res1580 = false;}var if_res1581 = if_res1580;}var if_res1582 = if_res1581;}return if_res1582;};var cl1583 = function(proc2612, arity2613, name2614) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc2612)!==false) {var let_result1586 = procedure_keywords(proc2612);var req2615 = let_result1586.getAt(0);var allows2616 = let_result1586.getAt(1);if (M0.pair_p(req2615)!==false) {var if_res1587 = M0.not(M0.null_p(arity2613));} else {var if_res1587 = false;}var if_res1588 = if_res1587;} else {var if_res1588 = false;}if (if_res1588!==false) {var if_res1590 = M0.raise_arguments_error($rjs_core.Symbol.make("procedure-reduce-arity"),$rjs_core.UString.make("procedure has required keyword arguments"),$rjs_core.UString.make("procedure"),proc2612);} else {if (okm_p(proc2612)!==false) {var if_res1589 = M0.__rjs_quoted__.procedure__gt_method(proc2612);} else {var if_res1589 = proc2612;}var if_res1590 = M0.__rjs_quoted__.procedure_reduce_arity(if_res1589,arity2613,name2614);}return if_res1590;};var cl1584 = function(proc2617, arity2618) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new_procedure_reduce_arity(proc2617,arity2618,false);};var procedure_reduce_arity2611 = $rjs_core.attachProcedureArity(function() {var fixed_lam1585 = {'3':cl1583,'2':cl1584}[arguments.length];if (fixed_lam1585!==undefined) {return fixed_lam1585.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3]);var new_procedure_reduce_arity = procedure_reduce_arity2611;var cl1591 = function(proc2620, mask2621, name2622) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc2620)!==false) {var let_result1594 = procedure_keywords(proc2620);var req2623 = let_result1594.getAt(0);var allows2624 = let_result1594.getAt(1);if (M0.pair_p(req2623)!==false) {var if_res1595 = M0.not(M0.eqv_p(mask2621,0));} else {var if_res1595 = false;}var if_res1596 = if_res1595;} else {var if_res1596 = false;}if (if_res1596!==false) {var if_res1598 = M0.raise_arguments_error($rjs_core.Symbol.make("procedure-reduce-arity"),$rjs_core.UString.make("procedure has required keyword arguments"),$rjs_core.UString.make("procedure"),proc2620);} else {if (okm_p(proc2620)!==false) {var if_res1597 = M0.__rjs_quoted__.procedure__gt_method(proc2620);} else {var if_res1597 = proc2620;}var if_res1598 = M0.__rjs_quoted__.procedure_reduce_arity_mask(if_res1597,mask2621,name2622);}return if_res1598;};var cl1592 = function(proc2625, mask2626) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new_procedure_reduce_arity_mask(proc2625,mask2626,false);};var procedure_reduce_arity2619 = $rjs_core.attachProcedureArity(function() {var fixed_lam1593 = {'3':cl1591,'2':cl1592}[arguments.length];if (fixed_lam1593!==undefined) {return fixed_lam1593.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3]);var new_procedure_reduce_arity_mask = procedure_reduce_arity2619;var procedure__gt_method2627 = function(proc2628) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var proc2629 = normalize_proc(proc2628);if (keyword_procedure_p(proc2629)!==false) {if (okm_p(proc2629)!==false) {var if_res1601 = proc2629;} else {if (keyword_method_p(proc2629)!==false) {var if_res1600 = proc2629;} else {if (okp_p(proc2629)!==false) {var if_res1599 = make_optional_keyword_method(keyword_procedure_checker(proc2629),keyword_procedure_proc(proc2629),keyword_procedure_required(proc2629),keyword_procedure_allowed(proc2629),okp_ref(proc2629,0));} else {var name_plus_fail2630 = keyword_procedure_name_plus_fail(proc2629);var mk2631 = make_required(M0.car(name_plus_fail2630),M0.cdr(name_plus_fail2630),true,false);var if_res1599 = mk2631(keyword_procedure_checker(proc2629),keyword_procedure_proc(proc2629),keyword_procedure_required(proc2629),keyword_procedure_allowed(proc2629));}var if_res1600 = if_res1599;}var if_res1601 = if_res1600;}var if_res1602 = if_res1601;} else {var if_res1602 = M0.__rjs_quoted__.procedure__gt_method(proc2629);}return if_res1602;};var new_procedure__gt_method = procedure__gt_method2627;var procedure_rename2632 = function(proc2633, name2634) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(proc2633)!==false) {var if_res1603 = M0.symbol_p(name2634);} else {var if_res1603 = false;}if (M0.not(if_res1603)!==false) {var if_res1606 = M0.__rjs_quoted__.procedure_rename(proc2633,name2634);} else {if (okp_p(proc2633)!==false) {if (okm_p(proc2633)!==false) {var if_res1604 = make_optional_keyword_method;} else {var if_res1604 = make_optional_keyword_procedure;}var if_res1605 = if_res1604(keyword_procedure_checker(proc2633),keyword_procedure_proc(proc2633),keyword_procedure_required(proc2633),keyword_procedure_allowed(proc2633),M0.__rjs_quoted__.procedure_rename(okp_ref(proc2633,0),name2634));} else {var name_plus_fail2635 = keyword_procedure_name_plus_fail(proc2633);var mk2636 = make_required(name2634,M0.cdr(name_plus_fail2635),keyword_method_p(proc2633),false);var if_res1605 = mk2636(keyword_procedure_checker(proc2633),keyword_procedure_proc(proc2633),keyword_procedure_required(proc2633),keyword_procedure_allowed(proc2633));}var if_res1606 = if_res1605;}return if_res1606;};var new_procedure_rename = procedure_rename2632;var chaperone_procedure2637 = $rjs_core.attachProcedureArity(function(proc2638, wrap_proc2639, ...props26401607) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2640 = $rjs_core.Pair.listFromArray(props26401607);return do_chaperone_procedure(false,false,M0.__rjs_quoted__.chaperone_procedure,$rjs_core.Symbol.make("chaperone-procedure"),proc2638,wrap_proc2639,props2640);});var new_chaperone_procedure = chaperone_procedure2637;var unsafe_chaperone_procedure2641 = $rjs_core.attachProcedureArity(function(proc2642, wrap_proc2643, ...props26441608) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2644 = $rjs_core.Pair.listFromArray(props26441608);return do_unsafe_chaperone_procedure(M1.__rjs_quoted__.unsafe_chaperone_procedure,$rjs_core.Symbol.make("unsafe-chaperone-procedure"),proc2642,wrap_proc2643,props2644);});var new_unsafe_chaperone_procedure = unsafe_chaperone_procedure2641;var impersonate_procedure2645 = $rjs_core.attachProcedureArity(function(proc2646, wrap_proc2647, ...props26481609) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2648 = $rjs_core.Pair.listFromArray(props26481609);return do_chaperone_procedure(true,false,M0.__rjs_quoted__.impersonate_procedure,$rjs_core.Symbol.make("impersonate-procedure"),proc2646,wrap_proc2647,props2648);});var new_impersonate_procedure = impersonate_procedure2645;var unsafe_impersonate_procedure2649 = $rjs_core.attachProcedureArity(function(proc2650, wrap_proc2651, ...props26521610) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2652 = $rjs_core.Pair.listFromArray(props26521610);return do_unsafe_chaperone_procedure(M1.__rjs_quoted__.unsafe_impersonate_procedure,$rjs_core.Symbol.make("unsafe-impersonate-procedure"),proc2650,wrap_proc2651,props2652);});var new_unsafe_impersonate_procedure = unsafe_impersonate_procedure2649;var chaperone_procedure_times_2653 = $rjs_core.attachProcedureArity(function(proc2654, wrap_proc2655, ...props26561611) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2656 = $rjs_core.Pair.listFromArray(props26561611);return do_chaperone_procedure(false,true,M0.__rjs_quoted__.chaperone_procedure_times_,$rjs_core.Symbol.make("chaperone-procedure"),proc2654,wrap_proc2655,props2656);});var new_chaperone_procedure_times_ = chaperone_procedure_times_2653;var impersonate_procedure_times_2657 = $rjs_core.attachProcedureArity(function(proc2658, wrap_proc2659, ...props26601612) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props2660 = $rjs_core.Pair.listFromArray(props26601612);return do_chaperone_procedure(true,true,M0.__rjs_quoted__.impersonate_procedure_times_,$rjs_core.Symbol.make("impersonate-procedure"),proc2658,wrap_proc2659,props2660);});var new_impersonate_procedure_times_ = impersonate_procedure_times_2657;var do_chaperone_procedure = function(is_impersonator_p2661, self_arg_p2662, chaperone_procedure2663, name2664, proc2665, wrap_proc2666, props2667) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}var n_proc2668 = normalize_proc(proc2665);var n_wrap_proc2669 = normalize_proc(wrap_proc2666);var or_part2670 = M0.not(keyword_procedure_p(n_proc2668));if (or_part2670!==false) {var if_res1614 = or_part2670;} else {var or_part2671 = M0.not(M0.procedure_p(wrap_proc2666));if (or_part2671!==false) {var if_res1613 = or_part2671;} else {var if_res1613 = bad_props_p(props2667);}var if_res1614 = if_res1613;}if (if_res1614!==false) {var if_res1678 = M0.apply(chaperone_procedure2663,proc2665,wrap_proc2666,props2667);} else {chaperone_arity_match_checking(self_arg_p2662,name2664,proc2665,wrap_proc2666,props2667);var p2673 = keyword_procedure_proc(n_wrap_proc2669);if (self_arg_p2662!==false) {var cl1615 = $rjs_core.attachProcedureArity(function(self_proc2674, kws2675, args2676, ...rest26771620) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var rest2677 = $rjs_core.Pair.listFromArray(rest26771620);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(p2673,kws2675,args2676,self_proc2674,rest2677);},$rjs_core.attachProcedureArity(function(...results26781621) {var results2678 = $rjs_core.Pair.listFromArray(results26781621);var len2679 = M0.length(results2678);var alen2680 = M0.length(rest2677);if (M0.__lt_(len2679,alen2680+1)!==false) {var if_res1622 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),$rjs_core.UString.make("wrong number of results from wrapper procedure"),$rjs_core.UString.make("expected minimum number of results"),alen2680+1,$rjs_core.UString.make("received number of results"),len2679,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);} else {var if_res1622 = M0.rvoid();}if_res1622;var num_extra2681 = len2679-(alen2680+1);var new_args2682 = M0.list_ref(results2678,num_extra2681);if (M0.list_p(new_args2682)!==false) {var if_res1623 = M0.__eq_(M0.length(new_args2682),M0.length(args2676));} else {var if_res1623 = false;}if (if_res1623!==false) {var if_res1627 = M0.rvoid();} else {var temp1626 = $rjs_core.Symbol.make("keyword procedure chaperone");var temp1625 = $rjs_core.UString.make("expected a list of keyword-argument values as first result~a from wrapper procedure");if (M0.__eq_(len2679,alen2680)!==false) {var if_res1624 = $rjs_core.UString.make("");} else {var if_res1624 = $rjs_core.UString.make(" (after the result-wrapper procedure or mark specifications)");}var if_res1627 = M0.raise_arguments_error(temp1626,M0.format(temp1625,if_res1624),$rjs_core.UString.make("first result"),new_args2682,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);}if_res1627;M0.for_each(function(kw2683, new_arg2684, arg2685) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p2661!==false) {var if_res1629 = M0.rvoid();} else {if (M0.__rjs_quoted__.chaperone_of_p(new_arg2684,arg2685)!==false) {var if_res1628 = M0.rvoid();} else {var if_res1628 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),M0.format($rjs_core.UString.make("~a keyword result is not a chaperone of original argument from chaperoning procedure"),kw2683),$rjs_core.UString.make("result"),new_arg2684,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);}var if_res1629 = if_res1628;}return if_res1629;},kws2675,new_args2682,args2676);var tmp2686 = num_extra2681;if (M0.equal_p(tmp2686,0)!==false) {var if_res1632 = M0.apply(M0.values,kws2675,results2678);} else {if (M0.equal_p(tmp2686,1)!==false) {var if_res1631 = M0.apply(M0.values,M0.car(results2678),kws2675,M0.cdr(results2678));} else {var loop2687 = function(results2688, c2689) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(c2689)!==false) {var if_res1630 = M0.cons(kws2675,results2688);} else {var if_res1630 = M0.cons(M0.car(results2688),loop2687(M0.cdr(results2688),M0.sub1(c2689)));}return if_res1630;};var if_res1631 = M0.apply(M0.values,loop2687(results2678,num_extra2681));}var if_res1632 = if_res1631;}return if_res1632;}));});var cl1616 = $rjs_core.attachProcedureArity(function(...other26901633) {var other2690 = $rjs_core.Pair.listFromArray(other26901633);return M0.error($rjs_core.UString.make("shouldn't get here"));});var if_res1653 = $rjs_core.attachProcedureArity(function() {var fixed_lam1617 = {}[arguments.length];if (fixed_lam1617!==undefined) {return fixed_lam1617.apply(null,arguments);} else {if (M0.__gt__eq_(cl1615.length,1)!==false) {var if_res1619 = cl1615.apply(null,arguments);} else {if (true!==false) {var if_res1618 = cl1616.apply(null,arguments);} else {var if_res1618 = M0.error($rjs_core.UString.make("case-lambda: invalid case"));}var if_res1619 = if_res1618;}return if_res1619;}},[M0.make_arity_at_least(0)]);} else {var cl1634 = $rjs_core.attachProcedureArity(function(kws2691, args2692, ...rest26931639) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var rest2693 = $rjs_core.Pair.listFromArray(rest26931639);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(p2673,kws2691,args2692,rest2693);},$rjs_core.attachProcedureArity(function(...results26941640) {var results2694 = $rjs_core.Pair.listFromArray(results26941640);var len2695 = M0.length(results2694);var alen2696 = M0.length(rest2693);if (M0.__lt_(len2695,alen2696+1)!==false) {var if_res1641 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),$rjs_core.UString.make("wrong number of results from wrapper procedure"),$rjs_core.UString.make("expected minimum number of results"),alen2696+1,$rjs_core.UString.make("received number of results"),len2695,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);} else {var if_res1641 = M0.rvoid();}if_res1641;var num_extra2697 = len2695-(alen2696+1);var new_args2698 = M0.list_ref(results2694,num_extra2697);if (M0.list_p(new_args2698)!==false) {var if_res1642 = M0.__eq_(M0.length(new_args2698),M0.length(args2692));} else {var if_res1642 = false;}if (if_res1642!==false) {var if_res1646 = M0.rvoid();} else {var temp1645 = $rjs_core.Symbol.make("keyword procedure chaperone");var temp1644 = $rjs_core.UString.make("expected a list of keyword-argument values as first result~a from wrapper procedure");if (M0.__eq_(len2695,alen2696)!==false) {var if_res1643 = $rjs_core.UString.make("");} else {var if_res1643 = $rjs_core.UString.make(" (after the result-wrapper procedure or mark specifications)");}var if_res1646 = M0.raise_arguments_error(temp1645,M0.format(temp1644,if_res1643),$rjs_core.UString.make("first result"),new_args2698,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);}if_res1646;M0.for_each(function(kw2699, new_arg2700, arg2701) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p2661!==false) {var if_res1648 = M0.rvoid();} else {if (M0.__rjs_quoted__.chaperone_of_p(new_arg2700,arg2701)!==false) {var if_res1647 = M0.rvoid();} else {var if_res1647 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),M0.format($rjs_core.UString.make("~a keyword result is not a chaperone of original argument from chaperoning procedure"),kw2699),$rjs_core.UString.make("result"),new_arg2700,$rjs_core.UString.make("wrapper procedure"),wrap_proc2666);}var if_res1648 = if_res1647;}return if_res1648;},kws2691,new_args2698,args2692);var tmp2702 = num_extra2697;if (M0.equal_p(tmp2702,0)!==false) {var if_res1651 = M0.apply(M0.values,kws2691,results2694);} else {if (M0.equal_p(tmp2702,1)!==false) {var if_res1650 = M0.apply(M0.values,M0.car(results2694),kws2691,M0.cdr(results2694));} else {var loop2703 = function(results2704, c2705) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(c2705)!==false) {var if_res1649 = M0.cons(kws2691,results2704);} else {var if_res1649 = M0.cons(M0.car(results2704),loop2703(M0.cdr(results2704),M0.sub1(c2705)));}return if_res1649;};var if_res1650 = M0.apply(M0.values,loop2703(results2694,num_extra2697));}var if_res1651 = if_res1650;}return if_res1651;}));});var cl1635 = $rjs_core.attachProcedureArity(function(...other27061652) {var other2706 = $rjs_core.Pair.listFromArray(other27061652);return M0.error($rjs_core.UString.make("shouldn't get here"));});var if_res1653 = $rjs_core.attachProcedureArity(function() {var fixed_lam1636 = {}[arguments.length];if (fixed_lam1636!==undefined) {return fixed_lam1636.apply(null,arguments);} else {if (M0.__gt__eq_(cl1634.length,1)!==false) {var if_res1638 = cl1634.apply(null,arguments);} else {if (true!==false) {var if_res1637 = cl1635.apply(null,arguments);} else {var if_res1637 = M0.error($rjs_core.UString.make("case-lambda: invalid case"));}var if_res1638 = if_res1637;}return if_res1638;}},[M0.make_arity_at_least(0)]);}var kw_chaperone2672 = if_res1653;var wrap2709 = function(proc2710, n_proc2711) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.not(M0.eq_p(n_proc2711,proc2710))!==false) {var if_res1654 = new_procedure_p(proc2710);} else {var if_res1654 = false;}if (if_res1654!==false) {var v2712 = new_procedure_ref(proc2710);if (M0.exact_integer_p(v2712)!==false) {var acc2713 = procedure_accessor_ref(proc2710);var if_res1670 = M0.values(M0.__rjs_quoted__.chaperone_struct(proc2710,acc2713,function(self2714, sub_proc2715) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result1655 = wrap2709(sub_proc2715,normalize_proc(sub_proc2715));var f2716 = let_result1655.getAt(0);var acc2717 = let_result1655.getAt(1);return f2716;}),acc2713);} else {if (is_impersonator_p2661!==false) {var if_res1669 = M0.__rjs_quoted__.impersonate_struct;} else {var if_res1669 = M0.__rjs_quoted__.chaperone_struct;}if (okp_p(n_proc2711)!==false) {var if_res1668 = chaperone_procedure2663(proc2710,wrap_proc2666);} else {var if_res1668 = proc2710;}var new_kw_proc2718 = if_res1669(if_res1668,new_procedure_ref,function(self2719, proc2720) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p2661!==false) {var if_res1667 = new_impersonate_procedure;} else {var if_res1667 = new_chaperone_procedure;}if (self_arg_p2662!==false) {var if_res1666 = $rjs_core.attachProcedureArity(function(proc_self2721, kws2722, kw_args2723, self2724, ...args27251656) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args2725 = $rjs_core.Pair.listFromArray(args27251656);var len2726 = M0.length(args2725);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(kw_chaperone2672,proc_self2721,kws2722,kw_args2723,args2725);},$rjs_core.attachProcedureArity(function(...results27271657) {var results2727 = $rjs_core.Pair.listFromArray(results27271657);var r_len2728 = M0.length(results2727);var list_take2729 = function(l2730, n2731) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(n2731)!==false) {var if_res1658 = M0.rnull;} else {var if_res1658 = M0.cons(M0.car(l2730),list_take2729(M0.cdr(l2730),M0.sub1(n2731)));}return if_res1658;};if (M0.null_p($rjs_core.Pair.makeList($rjs_core.Symbol.make("proc-self")))!==false) {var if_res1659 = M0.__eq_(r_len2728,2+len2726);} else {var if_res1659 = false;}if (if_res1659!==false) {var if_res1660 = M0.apply(M0.values,M0.cadr(results2727),self2724,M0.cddr(results2727));} else {var skip2732 = r_len2728-len2726;var if_res1660 = M0.apply(M0.values,M0.append(list_take2729(results2727,skip2732-2),M0.list(M0.list_ref(results2727,M0.sub1(skip2732)),self2724),M0.__rjs_quoted__.list_tail(results2727,skip2732)));}return if_res1660;}));});} else {var if_res1666 = $rjs_core.attachProcedureArity(function(kws2733, kw_args2734, self2735, ...args27361661) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args2736 = $rjs_core.Pair.listFromArray(args27361661);var len2737 = M0.length(args2736);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(kw_chaperone2672,kws2733,kw_args2734,args2736);},$rjs_core.attachProcedureArity(function(...results27381662) {var results2738 = $rjs_core.Pair.listFromArray(results27381662);var r_len2739 = M0.length(results2738);var list_take2740 = function(l2741, n2742) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(n2742)!==false) {var if_res1663 = M0.rnull;} else {var if_res1663 = M0.cons(M0.car(l2741),list_take2740(M0.cdr(l2741),M0.sub1(n2742)));}return if_res1663;};if (M0.null_p($rjs_core.Pair.makeList())!==false) {var if_res1664 = M0.__eq_(r_len2739,2+len2737);} else {var if_res1664 = false;}if (if_res1664!==false) {var if_res1665 = M0.apply(M0.values,M0.cadr(results2738),self2735,M0.cddr(results2738));} else {var skip2743 = r_len2739-len2737;var if_res1665 = M0.apply(M0.values,M0.append(list_take2740(results2738,skip2743-2),M0.list(M0.list_ref(results2738,M0.sub1(skip2743)),self2735),M0.__rjs_quoted__.list_tail(results2738,skip2743)));}return if_res1665;}));});}return if_res1667(proc2720,make_keyword_procedure(if_res1666));});var if_res1670 = M0.values(new_kw_proc2718,new_procedure_ref);}var if_res1675 = if_res1670;} else {if (okp_p(n_proc2711)!==false) {if (is_impersonator_p2661!==false) {if (okm_p(n_proc2711)!==false) {var if_res1671 = make_optional_keyword_method_impersonator;} else {var if_res1671 = make_optional_keyword_procedure_impersonator;}var if_res1672 = if_res1671(keyword_procedure_checker(n_proc2711),chaperone_procedure2663(keyword_procedure_proc(n_proc2711),kw_chaperone2672),keyword_procedure_required(n_proc2711),keyword_procedure_allowed(n_proc2711),chaperone_procedure2663(okp_ref(n_proc2711,0),okp_ref(n_wrap_proc2669,0)),n_proc2711);} else {var if_res1672 = M0.__rjs_quoted__.chaperone_struct(proc2710,keyword_procedure_proc,function(self2744, proc2745) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure2663(proc2745,kw_chaperone2672);},M0.make_struct_field_accessor(okp_ref,0),function(self2746, proc2747) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure2663(proc2747,okp_ref(n_wrap_proc2669,0));});}var if_res1674 = M0.values(if_res1672,keyword_procedure_proc);} else {if (is_impersonator_p2661!==false) {var name_plus_fail2748 = keyword_procedure_name_plus_fail(n_proc2711);var mk2749 = make_required(M0.car(name_plus_fail2748),M0.cdr(name_plus_fail2748),keyword_method_p(n_proc2711),true);var if_res1673 = mk2749(keyword_procedure_checker(n_proc2711),chaperone_procedure2663(keyword_procedure_proc(n_proc2711),kw_chaperone2672),keyword_procedure_required(n_proc2711),keyword_procedure_allowed(n_proc2711),n_proc2711);} else {var if_res1673 = M0.__rjs_quoted__.chaperone_struct(n_proc2711,keyword_procedure_proc,function(self2750, proc2751) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure2663(proc2751,kw_chaperone2672);});}var if_res1674 = M0.values(if_res1673,keyword_procedure_proc);}var if_res1675 = if_res1674;}return if_res1675;};var let_result1676 = wrap2709(proc2665,n_proc2668);var new_proc2707 = let_result1676.getAt(0);var chap_accessor2708 = let_result1676.getAt(1);if (M0.null_p(props2667)!==false) {var if_res1677 = new_proc2707;} else {var if_res1677 = M0.apply(M0.__rjs_quoted__.chaperone_struct,new_proc2707,chap_accessor2708,false,props2667);}var if_res1678 = if_res1677;}return if_res1678;};var do_unsafe_chaperone_procedure = function(unsafe_chaperone_procedure2752, name2753, proc2754, wrap_proc2755, props2756) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var n_proc2757 = normalize_proc(proc2754);var n_wrap_proc2758 = normalize_proc(wrap_proc2755);var or_part2759 = M0.not(keyword_procedure_p(n_proc2757));if (or_part2759!==false) {var if_res1680 = or_part2759;} else {var or_part2760 = M0.not(M0.procedure_p(wrap_proc2755));if (or_part2760!==false) {var if_res1679 = or_part2760;} else {var if_res1679 = bad_props_p(props2756);}var if_res1680 = if_res1679;}if (if_res1680!==false) {var if_res1681 = M0.apply(unsafe_chaperone_procedure2752,proc2754,wrap_proc2755,props2756);} else {chaperone_arity_match_checking(false,name2753,proc2754,wrap_proc2755,props2756);var if_res1681 = M0.apply(unsafe_chaperone_procedure2752,proc2754,wrap_proc2755,props2756);}return if_res1681;};var bad_props_p = function(props2761) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop2762 = function(props2763) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(props2763)!==false) {var if_res1684 = false;} else {if (M0.__rjs_quoted__.impersonator_property_p(M0.car(props2763))!==false) {var props2764 = M0.cdr(props2763);var or_part2765 = M0.null_p(props2764);if (or_part2765!==false) {var if_res1682 = or_part2765;} else {var if_res1682 = loop2762(M0.cdr(props2764));}var if_res1683 = if_res1682;} else {var if_res1683 = true;}var if_res1684 = if_res1683;}return if_res1684;};return loop2762(props2761);};var chaperone_arity_match_checking = function(self_arg_p2766, name2767, proc2768, wrap_proc2769, props2770) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var a2771 = M0.procedure_arity(proc2768);var b2772 = M0.procedure_arity(wrap_proc2769);if (self_arg_p2766!==false) {var if_res1685 = 1;} else {var if_res1685 = 0;}var d2773 = if_res1685;var let_result1686 = procedure_keywords(proc2768);var a_req2774 = let_result1686.getAt(0);var a_allow2775 = let_result1686.getAt(1);var let_result1687 = procedure_keywords(wrap_proc2769);var b_req2776 = let_result1687.getAt(0);var b_allow2777 = let_result1687.getAt(1);var includes_p2778 = function(a2779, b2780) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.number_p(b2780)!==false) {if (M0.number_p(a2779)!==false) {var if_res1689 = M0.__eq_(b2780,a2779+d2773);} else {if (M0.arity_at_least_p(a2779)!==false) {var if_res1688 = M0.__gt__eq_(b2780,M0.arity_at_least_value(a2779)+d2773);} else {var if_res1688 = M0.ormap(function(a2781) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p2778(a2781,b2780);},a2779);}var if_res1689 = if_res1688;}var if_res1693 = if_res1689;} else {if (M0.arity_at_least_p(b2780)!==false) {if (M0.number_p(a2779)!==false) {var if_res1691 = false;} else {if (M0.arity_at_least_p(a2779)!==false) {var if_res1690 = M0.__gt__eq_(M0.arity_at_least_value(b2780),M0.arity_at_least_value(a2779)+d2773);} else {var if_res1690 = M0.ormap(function(a2782) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p2778(b2780,a2782);},a2779);}var if_res1691 = if_res1690;}var if_res1692 = if_res1691;} else {var if_res1692 = M0.andmap(function(b2783) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p2778(a2779,b2783);},b2780);}var if_res1693 = if_res1692;}return if_res1693;};if (includes_p2778(b2772,a2771)!==false) {var if_res1694 = M0.rvoid();} else {var if_res1694 = M0.apply(M0.__rjs_quoted__.chaperone_procedure,proc2768,wrap_proc2769,props2770);}if_res1694;if (subset_p(b_req2776,a_req2774)!==false) {var if_res1695 = M0.rvoid();} else {var if_res1695 = M0.raise_arguments_error(name2767,$rjs_core.UString.make("wrapper procedure requires more keywords than original procedure"),$rjs_core.UString.make("wrapper procedure"),wrap_proc2769,$rjs_core.UString.make("original procedure"),proc2768);}if_res1695;var or_part2784 = M0.not(b_allow2777);if (or_part2784!==false) {var if_res1697 = or_part2784;} else {if (a_allow2775!==false) {var if_res1696 = subset_p(a_allow2775,b_allow2777);} else {var if_res1696 = false;}var if_res1697 = if_res1696;}if (if_res1697!==false) {var if_res1698 = M0.rvoid();} else {var if_res1698 = M0.raise_arguments_error(name2767,$rjs_core.UString.make("wrapper procedure does not accept all keywords of original procedure"),$rjs_core.UString.make("wrapper procedure"),wrap_proc2769,$rjs_core.UString.make("original procedure"),proc2768);}if_res1698;return M0.rvoid();};var normalize_proc = function(proc2785) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(proc2785)!==false) {var if_res1706 = proc2785;} else {if (new_procedure_p(proc2785)!==false) {var let_result1699 = procedure_keywords(proc2785);var req_kws2786 = let_result1699.getAt(0);var allowed_kws2787 = let_result1699.getAt(1);if (M0.null_p(allowed_kws2787)!==false) {var if_res1704 = proc2785;} else {var if_res1704 = make_optional_keyword_procedure(function(given_kws2788, given_argc2789) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_arity_includes_p(proc2785,given_argc2789-2,true)!==false) {var or_part2790 = M0.not(allowed_kws2787);if (or_part2790!==false) {var if_res1701 = or_part2790;} else {var if_res1701 = subset_p(given_kws2788,allowed_kws2787);}if (if_res1701!==false) {var if_res1702 = subset_p(req_kws2786,given_kws2788);} else {var if_res1702 = false;}var if_res1703 = if_res1702;} else {var if_res1703 = false;}return if_res1703;},$rjs_core.attachProcedureArity(function(kws2791, kw_args2792, ...vals27931700) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var vals2793 = $rjs_core.Pair.listFromArray(vals27931700);return keyword_apply(proc2785,kws2791,kw_args2792,vals2793);}),req_kws2786,allowed_kws2787,proc2785);}var if_res1705 = if_res1704;} else {var if_res1705 = proc2785;}var if_res1706 = if_res1705;}return if_res1706;};var __rjs_quoted__ = {};__rjs_quoted__.keyword_procedure_extract = keyword_procedure_extract;__rjs_quoted__.struct_keyword_method_by_arity_error = struct_keyword_method_by_arity_error;__rjs_quoted__.missing_kw = missing_kw;__rjs_quoted__.make_optional_keyword_method = make_optional_keyword_method;__rjs_quoted__.prop_named_keyword_procedure = prop_named_keyword_procedure;__rjs_quoted__.struct_keyword_procedure_by_arity_error = struct_keyword_procedure_by_arity_error;__rjs_quoted__.subsets_p = subsets_p;__rjs_quoted__.struct_keyword_procedure = struct_keyword_procedure;__rjs_quoted__.subset_p = subset_p;__rjs_quoted__.make_optional_keyword_procedure = make_optional_keyword_procedure;export { __rjs_quoted__,new_impersonate_procedure_times_,new_chaperone_procedure_times_,new_impersonate_procedure,new_chaperone_procedure,new_procedure_rename,new_procedure__gt_method,new_prop_procedure,procedure_reduce_keyword_arity_mask,procedure_reduce_keyword_arity,new_procedure_reduce_arity_mask,new_procedure_reduce_arity,procedure_keywords,keyword_apply,make_keyword_procedure };