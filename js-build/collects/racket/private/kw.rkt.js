import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/unsafe.rkt.js";var let_result408 = M0.make_struct_type_property($rjs_core.Symbol.make("keyword-impersonator"));var prop_keyword_impersonator = let_result408.getAt(0);var keyword_impersonator_p = let_result408.getAt(1);var keyword_impersonator_ref = let_result408.getAt(2);var keyword_procedure_impersonator_of = function(v925) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_impersonator_p(v925)!==false) {var if_res409 = keyword_impersonator_ref(v925)(v925);} else {var if_res409 = false;}return if_res409;};var let_result410 = M0.make_struct_type($rjs_core.Symbol.make("keyword-procedure"),false,4,0,false,M0.list(M0.cons(M0.prop_checked_procedure,true),M0.cons(M0.prop_impersonator_of,keyword_procedure_impersonator_of)),M0.current_inspector(),false,$rjs_core.Pair.makeList(0,1,2,3));var struct_keyword_procedure = let_result410.getAt(0);var mk_kw_proc = let_result410.getAt(1);var keyword_procedure_p = let_result410.getAt(2);var keyword_procedure_ref = let_result410.getAt(3);var keyword_procedure_set_bang_ = let_result410.getAt(4);var keyword_procedure_checker = M0.make_struct_field_accessor(keyword_procedure_ref,0);var keyword_procedure_proc = M0.make_struct_field_accessor(keyword_procedure_ref,1);var keyword_procedure_required = M0.make_struct_field_accessor(keyword_procedure_ref,2);var keyword_procedure_allowed = M0.make_struct_field_accessor(keyword_procedure_ref,3);var let_result411 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,0,0,false,M0.list(M0.cons(M0.prop_method_arity_error,true)));var struct_keyword_method = let_result411.getAt(0);var make_km = let_result411.getAt(1);var keyword_method_p = let_result411.getAt(2);var km_ref = let_result411.getAt(3);var km_set_bang_ = let_result411.getAt(4);var generate_arity_string = function(proc926) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result412 = procedure_keywords(proc926);var req927 = let_result412.getAt(0);var allowed928 = let_result412.getAt(1);var a929 = M0.procedure_arity(proc926);var keywords_desc930 = function(opt932, req933) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var temp418 = $rjs_core.UString.make("~a with keyword~a~a");if (M0.null_p(M0.cdr(req933))!==false) {var if_res417 = M0.format($rjs_core.UString.make("an ~aargument"),opt932);} else {var if_res417 = M0.format($rjs_core.UString.make("~aarguments"),opt932);}if (M0.null_p(M0.cdr(req933))!==false) {var if_res416 = $rjs_core.UString.make("");} else {var if_res416 = $rjs_core.UString.make("s");}var tmp934 = M0.length(req933);if (M0.equal_p(tmp934,1)!==false) {var if_res415 = M0.format($rjs_core.UString.make(" ~a"),M0.car(req933));} else {if (M0.equal_p(tmp934,2)!==false) {var if_res414 = M0.format($rjs_core.UString.make(" ~a and ~a"),M0.car(req933),M0.cadr(req933));} else {var loop935 = function(req936) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(M0.cdr(req936))!==false) {var if_res413 = M0.format($rjs_core.UString.make(" and ~a"),M0.car(req936));} else {var if_res413 = M0.format($rjs_core.UString.make(" ~a,~a"),M0.car(req936),loop935(M0.cdr(req936)));}return if_res413;};var if_res414 = loop935(req933);}var if_res415 = if_res414;}return M0.format(temp418,if_res417,if_res416,if_res415);};var method_adjust931 = function(a937) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part938 = okm_p(proc926);if (or_part938!==false) {var if_res419 = or_part938;} else {var if_res419 = keyword_method_p(proc926);}if (if_res419!==false) {if (M0.zero_p(a937)!==false) {var if_res420 = 0;} else {var if_res420 = M0.sub1(a937);}var if_res421 = if_res420;} else {var if_res421 = a937;}return if_res421;};if (M0.number_p(a929)!==false) {var a939 = method_adjust931(a929);var if_res428 = M0.format($rjs_core.UString.make("~a"),a939);} else {if (M0.arity_at_least_p(a929)!==false) {var a940 = method_adjust931(M0.arity_at_least_value(a929));var if_res427 = M0.format($rjs_core.UString.make("at least ~a"),a940);} else {var if_res427 = $rjs_core.UString.make("a different number");}var if_res428 = if_res427;}if (M0.null_p(req927)!==false) {var if_res426 = $rjs_core.UString.make("");} else {var if_res426 = M0.format($rjs_core.UString.make(" plus ~a"),keywords_desc930($rjs_core.UString.make(""),req927));}if (allowed928!==false) {var loop942 = function(req943, allowed944) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(req943)!==false) {var if_res423 = allowed944;} else {if (M0.eq_p(M0.car(req943),M0.car(allowed944))!==false) {var if_res422 = loop942(M0.cdr(req943),M0.cdr(allowed944));} else {var if_res422 = M0.cons(M0.car(allowed944),loop942(req943,M0.cdr(allowed944)));}var if_res423 = if_res422;}return if_res423;};var others941 = loop942(req927,allowed928);if (M0.null_p(others941)!==false) {var if_res424 = $rjs_core.UString.make("");} else {var if_res424 = M0.format($rjs_core.UString.make(" plus ~a"),keywords_desc930($rjs_core.UString.make("optional "),others941));}var if_res425 = if_res424;} else {var if_res425 = $rjs_core.UString.make(" plus arbitrary keyword arguments");}return M0.string_append(if_res428,if_res426,if_res425);};var let_result429 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,1,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string)),M0.current_inspector(),0);var struct_okp = let_result429.getAt(0);var make_optional_keyword_procedure = let_result429.getAt(1);var okp_p = let_result429.getAt(2);var okp_ref = let_result429.getAt(3);var okp_set_bang_ = let_result429.getAt(4);var let_result430 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,0,0,false,M0.list(M0.cons(M0.prop_method_arity_error,true)));var struct_okm = let_result430.getAt(0);var make_optional_keyword_method = let_result430.getAt(1);var okm_p = let_result430.getAt(2);var okm_ref = let_result430.getAt(3);var okm_set_bang_ = let_result430.getAt(4);var let_result431 = M0.make_struct_type_property($rjs_core.Symbol.make("named-keyword-procedure"));var prop_named_keyword_procedure = let_result431.getAt(0);var named_keyword_procedure_p = let_result431.getAt(1);var keyword_procedure_name_plus_fail = let_result431.getAt(2);var let_result433 = M0.make_struct_type_property($rjs_core.Symbol.make("procedure"),function(v945, info_l946) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.exact_integer_p(v945)!==false) {var if_res432 = M0.make_struct_field_accessor(M0.list_ref(info_l946,3),v945);} else {var if_res432 = false;}return if_res432;});var prop_procedure_accessor = let_result433.getAt(0);var procedure_accessor_p = let_result433.getAt(1);var procedure_accessor_ref = let_result433.getAt(2);var let_result434 = M0.make_struct_type_property($rjs_core.Symbol.make("procedure"),false,M0.list(M0.cons(M0.prop_procedure,M0.values),M0.cons(prop_procedure_accessor,M0.values)),true);var new_prop_procedure = let_result434.getAt(0);var new_procedure_p = let_result434.getAt(1);var new_procedure_ref = let_result434.getAt(2);var let_result435 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v947) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return kpp_ref(v947,0);})));var struct_keyword_procedure_impersonator = let_result435.getAt(0);var make_kpp = let_result435.getAt(1);var keyword_procedure_impersonator_p = let_result435.getAt(2);var kpp_ref = let_result435.getAt(3);var kpp_set_bang_ = let_result435.getAt(4);var let_result436 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v948) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return kmp_ref(v948,0);})));var struct_keyword_method_impersonator = let_result436.getAt(0);var make_kmp = let_result436.getAt(1);var keyword_method_impersonator_p = let_result436.getAt(2);var kmp_ref = let_result436.getAt(3);var kmp_set_bang_ = let_result436.getAt(4);var let_result437 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v949) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return okpp_ref(v949,0);})));var struct_okpp = let_result437.getAt(0);var make_optional_keyword_procedure_impersonator = let_result437.getAt(1);var okpp_p = let_result437.getAt(2);var okpp_ref = let_result437.getAt(3);var okpp_set_bang_ = let_result437.getAt(4);var let_result438 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_okp,1,0,false,M0.list(M0.cons(prop_keyword_impersonator,function(v950) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return okmp_ref(v950,0);})));var struct_okmp = let_result438.getAt(0);var make_optional_keyword_method_impersonator = let_result438.getAt(1);var okmp_p = let_result438.getAt(2);var okmp_ref = let_result438.getAt(3);var okmp_set_bang_ = let_result438.getAt(4);var let_result439 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_procedure_by_arity_error = let_result439.getAt(0);var make_kp_by_ae = let_result439.getAt(1);var kp_by_ae_p = let_result439.getAt(2);var kp_by_ae_ref = let_result439.getAt(3);var kp_by_ae_set_bang_ = let_result439.getAt(4);var let_result440 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_method_by_arity_error = let_result440.getAt(0);var make_km_by_ae = let_result440.getAt(1);var km_by_ae_p = let_result440.getAt(2);var km_by_ae_ref = let_result440.getAt(3);var km_by_ae_set_bang_ = let_result440.getAt(4);var let_result441 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_procedure_impersonator,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_procedure_impersonator_by_arity_error = let_result441.getAt(0);var make_kpi_by_ae = let_result441.getAt(1);var kpi_by_ae_p = let_result441.getAt(2);var kpi_by_ae_ref = let_result441.getAt(3);var kpi_by_ae_set_bang_ = let_result441.getAt(4);var let_result442 = M0.make_struct_type($rjs_core.Symbol.make("procedure"),struct_keyword_method_impersonator,0,0,false,M0.list(M0.cons(M0.prop_arity_string,generate_arity_string),M0.cons(M0.prop_incomplete_arity,true)));var struct_keyword_method_impersonator_by_arity_error = let_result442.getAt(0);var make_kmi_by_ae = let_result442.getAt(1);var kmi_by_ae_p = let_result442.getAt(2);var kmi_by_ae_ref = let_result442.getAt(3);var kmi_by_ae_set_bang_ = let_result442.getAt(4);var make_required = function(name951, fail_proc952, method_p953, impersonator_p954) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part960 = name951;if (or_part960!==false) {var if_res446 = or_part960;} else {var if_res446 = $rjs_core.Symbol.make("unknown");}if (impersonator_p954!==false) {if (method_p953!==false) {var if_res443 = struct_keyword_method_impersonator_by_arity_error;} else {var if_res443 = struct_keyword_procedure_impersonator_by_arity_error;}var if_res445 = if_res443;} else {if (method_p953!==false) {var if_res444 = struct_keyword_method_by_arity_error;} else {var if_res444 = struct_keyword_procedure_by_arity_error;}var if_res445 = if_res444;}var let_result447 = M0.make_struct_type(if_res446,if_res445,0,0,false,M0.list(M0.cons(prop_named_keyword_procedure,M0.cons(name951,fail_proc952))),M0.current_inspector(),fail_proc952);var s_955 = let_result447.getAt(0);var mk956 = let_result447.getAt(1);var __p957 = let_result447.getAt(2);var __ref958 = let_result447.getAt(3);var __set_bang_959 = let_result447.getAt(4);return mk956;};var cl448 = function(proc961) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var proc_name962 = M0.object_name(proc961);var plain_proc963 = $rjs_core.attachProcedureArity(function(...args964451) {var args964 = $rjs_core.Pair.listFromArray(args964451);return M0.apply(proc961,M0.rnull,M0.rnull,args964);});if (M0.symbol_p(proc_name962)!==false) {var if_res452 = M0.__rjs_quoted__.procedure_rename(plain_proc963,proc_name962);} else {var if_res452 = plain_proc963;}return make_keyword_procedure(proc961,if_res452);};var cl449 = function(proc965, plain_proc966) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc965)!==false) {var if_res453 = M0.procedure_arity_mask(proc965);} else {var if_res453 = false;}return make_optional_keyword_procedure(make_keyword_checker(M0.rnull,false,if_res453),proc965,M0.rnull,false,plain_proc966);};var make_keyword_procedure = $rjs_core.attachProcedureArity(function() {var fixed_lam450 = {'1':cl448,'2':cl449}[arguments.length];if (fixed_lam450!==undefined) {return fixed_lam450.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var keyword_apply = $rjs_core.attachProcedureArity(function(proc967, kws968, kw_vals969, normal_args970, ...normal_argss971454) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var normal_argss971 = $rjs_core.Pair.listFromArray(normal_argss971454);var type_error972 = function(what973, which974) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(M0.raise_argument_error,$rjs_core.Symbol.make("keyword-apply"),what973,which974,proc967,kws968,kw_vals969,normal_args970,normal_argss971);};if (M0.procedure_p(proc967)!==false) {var if_res455 = M0.rvoid();} else {var if_res455 = type_error972($rjs_core.UString.make("procedure?"),0);}if_res455;var loop975 = function(ks976) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(ks976)!==false) {var if_res462 = M0.rvoid();} else {var or_part977 = M0.not(M0.pair_p(ks976));if (or_part977!==false) {var if_res456 = or_part977;} else {var if_res456 = M0.not(M0.keyword_p(M0.car(ks976)));}if (if_res456!==false) {var if_res461 = type_error972($rjs_core.UString.make("(listof keyword?)"),1);} else {if (M0.null_p(M0.cdr(ks976))!==false) {var if_res460 = M0.rvoid();} else {var or_part978 = M0.not(M0.pair_p(M0.cdr(ks976)));if (or_part978!==false) {var if_res457 = or_part978;} else {var if_res457 = M0.not(M0.keyword_p(M0.cadr(ks976)));}if (if_res457!==false) {var if_res459 = loop975(M0.cdr(ks976));} else {if (M0.keyword_lt__p(M0.car(ks976),M0.cadr(ks976))!==false) {var if_res458 = loop975(M0.cdr(ks976));} else {var if_res458 = type_error972($rjs_core.UString.make("(and/c (listof? keyword?) sorted? distinct?)"),1);}var if_res459 = if_res458;}var if_res460 = if_res459;}var if_res461 = if_res460;}var if_res462 = if_res461;}return if_res462;};loop975(kws968);if (M0.list_p(kw_vals969)!==false) {var if_res463 = M0.rvoid();} else {var if_res463 = type_error972($rjs_core.UString.make("list?"),2);}if_res463;if (M0.__eq_(M0.length(kws968),M0.length(kw_vals969))!==false) {var if_res464 = M0.rvoid();} else {var if_res464 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword-apply"),$rjs_core.UString.make("keyword list length does not match value list length"),$rjs_core.UString.make("keyword list length"),M0.length(kws968),$rjs_core.UString.make("value list length"),M0.length(kw_vals969),$rjs_core.UString.make("keyword list"),kws968,$rjs_core.UString.make("value list"),kw_vals969);}if_res464;var loop980 = function(normal_argss981, pos982) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(M0.cdr(normal_argss981))!==false) {var l983 = M0.car(normal_argss981);if (M0.list_p(l983)!==false) {var if_res465 = l983;} else {var if_res465 = type_error972($rjs_core.UString.make("list?"),pos982);}var if_res466 = if_res465;} else {var if_res466 = M0.cons(M0.car(normal_argss981),loop980(M0.cdr(normal_argss981),M0.add1(pos982)));}return if_res466;};var normal_args979 = loop980(M0.cons(normal_args970,normal_argss971),3);if (M0.null_p(kws968)!==false) {var if_res467 = M0.apply(proc967,normal_args979);} else {var if_res467 = M0.apply(keyword_procedure_extract_by_method(kws968,2+M0.length(normal_args979),proc967,0),kws968,kw_vals969,normal_args979);}return if_res467;});var procedure_keywords = function(p984) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(p984)!==false) {var if_res472 = M0.values(keyword_procedure_required(p984),keyword_procedure_allowed(p984));} else {if (M0.procedure_p(p984)!==false) {if (new_procedure_p(p984)!==false) {var v985 = new_procedure_ref(p984);if (M0.procedure_p(v985)!==false) {var if_res469 = procedure_keywords(v985);} else {var a986 = procedure_accessor_ref(p984);if (a986!==false) {var if_res468 = procedure_keywords(a986(p984));} else {var if_res468 = M0.values(M0.rnull,M0.rnull);}var if_res469 = if_res468;}var if_res470 = if_res469;} else {var if_res470 = M0.values(M0.rnull,M0.rnull);}var if_res471 = if_res470;} else {var if_res471 = M0.raise_argument_error($rjs_core.Symbol.make("procedure-keywords"),$rjs_core.UString.make("procedure?"),p984);}var if_res472 = if_res471;}return if_res472;};var missing_kw = $rjs_core.attachProcedureArity(function(proc987, ...args988473) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args988 = $rjs_core.Pair.listFromArray(args988473);return M0.apply(keyword_procedure_extract_by_method(M0.rnull,0,proc987,0),M0.rnull,M0.rnull,args988);});var check_kw_args = function(p989, kws990) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop991 = function(kws992, required993, allowed994) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws992)!==false) {if (M0.null_p(required993)!==false) {var if_res474 = M0.values(false,false);} else {var if_res474 = M0.values(M0.car(required993),false);}var if_res483 = if_res474;} else {if (M0.pair_p(required993)!==false) {var if_res475 = M0.eq_p(M0.car(required993),M0.car(kws992));} else {var if_res475 = false;}if (if_res475!==false) {var temp478 = M0.cdr(kws992);var temp477 = M0.cdr(required993);if (allowed994!==false) {var if_res476 = M0.cdr(allowed994);} else {var if_res476 = false;}var if_res482 = loop991(temp478,temp477,if_res476);} else {if (M0.not(allowed994)!==false) {var if_res481 = loop991(M0.cdr(kws992),required993,false);} else {if (M0.pair_p(allowed994)!==false) {if (M0.eq_p(M0.car(allowed994),M0.car(kws992))!==false) {var if_res479 = loop991(M0.cdr(kws992),required993,M0.cdr(allowed994));} else {var if_res479 = loop991(kws992,required993,M0.cdr(allowed994));}var if_res480 = if_res479;} else {var if_res480 = M0.values(false,M0.car(kws992));}var if_res481 = if_res480;}var if_res482 = if_res481;}var if_res483 = if_res482;}return if_res483;};return loop991(kws990,keyword_procedure_required(p989),keyword_procedure_allowed(p989));};var make_keyword_checker = function(req_kws995, allowed_kws996, arity_mask997) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.not(allowed_kws996)!==false) {if (M0.null_p(req_kws995)!==false) {var if_res486 = function(kws998, a999) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (true!==false) {var if_res484 = M0.bitwise_bit_set_p(arity_mask997,a999);} else {var if_res484 = false;}return if_res484;};} else {var if_res486 = function(kws1000, a1001) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subset_p(req_kws995,kws1000)!==false) {var if_res485 = M0.bitwise_bit_set_p(arity_mask997,a1001);} else {var if_res485 = false;}return if_res485;};}var if_res499 = if_res486;} else {if (M0.null_p(allowed_kws996)!==false) {var if_res498 = function(kws1002, a1003) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws1002)!==false) {var if_res487 = M0.bitwise_bit_set_p(arity_mask997,a1003);} else {var if_res487 = false;}return if_res487;};} else {if (M0.null_p(req_kws995)!==false) {var if_res497 = function(kws1004, a1005) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subset_p(kws1004,allowed_kws996)!==false) {var if_res488 = M0.bitwise_bit_set_p(arity_mask997,a1005);} else {var if_res488 = false;}return if_res488;};} else {if (M0.list_p(req_kws995)!==false) {if (M0.list_p(allowed_kws996)!==false) {var if_res489 = M0.eq_p(M0.length(req_kws995),M0.length(allowed_kws996));} else {var if_res489 = false;}var if_res490 = if_res489;} else {var if_res490 = false;}if (if_res490!==false) {var if_res496 = function(kws1006, a1007) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop1008 = function(kws1009, req_kws1010) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(req_kws1010)!==false) {var if_res493 = M0.null_p(kws1009);} else {if (M0.null_p(kws1009)!==false) {var if_res492 = false;} else {if (M0.eq_p(M0.car(kws1009),M0.car(req_kws1010))!==false) {var if_res491 = loop1008(M0.cdr(kws1009),M0.cdr(req_kws1010));} else {var if_res491 = false;}var if_res492 = if_res491;}var if_res493 = if_res492;}return if_res493;};if (loop1008(kws1006,req_kws995)!==false) {var if_res494 = M0.bitwise_bit_set_p(arity_mask997,a1007);} else {var if_res494 = false;}return if_res494;};} else {var if_res496 = function(kws1011, a1012) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (subsets_p(req_kws995,kws1011,allowed_kws996)!==false) {var if_res495 = M0.bitwise_bit_set_p(arity_mask997,a1012);} else {var if_res495 = false;}return if_res495;};}var if_res497 = if_res496;}var if_res498 = if_res497;}var if_res499 = if_res498;}return if_res499;};var subset_p = function(l11013, l21014) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l11013)!==false) {var if_res502 = true;} else {if (M0.null_p(l21014)!==false) {var if_res501 = false;} else {if (M0.eq_p(M0.car(l11013),M0.car(l21014))!==false) {var if_res500 = subset_p(M0.cdr(l11013),M0.cdr(l21014));} else {var if_res500 = subset_p(l11013,M0.cdr(l21014));}var if_res501 = if_res500;}var if_res502 = if_res501;}return if_res502;};var subsets_p = function(l11015, l21016, l31017) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l11015)!==false) {var if_res507 = subset_p(l21016,l31017);} else {if (M0.null_p(l21016)!==false) {var if_res506 = false;} else {if (M0.null_p(l31017)!==false) {var if_res505 = false;} else {var v21018 = M0.car(l21016);if (M0.eq_p(M0.car(l11015),v21018)!==false) {var if_res504 = subsets_p(M0.cdr(l11015),M0.cdr(l21016),M0.cdr(l31017));} else {if (M0.eq_p(v21018,M0.car(l31017))!==false) {var if_res503 = subsets_p(l11015,M0.cdr(l21016),M0.cdr(l31017));} else {var if_res503 = subsets_p(l11015,l21016,M0.cdr(l31017));}var if_res504 = if_res503;}var if_res505 = if_res504;}var if_res506 = if_res505;}var if_res507 = if_res506;}return if_res507;};var keyword_procedure_extract_by_method = function(kws1019, n1020, p1021, method_n1022) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(p1021)!==false) {var if_res508 = keyword_procedure_checker(p1021)(kws1019,n1020);} else {var if_res508 = false;}if (if_res508!==false) {var if_res536 = keyword_procedure_proc(p1021);} else {if (M0.not(keyword_procedure_p(p1021))!==false) {if (M0.procedure_p(p1021)!==false) {if (new_procedure_p(p1021)!==false) {var a1025 = procedure_accessor_ref(p1021);if (a1025!==false) {var if_res509 = a1025(p1021);} else {var if_res509 = false;}var if_res510 = if_res509;} else {var if_res510 = false;}var or_part1024 = if_res510;if (or_part1024!==false) {var if_res513 = or_part1024;} else {var or_part1026 = M0.procedure_extract_target(p1021);if (or_part1026!==false) {var if_res512 = or_part1026;} else {if (new_procedure_p(p1021)!==false) {var if_res511 = $rjs_core.Symbol.make("method");} else {var if_res511 = false;}var if_res512 = if_res511;}var if_res513 = if_res512;}var if_res514 = if_res513;} else {var if_res514 = false;}var if_res515 = if_res514;} else {var if_res515 = false;}var p21023 = if_res515;if (p21023!==false) {if (M0.eq_p(p21023,$rjs_core.Symbol.make("method"))!==false) {var p31027 = keyword_procedure_extract_by_method(kws1019,M0.add1(n1020),new_procedure_ref(p1021),M0.add1(method_n1022));var if_res517 = $rjs_core.attachProcedureArity(function(kws1028, kw_args1029, ...args1030516) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args1030 = $rjs_core.Pair.listFromArray(args1030516);return M0.apply(p31027,kws1028,kw_args1029,M0.cons(p1021,args1030));});} else {var if_res517 = keyword_procedure_extract_by_method(kws1019,n1020,p21023,method_n1022);}var if_res535 = if_res517;} else {var if_res535 = $rjs_core.attachProcedureArity(function(kws1031, kw_args1032, ...args1033518) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args1033 = $rjs_core.Pair.listFromArray(args1033518);if (keyword_procedure_p(p1021)!==false) {var if_res519 = check_kw_args(p1021,kws1031);} else {var if_res519 = M0.values(false,M0.car(kws1031));}var let_result520 = if_res519;var missing_kw1034 = let_result520.getAt(0);var extra_kw1035 = let_result520.getAt(1);var or_part1040 = keyword_method_p(p1021);if (or_part1040!==false) {var if_res521 = or_part1040;} else {var if_res521 = okm_p(p1021);}if (if_res521!==false) {var if_res522 = 1;} else {var if_res522 = 0;}var method_n1039 = method_n1022+if_res522;if (M0.__gt__eq_(n1020,method_n1039)!==false) {var if_res523 = n1020-method_n1039;} else {var if_res523 = n1020;}var n1036 = if_res523;if (M0.null_p(args1033)!==false) {var if_res524 = M0.null_p(kws1031);} else {var if_res524 = false;}if (if_res524!==false) {var if_res525 = $rjs_core.UString.make("");} else {var if_res525 = M0.apply(M0.string_append,$rjs_core.UString.make("\n  arguments...:"),M0.append(M0.map(function(v1041) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.format($rjs_core.UString.make("\n   ~e"),v1041);},args1033),M0.map(function(kw1042, kw_arg1043) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.format($rjs_core.UString.make("\n   ~a ~e"),kw1042,kw_arg1043);},kws1031,kw_args1032)));}var args_str1037 = if_res525;var proc_name1038 = function(p1044) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (named_keyword_procedure_p(p1044)!==false) {var if_res526 = M0.car(keyword_procedure_name_plus_fail(p1044));} else {var if_res526 = false;}var or_part1045 = if_res526;if (or_part1045!==false) {var if_res528 = or_part1045;} else {var or_part1046 = M0.object_name(p1044);if (or_part1046!==false) {var if_res527 = or_part1046;} else {var if_res527 = p1044;}var if_res528 = if_res527;}return if_res528;};if (extra_kw1035!==false) {if (keyword_procedure_p(p1021)!==false) {var if_res530 = M0.format(M0.string_append($rjs_core.UString.make("application: procedure does not expect an argument with given keyword\n"),$rjs_core.UString.make("  procedure: ~a\n"),$rjs_core.UString.make("  given keyword: ~a"),$rjs_core.UString.make("~a")),proc_name1038(p1021),extra_kw1035,args_str1037);} else {if (M0.procedure_p(p1021)!==false) {var if_res529 = M0.format(M0.string_append($rjs_core.UString.make("application: procedure does not accept keyword arguments\n"),$rjs_core.UString.make("  procedure: ~a"),$rjs_core.UString.make("~a")),proc_name1038(p1021),args_str1037);} else {var if_res529 = M0.format(M0.string_append($rjs_core.UString.make("application: not a procedure;\n"),$rjs_core.UString.make(" expected a procedure that can be applied to arguments\n"),$rjs_core.UString.make("  given: ~e"),$rjs_core.UString.make("~a")),p1021,args_str1037);}var if_res530 = if_res529;}var if_res534 = if_res530;} else {if (missing_kw1034!==false) {var if_res533 = M0.format(M0.string_append($rjs_core.UString.make("application: required keyword argument not supplied\n"),$rjs_core.UString.make("  procedure: ~a\n"),$rjs_core.UString.make("  required keyword: ~a"),$rjs_core.UString.make("~a")),proc_name1038(p1021),missing_kw1034,args_str1037);} else {var temp532 = M0.string_append($rjs_core.UString.make("application: no case matching ~a non-keyword argument~a\n"),$rjs_core.UString.make("  procedure: ~a"),$rjs_core.UString.make("~a"));if (M0.__eq_(1,n1036-2)!==false) {var if_res531 = $rjs_core.UString.make("");} else {var if_res531 = $rjs_core.UString.make("s");}var if_res533 = M0.format(temp532,n1036-2,if_res531,proc_name1038(p1021),args_str1037);}var if_res534 = if_res533;}return M0.raise(M0.__rjs_quoted__.exn_fail_contract(if_res534,M0.current_continuation_marks()));});}var if_res536 = if_res535;}return if_res536;};var keyword_procedure_extract = function(p1047, kws1048, n1049) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return keyword_procedure_extract_by_method(kws1048,n1049,p1047,0);};var cl537 = function(proc1050, arity1051, req_kw1052, allowed_kw1053, name1054) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity"),proc1050,arity1051,false,name1054,req_kw1052,allowed_kw1053);};var cl538 = function(proc1055, arity1056, req_kw1057, allowed_kw1058) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity"),proc1055,arity1056,false,false,req_kw1057,allowed_kw1058);};var procedure_reduce_keyword_arity = $rjs_core.attachProcedureArity(function() {var fixed_lam539 = {'5':cl537,'4':cl538}[arguments.length];if (fixed_lam539!==undefined) {return fixed_lam539.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[4,5]);var cl540 = function(proc1059, mask1060, req_kw1061, allowed_kw1062, name1063) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity-mask"),proc1059,false,mask1060,name1063,req_kw1061,allowed_kw1062);};var cl541 = function(proc1064, mask1065, req_kw1066, allowed_kw1067) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_procedure_reduce_keyword_arity($rjs_core.Symbol.make("procedure-reduce-keyword-arity-mask"),proc1064,false,mask1065,false,req_kw1066,allowed_kw1067);};var procedure_reduce_keyword_arity_mask = $rjs_core.attachProcedureArity(function() {var fixed_lam542 = {'5':cl540,'4':cl541}[arguments.length];if (fixed_lam542!==undefined) {return fixed_lam542.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[4,5]);var do_procedure_reduce_keyword_arity = function(who1068, proc1069, arity1070, mask1071, name1072, req_kw1073, allowed_kw1074) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (okp_p(proc1069)!==false) {var if_res543 = okp_ref(proc1069,0);} else {var if_res543 = proc1069;}var p1076 = if_res543;if (arity1070!==false) {var if_res544 = M0.__rjs_quoted__.procedure_reduce_arity(p1076,arity1070);} else {var if_res544 = M0.__rjs_quoted__.procedure_reduce_arity_mask(p1076,mask1071,name1072);}var plain_proc1075 = if_res544;var sorted_p1077 = function(kws1078) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop1079 = function(kws1080) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(kws1080)!==false) {var if_res547 = true;} else {if (M0.null_p(M0.cdr(kws1080))!==false) {var if_res546 = true;} else {if (M0.keyword_lt__p(M0.car(kws1080),M0.cadr(kws1080))!==false) {var if_res545 = loop1079(M0.cdr(kws1080));} else {var if_res545 = false;}var if_res546 = if_res545;}var if_res547 = if_res546;}return if_res547;};return loop1079(kws1078);};if (M0.list_p(req_kw1073)!==false) {if (M0.andmap(M0.keyword_p,req_kw1073)!==false) {var if_res548 = sorted_p1077(req_kw1073);} else {var if_res548 = false;}var if_res549 = if_res548;} else {var if_res549 = false;}if (if_res549!==false) {var if_res552 = M0.rvoid();} else {var temp551 = $rjs_core.UString.make("(and/c (listof? keyword?) sorted? distinct?)");var or_part1081 = arity1070;if (or_part1081!==false) {var if_res550 = or_part1081;} else {var if_res550 = mask1071;}var if_res552 = M0.raise_argument_error(who1068,temp551,2,proc1069,if_res550,req_kw1073,allowed_kw1074);}if_res552;if (allowed_kw1074!==false) {if (M0.list_p(allowed_kw1074)!==false) {if (M0.andmap(M0.keyword_p,allowed_kw1074)!==false) {var if_res553 = sorted_p1077(allowed_kw1074);} else {var if_res553 = false;}var if_res554 = if_res553;} else {var if_res554 = false;}if (if_res554!==false) {var if_res557 = M0.rvoid();} else {var temp556 = $rjs_core.UString.make("(or/c (and/c (listof? keyword?) sorted? distinct?) #f)");var or_part1082 = arity1070;if (or_part1082!==false) {var if_res555 = or_part1082;} else {var if_res555 = mask1071;}var if_res557 = M0.raise_argument_error(who1068,temp556,3,proc1069,if_res555,req_kw1073,allowed_kw1074);}if_res557;if (subset_p(req_kw1073,allowed_kw1074)!==false) {var if_res558 = M0.rvoid();} else {var if_res558 = M0.raise_arguments_error(who1068,$rjs_core.UString.make("allowed-keyword list does not include all required keywords"),$rjs_core.UString.make("allowed-keyword list"),allowed_kw1074,$rjs_core.UString.make("required keywords"),req_kw1073);}var if_res559 = if_res558;} else {var if_res559 = M0.rvoid();}if_res559;var let_result560 = procedure_keywords(proc1069);var old_req1083 = let_result560.getAt(0);var old_allowed1084 = let_result560.getAt(1);if (subset_p(old_req1083,req_kw1073)!==false) {var if_res561 = M0.rvoid();} else {var if_res561 = M0.raise_arguments_error(who1068,$rjs_core.UString.make("cannot reduce required keyword set"),$rjs_core.UString.make("required keywords"),old_req1083,$rjs_core.UString.make("requested required keywords"),req_kw1073);}if_res561;if (old_allowed1084!==false) {if (subset_p(req_kw1073,old_allowed1084)!==false) {var if_res562 = M0.rvoid();} else {var if_res562 = M0.raise_arguments_error(who1068,$rjs_core.UString.make("cannot require keywords not in original allowed set"),$rjs_core.UString.make("original allowed keywords"),old_allowed1084,$rjs_core.UString.make("requested required keywords"),req_kw1073);}if_res562;var or_part1085 = M0.not(allowed_kw1074);if (or_part1085!==false) {var if_res563 = or_part1085;} else {var if_res563 = subset_p(allowed_kw1074,old_allowed1084);}if (if_res563!==false) {var if_res564 = M0.rvoid();} else {var if_res564 = M0.raise_arguments_error(who1068,$rjs_core.UString.make("cannot allow keywords not in original allowed set"),$rjs_core.UString.make("original allowed keywords"),old_allowed1084,$rjs_core.UString.make("requested allowed keywords"),allowed_kw1074);}var if_res565 = if_res564;} else {var if_res565 = M0.rvoid();}if_res565;if (M0.null_p(allowed_kw1074)!==false) {var if_res573 = plain_proc1075;} else {var or_part1087 = mask1071;if (or_part1087!==false) {var if_res566 = or_part1087;} else {var if_res566 = arity__gt_mask(arity1070);}var mask1086 = if_res566;var new_mask1088 = M0.arithmetic_shift(mask1086,2);var kw_checker1089 = make_keyword_checker(req_kw1073,allowed_kw1074,new_mask1088);var proc1090 = normalize_proc(proc1069);var new_kw_proc1091 = M0.__rjs_quoted__.procedure_reduce_arity_mask(keyword_procedure_proc(proc1090),new_mask1088);if (M0.null_p(req_kw1073)!==false) {if (okm_p(proc1090)!==false) {var if_res567 = make_optional_keyword_method;} else {var if_res567 = make_optional_keyword_procedure;}var if_res572 = if_res567(kw_checker1089,new_kw_proc1091,req_kw1073,allowed_kw1074,plain_proc1075);} else {if (named_keyword_procedure_p(proc1090)!==false) {var if_res570 = M0.car(keyword_procedure_name_plus_fail(proc1090));} else {var if_res570 = false;}var or_part1092 = if_res570;if (or_part1092!==false) {var if_res571 = or_part1092;} else {var if_res571 = M0.object_name(proc1090);}var temp569 = M0.__rjs_quoted__.procedure_reduce_arity_mask(missing_kw,M0.arithmetic_shift(mask1086,1));var or_part1093 = okm_p(proc1090);if (or_part1093!==false) {var if_res568 = or_part1093;} else {var if_res568 = keyword_method_p(proc1090);}var if_res572 = make_required(if_res571,temp569,if_res568,false)(kw_checker1089,new_kw_proc1091,req_kw1073,allowed_kw1074);}var if_res573 = if_res572;}return if_res573;};var arity__gt_mask = function(a1094) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.exact_nonnegative_integer_p(a1094)!==false) {var if_res579 = M0.arithmetic_shift(1,a1094);} else {if (M0.arity_at_least_p(a1094)!==false) {var if_res578 = M0.__rjs_quoted__.bitwise_xor(-1,M0.sub1(M0.arithmetic_shift(1,M0.arity_at_least_value(a1094))));} else {if (M0.list_p(a1094)!==false) {var loop1095 = function(mask1096, l1097) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l1097)!==false) {var if_res576 = mask1096;} else {var a1098 = M0.car(l1097);var or_part1099 = M0.exact_nonnegative_integer_p(a1098);if (or_part1099!==false) {var if_res574 = or_part1099;} else {var if_res574 = M0.arity_at_least_p(a1098);}if (if_res574!==false) {var if_res575 = loop1095(M0.__rjs_quoted__.bitwise_ior(mask1096,arity__gt_mask(a1098)),M0.cdr(l1097));} else {var if_res575 = false;}var if_res576 = if_res575;}return if_res576;};var if_res577 = loop1095(0,a1094);} else {var if_res577 = false;}var if_res578 = if_res577;}var if_res579 = if_res578;}return if_res579;};var cl580 = function(proc1101, arity1102, name1103) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc1101)!==false) {var let_result583 = procedure_keywords(proc1101);var req1104 = let_result583.getAt(0);var allows1105 = let_result583.getAt(1);if (M0.pair_p(req1104)!==false) {var if_res584 = M0.not(M0.null_p(arity1102));} else {var if_res584 = false;}var if_res585 = if_res584;} else {var if_res585 = false;}if (if_res585!==false) {var if_res587 = M0.raise_arguments_error($rjs_core.Symbol.make("procedure-reduce-arity"),$rjs_core.UString.make("procedure has required keyword arguments"),$rjs_core.UString.make("procedure"),proc1101);} else {if (okm_p(proc1101)!==false) {var if_res586 = M0.__rjs_quoted__.procedure__gt_method(proc1101);} else {var if_res586 = proc1101;}var if_res587 = M0.__rjs_quoted__.procedure_reduce_arity(if_res586,arity1102,name1103);}return if_res587;};var cl581 = function(proc1106, arity1107) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new_procedure_reduce_arity(proc1106,arity1107,false);};var procedure_reduce_arity1100 = $rjs_core.attachProcedureArity(function() {var fixed_lam582 = {'3':cl580,'2':cl581}[arguments.length];if (fixed_lam582!==undefined) {return fixed_lam582.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3]);var new_procedure_reduce_arity = procedure_reduce_arity1100;var cl588 = function(proc1109, mask1110, name1111) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_p(proc1109)!==false) {var let_result591 = procedure_keywords(proc1109);var req1112 = let_result591.getAt(0);var allows1113 = let_result591.getAt(1);if (M0.pair_p(req1112)!==false) {var if_res592 = M0.not(M0.eqv_p(mask1110,0));} else {var if_res592 = false;}var if_res593 = if_res592;} else {var if_res593 = false;}if (if_res593!==false) {var if_res595 = M0.raise_arguments_error($rjs_core.Symbol.make("procedure-reduce-arity"),$rjs_core.UString.make("procedure has required keyword arguments"),$rjs_core.UString.make("procedure"),proc1109);} else {if (okm_p(proc1109)!==false) {var if_res594 = M0.__rjs_quoted__.procedure__gt_method(proc1109);} else {var if_res594 = proc1109;}var if_res595 = M0.__rjs_quoted__.procedure_reduce_arity_mask(if_res594,mask1110,name1111);}return if_res595;};var cl589 = function(proc1114, mask1115) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new_procedure_reduce_arity_mask(proc1114,mask1115,false);};var procedure_reduce_arity1108 = $rjs_core.attachProcedureArity(function() {var fixed_lam590 = {'3':cl588,'2':cl589}[arguments.length];if (fixed_lam590!==undefined) {return fixed_lam590.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3]);var new_procedure_reduce_arity_mask = procedure_reduce_arity1108;var procedure__gt_method1116 = function(proc1117) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var proc1118 = normalize_proc(proc1117);if (keyword_procedure_p(proc1118)!==false) {if (okm_p(proc1118)!==false) {var if_res598 = proc1118;} else {if (keyword_method_p(proc1118)!==false) {var if_res597 = proc1118;} else {if (okp_p(proc1118)!==false) {var if_res596 = make_optional_keyword_method(keyword_procedure_checker(proc1118),keyword_procedure_proc(proc1118),keyword_procedure_required(proc1118),keyword_procedure_allowed(proc1118),okp_ref(proc1118,0));} else {var name_plus_fail1119 = keyword_procedure_name_plus_fail(proc1118);var mk1120 = make_required(M0.car(name_plus_fail1119),M0.cdr(name_plus_fail1119),true,false);var if_res596 = mk1120(keyword_procedure_checker(proc1118),keyword_procedure_proc(proc1118),keyword_procedure_required(proc1118),keyword_procedure_allowed(proc1118));}var if_res597 = if_res596;}var if_res598 = if_res597;}var if_res599 = if_res598;} else {var if_res599 = M0.__rjs_quoted__.procedure__gt_method(proc1118);}return if_res599;};var new_procedure__gt_method = procedure__gt_method1116;var procedure_rename1121 = function(proc1122, name1123) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(proc1122)!==false) {var if_res600 = M0.symbol_p(name1123);} else {var if_res600 = false;}if (M0.not(if_res600)!==false) {var if_res603 = M0.__rjs_quoted__.procedure_rename(proc1122,name1123);} else {if (okp_p(proc1122)!==false) {if (okm_p(proc1122)!==false) {var if_res601 = make_optional_keyword_method;} else {var if_res601 = make_optional_keyword_procedure;}var if_res602 = if_res601(keyword_procedure_checker(proc1122),keyword_procedure_proc(proc1122),keyword_procedure_required(proc1122),keyword_procedure_allowed(proc1122),M0.__rjs_quoted__.procedure_rename(okp_ref(proc1122,0),name1123));} else {var name_plus_fail1124 = keyword_procedure_name_plus_fail(proc1122);var mk1125 = make_required(name1123,M0.cdr(name_plus_fail1124),keyword_method_p(proc1122),false);var if_res602 = mk1125(keyword_procedure_checker(proc1122),keyword_procedure_proc(proc1122),keyword_procedure_required(proc1122),keyword_procedure_allowed(proc1122));}var if_res603 = if_res602;}return if_res603;};var new_procedure_rename = procedure_rename1121;var chaperone_procedure1126 = $rjs_core.attachProcedureArity(function(proc1127, wrap_proc1128, ...props1129604) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1129 = $rjs_core.Pair.listFromArray(props1129604);return do_chaperone_procedure(false,false,M0.__rjs_quoted__.chaperone_procedure,$rjs_core.Symbol.make("chaperone-procedure"),proc1127,wrap_proc1128,props1129);});var new_chaperone_procedure = chaperone_procedure1126;var unsafe_chaperone_procedure1130 = $rjs_core.attachProcedureArity(function(proc1131, wrap_proc1132, ...props1133605) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1133 = $rjs_core.Pair.listFromArray(props1133605);return do_unsafe_chaperone_procedure(M1.__rjs_quoted__.unsafe_chaperone_procedure,$rjs_core.Symbol.make("unsafe-chaperone-procedure"),proc1131,wrap_proc1132,props1133);});var new_unsafe_chaperone_procedure = unsafe_chaperone_procedure1130;var impersonate_procedure1134 = $rjs_core.attachProcedureArity(function(proc1135, wrap_proc1136, ...props1137606) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1137 = $rjs_core.Pair.listFromArray(props1137606);return do_chaperone_procedure(true,false,M0.__rjs_quoted__.impersonate_procedure,$rjs_core.Symbol.make("impersonate-procedure"),proc1135,wrap_proc1136,props1137);});var new_impersonate_procedure = impersonate_procedure1134;var unsafe_impersonate_procedure1138 = $rjs_core.attachProcedureArity(function(proc1139, wrap_proc1140, ...props1141607) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1141 = $rjs_core.Pair.listFromArray(props1141607);return do_unsafe_chaperone_procedure(M1.__rjs_quoted__.unsafe_impersonate_procedure,$rjs_core.Symbol.make("unsafe-impersonate-procedure"),proc1139,wrap_proc1140,props1141);});var new_unsafe_impersonate_procedure = unsafe_impersonate_procedure1138;var chaperone_procedure_times_1142 = $rjs_core.attachProcedureArity(function(proc1143, wrap_proc1144, ...props1145608) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1145 = $rjs_core.Pair.listFromArray(props1145608);return do_chaperone_procedure(false,true,M0.__rjs_quoted__.chaperone_procedure_times_,$rjs_core.Symbol.make("chaperone-procedure"),proc1143,wrap_proc1144,props1145);});var new_chaperone_procedure_times_ = chaperone_procedure_times_1142;var impersonate_procedure_times_1146 = $rjs_core.attachProcedureArity(function(proc1147, wrap_proc1148, ...props1149609) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var props1149 = $rjs_core.Pair.listFromArray(props1149609);return do_chaperone_procedure(true,true,M0.__rjs_quoted__.impersonate_procedure_times_,$rjs_core.Symbol.make("impersonate-procedure"),proc1147,wrap_proc1148,props1149);});var new_impersonate_procedure_times_ = impersonate_procedure_times_1146;var do_chaperone_procedure = function(is_impersonator_p1150, self_arg_p1151, chaperone_procedure1152, name1153, proc1154, wrap_proc1155, props1156) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}var n_proc1157 = normalize_proc(proc1154);var n_wrap_proc1158 = normalize_proc(wrap_proc1155);var or_part1159 = M0.not(keyword_procedure_p(n_proc1157));if (or_part1159!==false) {var if_res611 = or_part1159;} else {var or_part1160 = M0.not(M0.procedure_p(wrap_proc1155));if (or_part1160!==false) {var if_res610 = or_part1160;} else {var if_res610 = bad_props_p(props1156);}var if_res611 = if_res610;}if (if_res611!==false) {var if_res675 = M0.apply(chaperone_procedure1152,proc1154,wrap_proc1155,props1156);} else {chaperone_arity_match_checking(self_arg_p1151,name1153,proc1154,wrap_proc1155,props1156);var p1162 = keyword_procedure_proc(n_wrap_proc1158);if (self_arg_p1151!==false) {var cl612 = $rjs_core.attachProcedureArity(function(self_proc1163, kws1164, args1165, ...rest1166617) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var rest1166 = $rjs_core.Pair.listFromArray(rest1166617);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(p1162,kws1164,args1165,self_proc1163,rest1166);},$rjs_core.attachProcedureArity(function(...results1167618) {var results1167 = $rjs_core.Pair.listFromArray(results1167618);var len1168 = M0.length(results1167);var alen1169 = M0.length(rest1166);if (M0.__lt_(len1168,alen1169+1)!==false) {var if_res619 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),$rjs_core.UString.make("wrong number of results from wrapper procedure"),$rjs_core.UString.make("expected minimum number of results"),alen1169+1,$rjs_core.UString.make("received number of results"),len1168,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);} else {var if_res619 = M0.rvoid();}if_res619;var num_extra1170 = len1168-(alen1169+1);var new_args1171 = M0.list_ref(results1167,num_extra1170);if (M0.list_p(new_args1171)!==false) {var if_res620 = M0.__eq_(M0.length(new_args1171),M0.length(args1165));} else {var if_res620 = false;}if (if_res620!==false) {var if_res624 = M0.rvoid();} else {var temp623 = $rjs_core.Symbol.make("keyword procedure chaperone");var temp622 = $rjs_core.UString.make("expected a list of keyword-argument values as first result~a from wrapper procedure");if (M0.__eq_(len1168,alen1169)!==false) {var if_res621 = $rjs_core.UString.make("");} else {var if_res621 = $rjs_core.UString.make(" (after the result-wrapper procedure or mark specifications)");}var if_res624 = M0.raise_arguments_error(temp623,M0.format(temp622,if_res621),$rjs_core.UString.make("first result"),new_args1171,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);}if_res624;M0.for_each(function(kw1172, new_arg1173, arg1174) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p1150!==false) {var if_res626 = M0.rvoid();} else {if (M0.__rjs_quoted__.chaperone_of_p(new_arg1173,arg1174)!==false) {var if_res625 = M0.rvoid();} else {var if_res625 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),M0.format($rjs_core.UString.make("~a keyword result is not a chaperone of original argument from chaperoning procedure"),kw1172),$rjs_core.UString.make("result"),new_arg1173,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);}var if_res626 = if_res625;}return if_res626;},kws1164,new_args1171,args1165);var tmp1175 = num_extra1170;if (M0.equal_p(tmp1175,0)!==false) {var if_res629 = M0.apply(M0.values,kws1164,results1167);} else {if (M0.equal_p(tmp1175,1)!==false) {var if_res628 = M0.apply(M0.values,M0.car(results1167),kws1164,M0.cdr(results1167));} else {var loop1176 = function(results1177, c1178) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(c1178)!==false) {var if_res627 = M0.cons(kws1164,results1177);} else {var if_res627 = M0.cons(M0.car(results1177),loop1176(M0.cdr(results1177),M0.sub1(c1178)));}return if_res627;};var if_res628 = M0.apply(M0.values,loop1176(results1167,num_extra1170));}var if_res629 = if_res628;}return if_res629;}));});var cl613 = $rjs_core.attachProcedureArity(function(...other1179630) {var other1179 = $rjs_core.Pair.listFromArray(other1179630);return M0.error($rjs_core.UString.make("shouldn't get here"));});var if_res650 = $rjs_core.attachProcedureArity(function() {var fixed_lam614 = {}[arguments.length];if (fixed_lam614!==undefined) {return fixed_lam614.apply(null,arguments);} else {if (M0.__gt__eq_(cl612.length,1)!==false) {var if_res616 = cl612.apply(null,arguments);} else {if (true!==false) {var if_res615 = cl613.apply(null,arguments);} else {var if_res615 = M0.error($rjs_core.UString.make("case-lambda: invalid case"));}var if_res616 = if_res615;}return if_res616;}},[M0.make_arity_at_least(0)]);} else {var cl631 = $rjs_core.attachProcedureArity(function(kws1180, args1181, ...rest1182636) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var rest1182 = $rjs_core.Pair.listFromArray(rest1182636);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(p1162,kws1180,args1181,rest1182);},$rjs_core.attachProcedureArity(function(...results1183637) {var results1183 = $rjs_core.Pair.listFromArray(results1183637);var len1184 = M0.length(results1183);var alen1185 = M0.length(rest1182);if (M0.__lt_(len1184,alen1185+1)!==false) {var if_res638 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),$rjs_core.UString.make("wrong number of results from wrapper procedure"),$rjs_core.UString.make("expected minimum number of results"),alen1185+1,$rjs_core.UString.make("received number of results"),len1184,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);} else {var if_res638 = M0.rvoid();}if_res638;var num_extra1186 = len1184-(alen1185+1);var new_args1187 = M0.list_ref(results1183,num_extra1186);if (M0.list_p(new_args1187)!==false) {var if_res639 = M0.__eq_(M0.length(new_args1187),M0.length(args1181));} else {var if_res639 = false;}if (if_res639!==false) {var if_res643 = M0.rvoid();} else {var temp642 = $rjs_core.Symbol.make("keyword procedure chaperone");var temp641 = $rjs_core.UString.make("expected a list of keyword-argument values as first result~a from wrapper procedure");if (M0.__eq_(len1184,alen1185)!==false) {var if_res640 = $rjs_core.UString.make("");} else {var if_res640 = $rjs_core.UString.make(" (after the result-wrapper procedure or mark specifications)");}var if_res643 = M0.raise_arguments_error(temp642,M0.format(temp641,if_res640),$rjs_core.UString.make("first result"),new_args1187,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);}if_res643;M0.for_each(function(kw1188, new_arg1189, arg1190) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p1150!==false) {var if_res645 = M0.rvoid();} else {if (M0.__rjs_quoted__.chaperone_of_p(new_arg1189,arg1190)!==false) {var if_res644 = M0.rvoid();} else {var if_res644 = M0.raise_arguments_error($rjs_core.Symbol.make("keyword procedure chaperone"),M0.format($rjs_core.UString.make("~a keyword result is not a chaperone of original argument from chaperoning procedure"),kw1188),$rjs_core.UString.make("result"),new_arg1189,$rjs_core.UString.make("wrapper procedure"),wrap_proc1155);}var if_res645 = if_res644;}return if_res645;},kws1180,new_args1187,args1181);var tmp1191 = num_extra1186;if (M0.equal_p(tmp1191,0)!==false) {var if_res648 = M0.apply(M0.values,kws1180,results1183);} else {if (M0.equal_p(tmp1191,1)!==false) {var if_res647 = M0.apply(M0.values,M0.car(results1183),kws1180,M0.cdr(results1183));} else {var loop1192 = function(results1193, c1194) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(c1194)!==false) {var if_res646 = M0.cons(kws1180,results1193);} else {var if_res646 = M0.cons(M0.car(results1193),loop1192(M0.cdr(results1193),M0.sub1(c1194)));}return if_res646;};var if_res647 = M0.apply(M0.values,loop1192(results1183,num_extra1186));}var if_res648 = if_res647;}return if_res648;}));});var cl632 = $rjs_core.attachProcedureArity(function(...other1195649) {var other1195 = $rjs_core.Pair.listFromArray(other1195649);return M0.error($rjs_core.UString.make("shouldn't get here"));});var if_res650 = $rjs_core.attachProcedureArity(function() {var fixed_lam633 = {}[arguments.length];if (fixed_lam633!==undefined) {return fixed_lam633.apply(null,arguments);} else {if (M0.__gt__eq_(cl631.length,1)!==false) {var if_res635 = cl631.apply(null,arguments);} else {if (true!==false) {var if_res634 = cl632.apply(null,arguments);} else {var if_res634 = M0.error($rjs_core.UString.make("case-lambda: invalid case"));}var if_res635 = if_res634;}return if_res635;}},[M0.make_arity_at_least(0)]);}var kw_chaperone1161 = if_res650;var wrap1198 = function(proc1199, n_proc1200) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.not(M0.eq_p(n_proc1200,proc1199))!==false) {var if_res651 = new_procedure_p(proc1199);} else {var if_res651 = false;}if (if_res651!==false) {var v1201 = new_procedure_ref(proc1199);if (M0.exact_integer_p(v1201)!==false) {var acc1202 = procedure_accessor_ref(proc1199);var if_res667 = M0.values(M0.__rjs_quoted__.chaperone_struct(proc1199,acc1202,function(self1203, sub_proc1204) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var let_result652 = wrap1198(sub_proc1204,normalize_proc(sub_proc1204));var f1205 = let_result652.getAt(0);var acc1206 = let_result652.getAt(1);return f1205;}),acc1202);} else {if (is_impersonator_p1150!==false) {var if_res666 = M0.__rjs_quoted__.impersonate_struct;} else {var if_res666 = M0.__rjs_quoted__.chaperone_struct;}if (okp_p(n_proc1200)!==false) {var if_res665 = chaperone_procedure1152(proc1199,wrap_proc1155);} else {var if_res665 = proc1199;}var new_kw_proc1207 = if_res666(if_res665,new_procedure_ref,function(self1208, proc1209) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (is_impersonator_p1150!==false) {var if_res664 = new_impersonate_procedure;} else {var if_res664 = new_chaperone_procedure;}if (self_arg_p1151!==false) {var if_res663 = $rjs_core.attachProcedureArity(function(proc_self1210, kws1211, kw_args1212, self1213, ...args1214653) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args1214 = $rjs_core.Pair.listFromArray(args1214653);var len1215 = M0.length(args1214);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(kw_chaperone1161,proc_self1210,kws1211,kw_args1212,args1214);},$rjs_core.attachProcedureArity(function(...results1216654) {var results1216 = $rjs_core.Pair.listFromArray(results1216654);var r_len1217 = M0.length(results1216);var list_take1218 = function(l1219, n1220) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(n1220)!==false) {var if_res655 = M0.rnull;} else {var if_res655 = M0.cons(M0.car(l1219),list_take1218(M0.cdr(l1219),M0.sub1(n1220)));}return if_res655;};if (M0.null_p($rjs_core.Pair.makeList($rjs_core.Symbol.make("proc-self")))!==false) {var if_res656 = M0.__eq_(r_len1217,2+len1215);} else {var if_res656 = false;}if (if_res656!==false) {var if_res657 = M0.apply(M0.values,M0.cadr(results1216),self1213,M0.cddr(results1216));} else {var skip1221 = r_len1217-len1215;var if_res657 = M0.apply(M0.values,M0.append(list_take1218(results1216,skip1221-2),M0.list(M0.list_ref(results1216,M0.sub1(skip1221)),self1213),M0.__rjs_quoted__.list_tail(results1216,skip1221)));}return if_res657;}));});} else {var if_res663 = $rjs_core.attachProcedureArity(function(kws1222, kw_args1223, self1224, ...args1225658) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var args1225 = $rjs_core.Pair.listFromArray(args1225658);var len1226 = M0.length(args1225);return M0.call_with_values(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.apply(kw_chaperone1161,kws1222,kw_args1223,args1225);},$rjs_core.attachProcedureArity(function(...results1227659) {var results1227 = $rjs_core.Pair.listFromArray(results1227659);var r_len1228 = M0.length(results1227);var list_take1229 = function(l1230, n1231) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.zero_p(n1231)!==false) {var if_res660 = M0.rnull;} else {var if_res660 = M0.cons(M0.car(l1230),list_take1229(M0.cdr(l1230),M0.sub1(n1231)));}return if_res660;};if (M0.null_p($rjs_core.Pair.makeList())!==false) {var if_res661 = M0.__eq_(r_len1228,2+len1226);} else {var if_res661 = false;}if (if_res661!==false) {var if_res662 = M0.apply(M0.values,M0.cadr(results1227),self1224,M0.cddr(results1227));} else {var skip1232 = r_len1228-len1226;var if_res662 = M0.apply(M0.values,M0.append(list_take1229(results1227,skip1232-2),M0.list(M0.list_ref(results1227,M0.sub1(skip1232)),self1224),M0.__rjs_quoted__.list_tail(results1227,skip1232)));}return if_res662;}));});}return if_res664(proc1209,make_keyword_procedure(if_res663));});var if_res667 = M0.values(new_kw_proc1207,new_procedure_ref);}var if_res672 = if_res667;} else {if (okp_p(n_proc1200)!==false) {if (is_impersonator_p1150!==false) {if (okm_p(n_proc1200)!==false) {var if_res668 = make_optional_keyword_method_impersonator;} else {var if_res668 = make_optional_keyword_procedure_impersonator;}var if_res669 = if_res668(keyword_procedure_checker(n_proc1200),chaperone_procedure1152(keyword_procedure_proc(n_proc1200),kw_chaperone1161),keyword_procedure_required(n_proc1200),keyword_procedure_allowed(n_proc1200),chaperone_procedure1152(okp_ref(n_proc1200,0),okp_ref(n_wrap_proc1158,0)),n_proc1200);} else {var if_res669 = M0.__rjs_quoted__.chaperone_struct(proc1199,keyword_procedure_proc,function(self1233, proc1234) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure1152(proc1234,kw_chaperone1161);},M0.make_struct_field_accessor(okp_ref,0),function(self1235, proc1236) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure1152(proc1236,okp_ref(n_wrap_proc1158,0));});}var if_res671 = M0.values(if_res669,keyword_procedure_proc);} else {if (is_impersonator_p1150!==false) {var name_plus_fail1237 = keyword_procedure_name_plus_fail(n_proc1200);var mk1238 = make_required(M0.car(name_plus_fail1237),M0.cdr(name_plus_fail1237),keyword_method_p(n_proc1200),true);var if_res670 = mk1238(keyword_procedure_checker(n_proc1200),chaperone_procedure1152(keyword_procedure_proc(n_proc1200),kw_chaperone1161),keyword_procedure_required(n_proc1200),keyword_procedure_allowed(n_proc1200),n_proc1200);} else {var if_res670 = M0.__rjs_quoted__.chaperone_struct(n_proc1200,keyword_procedure_proc,function(self1239, proc1240) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return chaperone_procedure1152(proc1240,kw_chaperone1161);});}var if_res671 = M0.values(if_res670,keyword_procedure_proc);}var if_res672 = if_res671;}return if_res672;};var let_result673 = wrap1198(proc1154,n_proc1157);var new_proc1196 = let_result673.getAt(0);var chap_accessor1197 = let_result673.getAt(1);if (M0.null_p(props1156)!==false) {var if_res674 = new_proc1196;} else {var if_res674 = M0.apply(M0.__rjs_quoted__.chaperone_struct,new_proc1196,chap_accessor1197,false,props1156);}var if_res675 = if_res674;}return if_res675;};var do_unsafe_chaperone_procedure = function(unsafe_chaperone_procedure1241, name1242, proc1243, wrap_proc1244, props1245) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var n_proc1246 = normalize_proc(proc1243);var n_wrap_proc1247 = normalize_proc(wrap_proc1244);var or_part1248 = M0.not(keyword_procedure_p(n_proc1246));if (or_part1248!==false) {var if_res677 = or_part1248;} else {var or_part1249 = M0.not(M0.procedure_p(wrap_proc1244));if (or_part1249!==false) {var if_res676 = or_part1249;} else {var if_res676 = bad_props_p(props1245);}var if_res677 = if_res676;}if (if_res677!==false) {var if_res678 = M0.apply(unsafe_chaperone_procedure1241,proc1243,wrap_proc1244,props1245);} else {chaperone_arity_match_checking(false,name1242,proc1243,wrap_proc1244,props1245);var if_res678 = M0.apply(unsafe_chaperone_procedure1241,proc1243,wrap_proc1244,props1245);}return if_res678;};var bad_props_p = function(props1250) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var loop1251 = function(props1252) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(props1252)!==false) {var if_res681 = false;} else {if (M0.__rjs_quoted__.impersonator_property_p(M0.car(props1252))!==false) {var props1253 = M0.cdr(props1252);var or_part1254 = M0.null_p(props1253);if (or_part1254!==false) {var if_res679 = or_part1254;} else {var if_res679 = loop1251(M0.cdr(props1253));}var if_res680 = if_res679;} else {var if_res680 = true;}var if_res681 = if_res680;}return if_res681;};return loop1251(props1250);};var chaperone_arity_match_checking = function(self_arg_p1255, name1256, proc1257, wrap_proc1258, props1259) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var a1260 = M0.procedure_arity(proc1257);var b1261 = M0.procedure_arity(wrap_proc1258);if (self_arg_p1255!==false) {var if_res682 = 1;} else {var if_res682 = 0;}var d1262 = if_res682;var let_result683 = procedure_keywords(proc1257);var a_req1263 = let_result683.getAt(0);var a_allow1264 = let_result683.getAt(1);var let_result684 = procedure_keywords(wrap_proc1258);var b_req1265 = let_result684.getAt(0);var b_allow1266 = let_result684.getAt(1);var includes_p1267 = function(a1268, b1269) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.number_p(b1269)!==false) {if (M0.number_p(a1268)!==false) {var if_res686 = M0.__eq_(b1269,a1268+d1262);} else {if (M0.arity_at_least_p(a1268)!==false) {var if_res685 = M0.__gt__eq_(b1269,M0.arity_at_least_value(a1268)+d1262);} else {var if_res685 = M0.ormap(function(a1270) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p1267(a1270,b1269);},a1268);}var if_res686 = if_res685;}var if_res690 = if_res686;} else {if (M0.arity_at_least_p(b1269)!==false) {if (M0.number_p(a1268)!==false) {var if_res688 = false;} else {if (M0.arity_at_least_p(a1268)!==false) {var if_res687 = M0.__gt__eq_(M0.arity_at_least_value(b1269),M0.arity_at_least_value(a1268)+d1262);} else {var if_res687 = M0.ormap(function(a1271) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p1267(b1269,a1271);},a1268);}var if_res688 = if_res687;}var if_res689 = if_res688;} else {var if_res689 = M0.andmap(function(b1272) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return includes_p1267(a1268,b1272);},b1269);}var if_res690 = if_res689;}return if_res690;};if (includes_p1267(b1261,a1260)!==false) {var if_res691 = M0.rvoid();} else {var if_res691 = M0.apply(M0.__rjs_quoted__.chaperone_procedure,proc1257,wrap_proc1258,props1259);}if_res691;if (subset_p(b_req1265,a_req1263)!==false) {var if_res692 = M0.rvoid();} else {var if_res692 = M0.raise_arguments_error(name1256,$rjs_core.UString.make("wrapper procedure requires more keywords than original procedure"),$rjs_core.UString.make("wrapper procedure"),wrap_proc1258,$rjs_core.UString.make("original procedure"),proc1257);}if_res692;var or_part1273 = M0.not(b_allow1266);if (or_part1273!==false) {var if_res694 = or_part1273;} else {if (a_allow1264!==false) {var if_res693 = subset_p(a_allow1264,b_allow1266);} else {var if_res693 = false;}var if_res694 = if_res693;}if (if_res694!==false) {var if_res695 = M0.rvoid();} else {var if_res695 = M0.raise_arguments_error(name1256,$rjs_core.UString.make("wrapper procedure does not accept all keywords of original procedure"),$rjs_core.UString.make("wrapper procedure"),wrap_proc1258,$rjs_core.UString.make("original procedure"),proc1257);}if_res695;return M0.rvoid();};var normalize_proc = function(proc1274) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (keyword_procedure_p(proc1274)!==false) {var if_res703 = proc1274;} else {if (new_procedure_p(proc1274)!==false) {var let_result696 = procedure_keywords(proc1274);var req_kws1275 = let_result696.getAt(0);var allowed_kws1276 = let_result696.getAt(1);if (M0.null_p(allowed_kws1276)!==false) {var if_res701 = proc1274;} else {var if_res701 = make_optional_keyword_procedure(function(given_kws1277, given_argc1278) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.procedure_arity_includes_p(proc1274,given_argc1278-2,true)!==false) {var or_part1279 = M0.not(allowed_kws1276);if (or_part1279!==false) {var if_res698 = or_part1279;} else {var if_res698 = subset_p(given_kws1277,allowed_kws1276);}if (if_res698!==false) {var if_res699 = subset_p(req_kws1275,given_kws1277);} else {var if_res699 = false;}var if_res700 = if_res699;} else {var if_res700 = false;}return if_res700;},$rjs_core.attachProcedureArity(function(kws1280, kw_args1281, ...vals1282697) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var vals1282 = $rjs_core.Pair.listFromArray(vals1282697);return keyword_apply(proc1274,kws1280,kw_args1281,vals1282);}),req_kws1275,allowed_kws1276,proc1274);}var if_res702 = if_res701;} else {var if_res702 = proc1274;}var if_res703 = if_res702;}return if_res703;};var __rjs_quoted__ = {};__rjs_quoted__.keyword_procedure_extract = keyword_procedure_extract;__rjs_quoted__.struct_keyword_method_by_arity_error = struct_keyword_method_by_arity_error;__rjs_quoted__.missing_kw = missing_kw;__rjs_quoted__.make_optional_keyword_method = make_optional_keyword_method;__rjs_quoted__.prop_named_keyword_procedure = prop_named_keyword_procedure;__rjs_quoted__.struct_keyword_procedure_by_arity_error = struct_keyword_procedure_by_arity_error;__rjs_quoted__.subsets_p = subsets_p;__rjs_quoted__.struct_keyword_procedure = struct_keyword_procedure;__rjs_quoted__.subset_p = subset_p;__rjs_quoted__.make_optional_keyword_procedure = make_optional_keyword_procedure;export { __rjs_quoted__,new_impersonate_procedure_times_,new_chaperone_procedure_times_,new_impersonate_procedure,new_chaperone_procedure,new_procedure_rename,new_procedure__gt_method,new_prop_procedure,procedure_reduce_keyword_arity_mask,procedure_reduce_keyword_arity,new_procedure_reduce_arity_mask,new_procedure_reduce_arity,procedure_keywords,keyword_apply,make_keyword_procedure };