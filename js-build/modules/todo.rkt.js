import * as $rjs_core from '../runtime/core.js';import * as M0 from "../rackt/main.rkt.js";import * as M1 from "../runtime/kernel.rkt.js";import * as M2 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";import * as M3 from "../collects/racket/private/list.rkt.js";import * as M4 from "../collects/racket/private/map.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M6 from "../collects/racket/private/kw.rkt.js";var StateContext = M0.create_context();var todo_input = $rjs_core.attachProcedureArity(function(props1167, ...__dot__dot_1168673) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1168 = $rjs_core.Pair.listFromArray(__dot__dot_1168673);var ctx1169 = M0.use_context(StateContext);var dispatch1170 = ctx1169.dispatch;var store1171 = ctx1169.store;var let_result674 = M0.use_state($rjs_core.UString.make(""));var TEXT1172 = let_result674.getAt(0);var set_TEXT_bang_1173 = let_result674.getAt(1);var update_text1174 = function(e1175) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_TEXT_bang_1173(M5.js_string__gt_string(e1175.target.value),TEXT1172);};var submit_todo1176 = function(e1177) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}e1177.preventDefault();dispatch1170({'type':$rjs_core.UString.make("add"),'todo':{'id':Date.now(),'text':TEXT1172}});return set_TEXT_bang_1173($rjs_core.UString.make(""));};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71178 = M0.__lt_el;var temp31179 = $rjs_core.UString.make("form");var temp41180 = {'onSubmit':submit_todo1176};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71182 = M0.__lt_el;var temp61183 = $rjs_core.UString.make("input");var temp71184 = {'className':$rjs_core.UString.make("todo-input"),'placeholder':$rjs_core.UString.make("What needs to be done?"),'value':TEXT1172,'onChange':update_text1174};var temp51181 = M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71182,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp71184),temp61183);return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71178,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp41180),temp31179,temp51181);});var todo_item = $rjs_core.attachProcedureArity(function(props1185, ...__dot__dot_1186675) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1186 = $rjs_core.Pair.listFromArray(__dot__dot_1186675);var ctx1187 = M0.use_context(StateContext);var dispatch1188 = ctx1187.dispatch;var done_todo1189 = function(id1190) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return dispatch1188({'type':$rjs_core.UString.make("done"),'id':props1185.todo.id});};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71191 = M0.__lt_el;var temp101192 = $rjs_core.UString.make("li");var temp111193 = {'className':$rjs_core.UString.make("todo-item")};var temp121194 = props1185.todo.text;var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71196 = M0.__lt_el;var temp141197 = $rjs_core.UString.make("button");var temp151198 = {'type':$rjs_core.UString.make("button"),'className':$rjs_core.UString.make("button button-clear todo-done-button"),'onClick':done_todo1189};var temp161199 = $rjs_core.UString.make("âœ”");var temp131195 = M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71196,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp151198),temp141197,temp161199);return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71191,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp111193),temp101192,temp121194,temp131195);});var todo_list = $rjs_core.attachProcedureArity(function(props1200, ...__dot__dot_1201676) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1201 = $rjs_core.Pair.listFromArray(__dot__dot_1201676);var ctx1202 = M0.use_context(StateContext);var dispatch1203 = ctx1202.dispatch;var store1204 = ctx1202.store;return M0.__lt_el($rjs_core.UString.make("ul"),M4.map(function(todo1205) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71206 = M0.__lt_el;var todo_item191207 = todo_item;var temp201208 = {'todo':todo1205};return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71206,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp201208),todo_item191207);},store1204.todos));});var default_state = {'todos':M1.list({'id':0,'text':$rjs_core.UString.make("Replace JavaScript with RacketScript")},{'id':1,'text':$rjs_core.UString.make("Install Rackt")},{'id':2,'text':$rjs_core.UString.make("Enjoy!")})};var add_todo = function(state1209, action1210) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.append(state1209.todos,M1.list(action1210.todo));};var done_todo = function(state1211, action1212) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M3.filter(function(el1213) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.not(M1.eq_p(el1213.id,action1212.id));},state1211.todos);};var reducer = function(state1214, action1215) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.eq_p(action1215.type,$rjs_core.UString.make("add"))!==false) {var if_res678 = {'todos':add_todo(state1214,action1215)};} else {if (M1.eq_p(action1215.type,$rjs_core.UString.make("done"))!==false) {var if_res677 = {'todos':done_todo(state1214,action1215)};} else {var if_res677 = state1214;}var if_res678 = if_res677;}return if_res678;};var todo_app = $rjs_core.attachProcedureArity(function(props1216, ...__dot__dot_1217679) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1217 = $rjs_core.Pair.listFromArray(__dot__dot_1217679);var let_result680 = M0.use_reducer(reducer,default_state);var store1218 = let_result680.getAt(0);var dispatch1219 = let_result680.getAt(1);var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71220 = M0.__lt_el;var temp221221 = StateContext.Provider;var temp231222 = {'value':{'store':store1218,'dispatch':dispatch1219}};var temp241223 = M0.__lt_el($rjs_core.UString.make("div"),M0.__lt_el(todo_input),M0.__lt_el(todo_list));return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_90_71220,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp231222),temp221221,temp241223);});var __rjs_quoted__ = {};export { __rjs_quoted__,todo_app };