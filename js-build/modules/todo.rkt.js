import * as $rjs_core from '../runtime/core.js';import * as M0 from "../collects/racket/private/kw.rkt.js";import * as M1 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";import * as M2 from "../collects/racket/private/map.rkt.js";import * as M3 from "../collects/racket/private/list.rkt.js";import * as M4 from "../runtime/kernel.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M6 from "./rackt.rkt.js";var StateContext = M6.create_context();var default_state = {'todos':M4.list({'id':0,'text':$rjs_core.UString.make("Replace JavaScript with RacketScript")},{'id':1,'text':$rjs_core.UString.make("Install Rackt")},{'id':2,'text':$rjs_core.UString.make("Enjoy!")})};var add_todo = function(state21, action22) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M4.append(state21.todos,M4.list(action22.todo));};var done_todo = function(state23, action24) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M3.filter(function(el25) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M4.not(M4.eq_p(el25.id,action24.id));},state23.todos);};var reducer = function(state26, action27) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M4.eq_p(action27.type,$rjs_core.UString.make("add"))!==false) {var if_res9 = {'todos':add_todo(state26,action27)};} else {if (M4.eq_p(action27.type,$rjs_core.UString.make("done"))!==false) {var if_res8 = {'todos':done_todo(state26,action27)};} else {var if_res8 = state26;}var if_res9 = if_res8;}return if_res9;};var todo_input = $rjs_core.attachProcedureArity(function(props28, ...__dot__dot_2910) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_29 = $rjs_core.Pair.listFromArray(__dot__dot_2910);var ctx30 = M6.use_context(StateContext);var dispatch31 = ctx30.dispatch;var store32 = ctx30.store;var let_result11 = M6.use_state($rjs_core.UString.make(""));var text33 = let_result11.getAt(0);var set_text34 = let_result11.getAt(1);var update_text35 = function(e36) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_text34(M5.js_string__gt_string(e36.target.value),text33);};var submit_todo37 = function(e38) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}e38.preventDefault();dispatch31({'type':$rjs_core.UString.make("add"),'todo':{'id':Date.now(),'text':text33}});return set_text34($rjs_core.UString.make(""));};var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__133139 = M6.__lt_el;var temp140 = $rjs_core.UString.make("form");var temp241 = {'onSubmit':submit_todo37};var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__140543 = M6.__lt_el;var temp444 = $rjs_core.UString.make("input");var temp545 = {'className':$rjs_core.UString.make("todo-input"),'placeholder':$rjs_core.UString.make("What needs to be done?"),'value':text33,'onChange':update_text35};var temp342 = M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__140543,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp545),temp444);return M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__133139,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp241),temp140,temp342);});var todo_item = $rjs_core.attachProcedureArity(function(props46, ...__dot__dot_4712) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_47 = $rjs_core.Pair.listFromArray(__dot__dot_4712);var ctx48 = M6.use_context(StateContext);var dispatch49 = ctx48.dispatch;var done_todo50 = function(id51) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return dispatch49({'type':$rjs_core.UString.make("done"),'id':props46.todo.id});};var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__189752 = M6.__lt_el;var temp653 = $rjs_core.UString.make("li");var temp754 = {'className':$rjs_core.UString.make("todo-item")};var temp855 = props46.todo.text;var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__200257 = M6.__lt_el;var temp1058 = $rjs_core.UString.make("button");var temp1159 = {'type':$rjs_core.UString.make("button"),'className':$rjs_core.UString.make("button button-clear todo-done-button"),'onClick':done_todo50};var temp1260 = $rjs_core.UString.make("âœ”");var temp956 = M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__200257,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp1159),temp1058,temp1260);return M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__189752,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp754),temp653,temp855,temp956);});var todo_list = $rjs_core.attachProcedureArity(function(props61, ...__dot__dot_6213) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_62 = $rjs_core.Pair.listFromArray(__dot__dot_6213);var ctx63 = M6.use_context(StateContext);var dispatch64 = ctx63.dispatch;var store65 = ctx63.store;return M6.__lt_el($rjs_core.UString.make("ul"),M2.map(function(todo66) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__241567 = M6.__lt_el;var todo_item1368 = todo_item;var temp1469 = {'todo':todo66};return M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__241567,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp1469),todo_item1368);},store65.todos));});var todo_app = $rjs_core.attachProcedureArity(function(props70, ...__dot__dot_7114) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_71 = $rjs_core.Pair.listFromArray(__dot__dot_7114);var provider72 = StateContext.Provider;var let_result15 = M6.use_reducer(reducer,default_state);var store73 = let_result15.getAt(0);var dispatch74 = let_result15.getAt(1);var __dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__263875 = M6.__lt_el;var provider1576 = provider72;var temp1677 = {'value':{'store':store73,'dispatch':dispatch74}};var temp1778 = M6.__lt_el($rjs_core.UString.make("div"),M6.__lt_el(todo_input));var temp1879 = M6.__lt_el(todo_list);return M4.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_rs_test_by_src_by_todo_dot_rkt__263875,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M4.list(temp1677),provider1576,temp1778,temp1879);});var __rjs_quoted__ = {};export { __rjs_quoted__,todo_app };