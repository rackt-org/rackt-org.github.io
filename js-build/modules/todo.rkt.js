import * as $rjs_core from '../runtime/core.js';import * as M0 from "../rackt/main.rkt.js";import * as M1 from "../runtime/kernel.rkt.js";import * as M2 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";import * as M3 from "../collects/racket/private/list.rkt.js";import * as M4 from "../collects/racket/private/map.rkt.js";import * as M5 from "../links/racketscript-compiler/racketscript/interop.rkt.js";import * as M6 from "../collects/racket/private/kw.rkt.js";var StateContext = M0.create_context();var default_state = {'todos':M1.list({'id':0,'text':$rjs_core.UString.make("Replace JavaScript with RacketScript")},{'id':1,'text':$rjs_core.UString.make("Install Rackt")},{'id':2,'text':$rjs_core.UString.make("Enjoy!")})};var add_todo = function(state1167, action1168) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.append(state1167.todos,M1.list(action1168.todo));};var done_todo = function(state1169, action1170) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M3.filter(function(el1171) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.not(M1.eq_p(el1171.id,action1170.id));},state1169.todos);};var reducer = function(state1172, action1173) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.eq_p(action1173.type,$rjs_core.UString.make("add"))!==false) {var if_res674 = {'todos':add_todo(state1172,action1173)};} else {if (M1.eq_p(action1173.type,$rjs_core.UString.make("done"))!==false) {var if_res673 = {'todos':done_todo(state1172,action1173)};} else {var if_res673 = state1172;}var if_res674 = if_res673;}return if_res674;};var todo_input = $rjs_core.attachProcedureArity(function(props1174, ...__dot__dot_1175675) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1175 = $rjs_core.Pair.listFromArray(__dot__dot_1175675);var ctx1176 = M0.use_context(StateContext);var dispatch1177 = ctx1176.dispatch;var store1178 = ctx1176.store;var let_result676 = M0.use_state($rjs_core.UString.make(""));var text1179 = let_result676.getAt(0);var set_text1180 = let_result676.getAt(1);var update_text1181 = function(e1182) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return set_text1180(M5.js_string__gt_string(e1182.target.value),text1179);};var submit_todo1183 = function(e1184) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}e1184.preventDefault();dispatch1177({'type':$rjs_core.UString.make("add"),'todo':{'id':Date.now(),'text':text1179}});return set_text1180($rjs_core.UString.make(""));};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71185 = M0.__lt_el;var temp11186 = $rjs_core.UString.make("form");var temp21187 = {'onSubmit':submit_todo1183};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71189 = M0.__lt_el;var temp41190 = $rjs_core.UString.make("input");var temp51191 = {'className':$rjs_core.UString.make("todo-input"),'placeholder':$rjs_core.UString.make("What needs to be done?"),'value':text1179,'onChange':update_text1181};var temp31188 = M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71189,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp51191),temp41190);return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71185,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp21187),temp11186,temp31188);});var todo_item = $rjs_core.attachProcedureArity(function(props1192, ...__dot__dot_1193677) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1193 = $rjs_core.Pair.listFromArray(__dot__dot_1193677);var ctx1194 = M0.use_context(StateContext);var dispatch1195 = ctx1194.dispatch;var done_todo1196 = function(id1197) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return dispatch1195({'type':$rjs_core.UString.make("done"),'id':props1192.todo.id});};var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71198 = M0.__lt_el;var temp61199 = $rjs_core.UString.make("li");var temp71200 = {'className':$rjs_core.UString.make("todo-item")};var temp81201 = props1192.todo.text;var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71203 = M0.__lt_el;var temp101204 = $rjs_core.UString.make("button");var temp111205 = {'type':$rjs_core.UString.make("button"),'className':$rjs_core.UString.make("button button-clear todo-done-button"),'onClick':done_todo1196};var temp121206 = $rjs_core.UString.make("âœ”");var temp91202 = M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71203,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp111205),temp101204,temp121206);return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71198,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp71200),temp61199,temp81201,temp91202);});var todo_list = $rjs_core.attachProcedureArity(function(props1207, ...__dot__dot_1208678) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1208 = $rjs_core.Pair.listFromArray(__dot__dot_1208678);var ctx1209 = M0.use_context(StateContext);var dispatch1210 = ctx1209.dispatch;var store1211 = ctx1209.store;return M0.__lt_el($rjs_core.UString.make("ul"),M4.map(function(todo1212) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71213 = M0.__lt_el;var todo_item131214 = todo_item;var temp141215 = {'todo':todo1212};return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71213,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),3)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp141215),todo_item131214);},store1211.todos));});var todo_app = $rjs_core.attachProcedureArity(function(props1216, ...__dot__dot_1217679) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_1217 = $rjs_core.Pair.listFromArray(__dot__dot_1217679);var provider1218 = StateContext.Provider;var let_result680 = M0.use_reducer(reducer,default_state);var store1219 = let_result680.getAt(0);var dispatch1220 = let_result680.getAt(1);var __dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71221 = M0.__lt_el;var provider151222 = provider1218;var temp161223 = {'value':{'store':store1219,'dispatch':dispatch1220}};var temp171224 = M0.__lt_el($rjs_core.UString.make("div"),M0.__lt_el(todo_input));var temp181225 = M0.__lt_el(todo_list);return M1.checked_procedure_check_and_extract(M6.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_tdemo_by_rackt_by_main_dot_rkt_71_71221,M6.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M1.list(temp161223),provider151222,temp171224,temp181225);});var __rjs_quoted__ = {};export { __rjs_quoted__,todo_app };