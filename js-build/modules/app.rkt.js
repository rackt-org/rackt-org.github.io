import * as $rjs_core from '../runtime/core.js';import * as M0 from "../collects/racket/private/kw.rkt.js";import * as M1 from "./todo.rkt.js";import * as M2 from "../links/racketscript-compiler/racketscript/private/interop.rkt.js";import * as M3 from "../runtime/kernel.rkt.js";import * as M4 from "./counter.rkt.js";import * as M5 from "./rackt.rkt.js";var header = $rjs_core.attachProcedureArity(function(props1, ...__dot__dot_21) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_2 = $rjs_core.Pair.listFromArray(__dot__dot_21);var temp4 = $rjs_core.UString.make("header");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__1523 = M5.__lt_el;var temp14 = $rjs_core.UString.make("div");var temp25 = {'className':$rjs_core.UString.make("header-content")};var temp36 = M5.__lt_el($rjs_core.UString.make("h1"),$rjs_core.UString.make("Rackt"));var temp3 = $rjs_core.UString.make("p");var temp2 = $rjs_core.UString.make("An ultrasmall (~70 loc) React wrapper written in ");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__3308 = M5.__lt_el;var temp59 = $rjs_core.UString.make("a");var temp610 = {'href':$rjs_core.UString.make("https://github.com/vishesh/racketscript")};var temp711 = $rjs_core.UString.make("RacketScript");var temp47 = M5.__lt_el(temp3,temp2,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__3308,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp610),temp59,temp711));return M5.__lt_el(temp4,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__1523,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp25),temp14,temp36,temp47));});var intro = $rjs_core.attachProcedureArity(function(props12, ...__dot__dot_135) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_13 = $rjs_core.Pair.listFromArray(__dot__dot_135);var temp11 = $rjs_core.UString.make("div");var temp10 = M5.__lt_el($rjs_core.UString.make("p"),$rjs_core.UString.make("Rackt is a tiny but still powerful React wrapper that allows you to write functional components with React hooks, contexts, and so on.\n        Despite the fact Rackt is in the early development stage, you can already use it because it has only simple js interop under the hood.\n        In most cases Rackt doesn't change API of React and you can use all familiar functions as you've already used to.\n        Here is an example of a simple Rackt component:"));var temp8 = $rjs_core.UString.make("pre");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__97614 = M5.__lt_el;var temp815 = $rjs_core.UString.make("code");var temp916 = {'className':$rjs_core.UString.make("language-racket")};var temp1017 = $rjs_core.UString.make("(define (simple-component props . ..)\n    (<el \"div\" #:props ($/obj [ className \"some-class\" ]) \"some text\"))");var temp9 = M5.__lt_el(temp8,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__97614,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp916),temp815,temp1017));var temp7 = M5.__lt_el($rjs_core.UString.make("p"),M5.__lt_el($rjs_core.UString.make("code"),$rjs_core.UString.make("<el")),$rjs_core.UString.make(" here is a simple alias for "),M5.__lt_el($rjs_core.UString.make("code"),$rjs_core.UString.make("React.createElement")),$rjs_core.UString.make(" function\n        that has optional "),M5.__lt_el($rjs_core.UString.make("code"),$rjs_core.UString.make("#:props")),$rjs_core.UString.make(" parameter so you can skip it if you want:"));var temp6 = $rjs_core.UString.make("pre");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__141418 = M5.__lt_el;var temp1119 = $rjs_core.UString.make("code");var temp1220 = {'className':$rjs_core.UString.make("language-racket")};var temp1321 = $rjs_core.UString.make("(define (simple-component props . ..)\n    (<el \"div\" \"some text\"))");return M5.__lt_el(temp11,temp10,temp9,temp7,M5.__lt_el(temp6,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__141418,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp1220),temp1119,temp1321)),M5.__lt_el($rjs_core.UString.make("p"),$rjs_core.UString.make("In the examples below you can see more complex components and apps (btw this site is written in Rackt as well).")));});var counter_example = $rjs_core.attachProcedureArity(function(props22, ...__dot__dot_2312) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_23 = $rjs_core.Pair.listFromArray(__dot__dot_2312);var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__174124 = M5.__lt_el;var temp1425 = $rjs_core.UString.make("div");var temp1526 = {'className':$rjs_core.UString.make("example")};var temp1627 = M5.__lt_el($rjs_core.UString.make("div"),M5.__lt_el($rjs_core.UString.make("h3"),$rjs_core.UString.make("Counter")),M5.__lt_el(M4.counter));var temp15 = $rjs_core.UString.make("div");var temp14 = M5.__lt_el($rjs_core.UString.make("h3"),$rjs_core.UString.make("Source code"));var temp13 = $rjs_core.UString.make("pre");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__195029 = M5.__lt_el;var temp1830 = $rjs_core.UString.make("code");var temp1931 = {'className':$rjs_core.UString.make("language-racket")};var counter_source_code2032 = counter_source_code;var temp1728 = M5.__lt_el(temp15,temp14,M5.__lt_el(temp13,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__195029,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp1931),temp1830,counter_source_code2032)));return M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__174124,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp1526),temp1425,temp1627,temp1728);});var todo_example = $rjs_core.attachProcedureArity(function(props33, ...__dot__dot_3416) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_34 = $rjs_core.Pair.listFromArray(__dot__dot_3416);var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__207335 = M5.__lt_el;var temp2136 = $rjs_core.UString.make("div");var temp2237 = {'className':$rjs_core.UString.make("example")};var temp2338 = M5.__lt_el($rjs_core.UString.make("div"),M5.__lt_el($rjs_core.UString.make("h3"),$rjs_core.UString.make("Todo app")),M5.__lt_el(M1.todo_app));var temp19 = $rjs_core.UString.make("div");var temp18 = M5.__lt_el($rjs_core.UString.make("h3"),$rjs_core.UString.make("Source code"));var temp17 = $rjs_core.UString.make("pre");var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__228440 = M5.__lt_el;var temp2541 = $rjs_core.UString.make("code");var temp2642 = {'className':$rjs_core.UString.make("language-racket")};var todo_source_code2743 = todo_source_code;var temp2439 = M5.__lt_el(temp19,temp18,M5.__lt_el(temp17,M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__228440,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),4)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp2642),temp2541,todo_source_code2743)));return M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__207335,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),5)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp2237),temp2136,temp2338,temp2439);});var app = $rjs_core.attachProcedureArity(function(props44, ...__dot__dot_4520) {if (arguments.length<1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __dot__dot_45 = $rjs_core.Pair.listFromArray(__dot__dot_4520);var __dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__239546 = M5.__lt_el;var temp2847 = $rjs_core.UString.make("div");var temp2948 = {'className':$rjs_core.UString.make("container")};var temp3049 = M5.__lt_el(header);var temp3150 = M5.__lt_el(intro);var temp3251 = M5.__lt_el($rjs_core.UString.make("h2"),$rjs_core.UString.make("Examples"));var temp3352 = M5.__lt_el(counter_example);var temp3453 = M5.__lt_el(todo_example);return M3.checked_procedure_check_and_extract(M0.__rjs_quoted__.struct_keyword_procedure,__dot__dot__dot_s_test_by__dot__by_src_by_app_dot_rkt__239546,M0.__rjs_quoted__.keyword_procedure_extract,$rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),8)($rjs_core.Pair.makeList($rjs_core.Keyword.make("props")),M3.list(temp2948),temp2847,temp3049,temp3150,temp3251,temp3352,temp3453);});var todo_source_code = $rjs_core.UString.make("#lang racketscript/base\n\n(require racketscript/interop\n         \"./rackt.rkt\")\n\n(define StateContext (create-context))\n\n(define (add-todo state action)\n    (append ($ state 'todos) (list ($ action 'todo))))\n\n(define (remove-todo state action)\n    (filter (lambda (el) (not (eq? ($ el 'id) ($ action 'id)))) ($ state 'todos)))\n\n(define (reducer state action)\n    (cond\n        [(eq? ($ action 'type) \"add\")\n            ($/obj [ todos (add-todo state action)])]\n        [(eq? ($ action 'type) \"remove\")\n            ($/obj [ todos (remove-todo state action)])]\n        [else state]))\n\n(define (todo-input props . ..)\n    (define ctx (use-context StateContext))\n    (define dispatch ($ ctx 'dispatch))\n    (define store ($ ctx 'store))\n    (define-values (text set-text) (use-state \"\"))\n\n    (define (update-text e)\n        (set-text (js-string->string ($ e 'target 'value)) text))\n\n    (define (submit-todo e)\n        (($ e 'preventDefault))\n        (dispatch ($/obj [ type \"add\" ]\n                       [ todo ($/obj [ id (#js*.Date.now) ]\n                                     [ text text ])]))\n\n    (set-text \"\"))\n\n    (<el \"form\"\n         #:props ($/obj [ onSubmit submit-todo ])\n            (<el \"input\"\n                #:props ($/obj [ className \"todo-input\" ]\n                               [ placeholder \"What needs to be done?\" ]\n                               [ value text ]\n                               [ onChange update-text]))))\n\n(define (todo-item props . ..)\n    (define ctx (use-context StateContext))\n    (define dispatch ($ ctx 'dispatch))\n    (define (remove-todo id)\n        (dispatch ($/obj [ type \"remove\" ]\n                         [ id ($ props 'todo 'id) ])))\n\n    (<el \"li\"\n        #:props ($/obj [ className \"todo-item\"])\n            ($ props 'todo 'text)\n            (<el \"button\"\n                #:props ($/obj [ type \"button\" ]\n                            [ className \"button button-clear todo-remove-button\"]\n                            [ onClick remove-todo ])\n                \"x\")))\n\n(define (todo-list props . ..)\n    (define ctx (use-context StateContext))\n    (define dispatch ($ ctx 'dispatch))\n    (define store ($ ctx 'store))\n\n    (<el \"ul\"\n         (map (lambda (todo) (<el todo-item #:props ($/obj [todo todo]))) ($ store 'todos))))\n\n(define (todo-app props . ..)\n    (define provider ($ StateContext 'Provider))\n    (define default-state ($/obj [todos (list)]))\n    (define-values (store dispatch) (use-reducer reducer default-state))\n\n    (<el provider\n        #:props ($/obj [ value\n            ($/obj [ store store ]\n                   [ dispatch dispatch ])])\n        (<el \"div\"\n            (<el todo-input))\n            (<el todo-list)))\n\n(provide todo-app)\n");var counter_source_code = $rjs_core.UString.make("(define (counter props ..)\n    (define-values (counter set-counter) (use-state 0))\n\n    (<el \"div\"\n        (<el \"button\"\n            #:props ($/obj [ className \"button\" ]\n                   [ type \"button\" ]\n                   [onClick (lambda (_) (set-counter (- counter 1)))])\n            \"- 1\")\n\n        (<el \"span\" #:props ($/obj [ className \"counter\" ]) counter)\n\n        (<el \"button\"\n            #:props ($/obj [ className \"button\" ]\n                   [ type \"button\" ]\n                   [onClick (lambda (_) (set-counter (+ counter 1)))])\n            \"+ 1\")))");M5.render(M5.__lt_el(app),$rjs_core.UString.make("root"));var __rjs_quoted__ = {};export { __rjs_quoted__ };